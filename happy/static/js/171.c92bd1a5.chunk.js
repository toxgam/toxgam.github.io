(this["webpackJsonphappy-author"]=this["webpackJsonphappy-author"]||[]).push([[171],{2387:function(e,t,n){"use strict";n.d(t,"a",(function(){return A}));var r=n(9),i=n.n(r),a=n(10),o=n.n(a),c=n(5),s=n.n(c),u=n(15),l=n.n(u),f=n(18),v=n.n(f),d=n(7),p=n.n(d),h=n(1),m=n.n(h),y=n(0),w=n.n(y),g=n(802),b=n(2110),k=n(2385),S=n.n(k),x=n(852),C=n(2384),R=n(2378),E=n(2407);function D(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v()(this,n)}}var A=function(e){l()(n,e);var t=D(n);function n(){var e;i()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),m()(s()(e),"state",e.getInitialState()),m()(s()(e),"onMediaDisplayed",(function(){var t=e.props.item;x.a.emit("media-viewed",{fileId:t.id,viewingLevel:"full"})})),e}return o()(n,[{key:"componentDidMount",value:function(){this.init()}},{key:"componentWillUnmount",value:function(){this.release()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.needsReset(e,this.props)&&(this.release(),this.setState(this.initialState))}},{key:"componentDidUpdate",value:function(e){this.needsReset(e,this.props)&&this.init()}},{key:"render",value:function(){var e=this;return this.state.content.match({pending:function(){return w.a.createElement(R.a,null)},successful:function(t){return e.renderSuccessful(t)},failed:function(t){var n=e.props.item;return w.a.createElement(C.a,{fileId:n.id,fileState:n,error:t,supressAnalytics:!0},w.a.createElement("p",null,w.a.createElement(g.a,b.a.try_downloading_file)),e.renderDownloadButton(t))}})}},{key:"getInitialState",value:function(){return this.initialState}},{key:"renderDownloadButton",value:function(e){var t=this.props,n=t.item,r=t.mediaClient,i=t.collectionName;return w.a.createElement(E.b,{fileState:n,mediaClient:r,error:e,collectionName:i})}},{key:"needsReset",value:function(e,t){return!S()(e.item,t.item)||e.mediaClient!==t.mediaClient||e.collectionName!==t.collectionName}}]),n}(w.a.Component)},2421:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(0))&&r.__esModule?r:{default:r},a=n(53);var o=function(e){return i.default.createElement(a.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path d="M8.595 19.522C7.162 20.364 6 19.702 6 18.04V5.963C6 4.3 7.158 3.635 8.595 4.479l11.083 6.51c.951.559.958 1.46 0 2.023l-11.083 6.51z" fill="currentColor" fill-rule="evenodd"/></svg>'},e))};o.displayName="VidPlayIcon";var c=o;t.default=c},2452:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(26),i=n.n(r),a=n(12),o=n.n(a),c=n(241),s=function(){var e=i()(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(c.a)(t)){e.next=14;break}if(!(n=t.preview)){e.next=14;break}return e.prev=3,e.t0=URL,e.next=7,n;case 7:return e.t1=e.sent.value,e.abrupt("return",e.t0.createObjectURL.call(e.t0,e.t1));case 11:return e.prev=11,e.t2=e.catch(3),e.abrupt("return",void 0);case 14:return e.abrupt("return",void 0);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}()},2546:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator;return-1!==e.userAgent.indexOf("MSIE")||e.appVersion.indexOf("Trident/")>0}},3228:function(e,t,n){"use strict";n.r(t),n.d(t,"VideoViewer",(function(){return N}));var r=n(26),i=n.n(r),a=n(9),o=n.n(a),c=n(10),s=n.n(c),u=n(5),l=n.n(u),f=n(15),v=n.n(f),d=n(18),p=n.n(d),h=n(7),m=n.n(h),y=n(1),w=n.n(y),g=n(12),b=n.n(g),k=n(0),S=n.n(k),x=n(852),C=n(849),R=n(3312),E=n(3201),D=n(2371),A=n(2377),I=n(2546),_=n(2387),O=n(2452);function P(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var i=m()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var H="video_640.mp4",j="video_1280.mp4",B="mv_video_player_quality",N=function(e){v()(n,e);var t=P(n);function n(){var e;o()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i)),w()(l()(e),"onHDChange",(function(){var t=!e.state.isHDActive,n=t?"hd":"sd";localStorage.setItem(B,n),e.setState({isHDActive:t}),e.init(t)})),w()(l()(e),"onFirstPlay",(function(){var t=e.props,n=t.item,r=t.onCanPlay;x.a.emit("media-viewed",{fileId:n.id,viewingLevel:"full"}),r&&r()})),w()(l()(e),"onError",(function(){var t=e.props.onError;t&&t(new D.b("videoviewer-playback"))})),e}return s()(n,[{key:"initialState",get:function(){var e=this.props.item,t=localStorage.getItem(B);return{content:E.a.pending(),isHDActive:M(e)&&"sd"!==t}}},{key:"renderSuccessful",value:function(e){var t=this.state.isHDActive,n=this.props,r=n.item,i=n.showControls,a=0===n.previewCount;return!Object(I.a)()?S.a.createElement(A.k,{"data-testid":"media-viewer-video-content"},S.a.createElement(R.a,{type:"video",isAutoPlay:a,onHDToggleClick:this.onHDChange,showControls:i,src:e,fileId:r.id,isHDActive:t,isHDAvailable:M(r),isShortcutEnabled:!0,onFirstPlay:this.onFirstPlay,onError:this.onError,lastWatchTimeConfig:{contentId:r.id}})):S.a.createElement(A.J,{autoPlay:a,controls:!0,src:e})}},{key:"init",value:function(){var e=i()(b.a.mark((function e(){var t,n,r,i,a,o,c,s=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:this.state.isHDActive,n=this.props,r=n.mediaClient,i=n.item,a=n.collectionName,e.prev=2,"processed"!==i.status){e.next=12;break}return c=t&&M(i),e.next=7,r.file.getArtifactURL(i.artifacts,c?j:H,a);case 7:if(o=e.sent){e.next=10;break}throw new D.b("videoviewer-missing-artefact");case 10:e.next=18;break;case 12:return e.next=14,Object(O.a)(i);case 14:if(o=e.sent){e.next=18;break}return this.setState({content:E.a.pending()}),e.abrupt("return");case 18:this.setState({content:E.a.successful(o)}),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(2),this.setState({content:E.a.failed(new D.b("videoviewer-fetch-url",e.t0))});case 24:case"end":return e.stop()}}),e,this,[[2,21]])})));return function(){return e.apply(this,arguments)}}()},{key:"release",value:function(){}}]),n}(_.a);function M(e){return"processed"===e.status&&!!Object(C.a)(e.artifacts,j)}}}]);