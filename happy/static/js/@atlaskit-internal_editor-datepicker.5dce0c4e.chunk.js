(this["webpackJsonphappy-author"]=this["webpackJsonphappy-author"]||[]).push([[43],{3310:function(t,e,n){"use strict";n.r(e);var a,o=n(9),i=n.n(o),c=n(10),r=n.n(c),s=n(5),l=n.n(s),u=n(15),d=n.n(u),p=n(18),f=n.n(p),h=n(7),v=n.n(h),y=n(1),b=n.n(y),m=n(8),D=n.n(m),E=n(0),T=n.n(E),O=n(2),S=n(76),A=n.n(S),R=n(2063),j=n(2336),g=n(100),k=n(3288),w=n(35),x=n(16),I=n(48),C=n(296),N=n(56),P=n(346),K=n(32),M=n(815),B=n(664),F=n(2322),W=n(3168);function _(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=v()(t);if(e){var o=v()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return f()(this,n)}}var V,Y=Object(O.c)(a||(a=D()(["\n  padding: 22px;\n  padding-bottom: 12px;\n"]))),G=Object(K.b)({invalidDateError:{id:"fabric.editor.invalidDateError",defaultMessage:"Enter a valid date",description:"Error message when the date typed in is invalid, requesting they inputs a new date"}}),H=function(t){d()(n,t);var e=_(n);function n(t){var a;i()(this,n),a=e.call(this,t),b()(l()(a),"focusInput",(function(){a.inputRef&&(a.autofocusTimeout=setTimeout((function(){a.inputRef.focus()})))})),b()(l()(a),"selectInput",(function(){a.inputRef&&(a.autoSelectAllTimeout=setTimeout((function(){a.inputRef.select()})))})),b()(l()(a),"handleInputRef",(function(t){var e=a.props,n=e.autoFocus,o=e.autoSelectAll;t&&(a.inputRef=t),t&&n&&a.focusInput(),o&&a.selectInput()})),b()(l()(a),"handleChange",(function(t){var e=t.target.value,n=a.props,o=n.locale,i=n.dispatchAnalyticsEvent,c=Object(B.d)(e,o);void 0!==c&&null!==c?(a.setState({inputText:e}),a.props.onNewDate(c),i&&i({eventType:N.e.TRACK,action:N.a.TYPING_FINISHED,actionSubject:N.b.DATE})):a.setState({inputText:e})})),b()(l()(a),"handleKeyPress",(function(t){var e=a.props,n=e.locale,o=e.dispatchAnalyticsEvent,i=t.target.value;if(o&&"Enter"!==t.key&&"Backspace"!==t.key&&o({eventType:N.e.TRACK,action:N.a.TYPING_STARTED,actionSubject:N.b.DATE}),"Enter"===t.key)if(""!==i){var c=Object(B.d)(i,n);a.props.onSubmitDate(c)}else a.props.onEmptySubmit()})),b()(l()(a),"handleKeyDown",(function(t){var e,n=t.target.value,o=a.props.locale;if("ArrowUp"===t.key?e=1:"ArrowDown"===t.key&&(e=-1),void 0!==e){var i=a.props.dispatchAnalyticsEvent,c=a.inputRef.selectionStart,r=Object(M.b)(c,n,o);if(void 0!==r){var s;switch(r){case"day":s=N.c.DATE_DAY;break;case"month":s=N.c.DATE_MONTH;break;default:s=N.c.DATE_YEAR}i&&i({eventType:N.e.TRACK,action:e>0?N.a.INCREMENTED:N.a.DECREMENTED,actionSubject:N.b.DATE_SEGMENT,attributes:{dateSegment:s}});var l=Object(B.d)(n,o);if(void 0!==l&&null!==l){var u=Object(M.a)(l,r,e);a.setState({inputText:Object(B.c)(u,o)}),a.props.onNewDate(u),a.setInputSelectionPos=Math.min(c,n.length),t.preventDefault()}}}}));var o=t.date;a.setInputSelectionPos=void 0;var c=Object(B.c)(o,a.props.locale);return a.state={inputText:c},a}return r()(n,[{key:"render",value:function(){var t=this.props,e=t.locale,n=t.intl.formatMessage,a=this.state.inputText,o=Object(M.c)(a),i=(null===Object(B.d)(a,e)||!o)&&""!==a;return Object(O.d)("div",{css:Y},Object(O.d)(F.a,{name:"datetextfield",value:a,ref:this.handleInputRef,onChange:this.handleChange,onKeyPress:this.handleKeyPress,onKeyDown:this.handleKeyDown,spellCheck:!1,autoComplete:"off",isInvalid:i}),i&&Object(O.d)(W.a,null,n(G.invalidDateError)))}},{key:"componentDidUpdate",value:function(){var t=this.setInputSelectionPos;void 0!==t&&(this.inputRef.setSelectionRange(t,t),this.setInputSelectionPos=void 0),this.inputRef&&this.props.autoFocus&&this.focusInput()}},{key:"componentWillUnmount",value:function(){void 0!==this.autofocusTimeout&&clearTimeout(this.autofocusTimeout),void 0!==this.autoSelectAllTimeout&&clearTimeout(this.autoSelectAllTimeout)}}]),n}(T.a.Component),U=Object(P.c)(H);function J(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=v()(t);if(e){var o=v()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return f()(this,n)}}var q=Object(C.a)(R.a),z=Object(O.c)(V||(V=D()(["\n  padding: 2px;\n  border-radius: ","px;\n  box-shadow: ",";\n  background-color: ",";\n"])),Object(w.d)(),Object(I.a)("elevation.shadow.overlay","0 4px 8px -2px ".concat(x.N60A,", 0 0 1px ").concat(x.N60A)),Object(I.a)("elevation.surface.overlay",x.N0)),L=function(t){d()(n,t);var e=J(n);function n(t){var a;i()(this,n),a=e.call(this,t),b()(l()(a),"handleNewDate",(function(t){a.props.onTextChanged(t),a.setState({latestValidDate:t})})),b()(l()(a),"handleKeyboardSubmitDate",(function(t){a.props.onSelect(t,N.f.KEYBOARD)})),b()(l()(a),"handleEmptySubmitDate",(function(){a.props.onDelete()})),b()(l()(a),"handleOnChange",(function(t){var e={day:t.day,month:t.month,year:t.year};a.setState({latestValidDate:e})})),b()(l()(a),"closeDatePickerWithAnalytics",(function(){a.props.closeDatePickerWithAnalytics({date:a.state.latestValidDate})})),b()(l()(a),"handleRef",(function(t){var e=t&&A.a.findDOMNode(t);e&&e.focus()}));var o=t.element.getAttribute("timestamp");if(o){var c=Object(j.e)(o),r={day:c.day,month:c.month,year:c.year};a.state={selected:[Object(j.b)(o)],date:r,latestValidDate:r}}return a}return r()(n,[{key:"render",value:function(){var t=this.props,e=t.element,n=t.onSelect,a=t.mountTo,o=t.boundariesElement,i=t.scrollableElement,c=t.showTextField,r=t.intl,s=t.dispatchAnalyticsEvent,l=t.isNew,u=t.autoFocus,d=e.getAttribute("timestamp");if(null===this.state)return null;var p=this.state,f=p.date,h=p.selected,v=p.latestValidDate,y=v.day,b=v.month,m=v.year;return d?Object(O.d)(q,{target:e,offset:[0,8],fitHeight:327,fitWidth:340,handleClickOutside:this.closeDatePickerWithAnalytics,handleEscapeKeydown:this.closeDatePickerWithAnalytics,zIndex:g.n,mountTo:a,boundariesElement:o,scrollableElement:i},Object(O.d)("div",{css:z},!0===c&&Object(O.d)(U,{date:f,onNewDate:this.handleNewDate,onSubmitDate:this.handleKeyboardSubmitDate,onEmptySubmit:this.handleEmptySubmitDate,locale:r.locale,dispatchAnalyticsEvent:s,autoFocus:u,autoSelectAll:l}),Object(O.d)(k.a,{onChange:this.handleOnChange,onSelect:function(t){return n(t,N.f.PICKER)},day:y,month:b,year:m,selected:h,ref:this.handleRef}))):null}}]),n}(T.a.Component);e.default=Object(P.c)(L)}}]);