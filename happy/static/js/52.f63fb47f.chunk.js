(this["webpackJsonphappy-author"]=this["webpackJsonphappy-author"]||[]).push([[52],{2689:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(0)),i=o(n(43));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e){return r.default.createElement(i.default,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path fill="currentColor" fill-rule="evenodd" d="M8 10V8.002A4.004 4.004 0 0112 4a4 4 0 014 4.002V10a2 2 0 012 2v6c0 1.105-.902 2-2.009 2H8.01A2 2 0 016 18v-6c0-1.102.897-1.995 2-2zm2 0h4V8.002A2.001 2.001 0 0012 6c-1.102 0-2 .898-2 2.002V10zm2 7a2 2 0 100-4 2 2 0 000 4z"/></svg>'},e))};a.displayName="LockFilledIcon";var c=a;t.default=c},2721:function(e,t,n){var r,i,o;i=[],void 0===(o="function"===typeof(r=function(){var e=/(auto|scroll)/,t=function e(t,n){return null===t.parentNode?n:e(t.parentNode,n.concat([t]))},n=function(e,t){return getComputedStyle(e,null).getPropertyValue(t)},r=function(e){return n(e,"overflow")+n(e,"overflow-y")+n(e,"overflow-x")},i=function(t){return e.test(r(t))};return function(e){if(e instanceof HTMLElement||e instanceof SVGElement){for(var n=t(e.parentNode,[]),r=0;r<n.length;r+=1)if(i(n[r]))return n[r];return document.scrollingElement||document.documentElement}}})?r.apply(t,i):r)||(e.exports=o)},2762:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var r=n(0),i=n(2721),o=n.n(i);function a(e){if(e){var t=e.getBoundingClientRect();return{left:window.pageXOffset+t.left,right:window.pageXOffset+t.left+t.width,top:window.pageYOffset+t.top,bottom:window.pageYOffset+t.top+t.height}}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=function(e){if(e){if(e===window)return{top:window.pageYOffset,left:window.pageXOffset,bottom:window.pageYOffset+window.innerHeight,right:window.pageXOffset+window.innerWidth};var t=a(e);return t?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){c(e,t,n[t])}))}return e}({},t,{bottom:t.top+e.offsetHeight,right:t.left+e.offsetWidth}):void 0}};function s(e){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var u=function(e,t,n){var r=n&&n.top||0,i=n&&n.right||0,o=n&&n.bottom||0,a=n&&n.left||0;return e.bottom+o>=t.top&&e.top-r<=t.bottom&&e.right+i>=t.left&&e.left-a<=t.right},d=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(n){}return e}()?{passive:!0}:void 0;function f(e){return(f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return!t||"object"!==f(t)&&"function"!==typeof t?h(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j=function(e){function t(){var e,n;p(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(h(n=b(this,(e=m(t)).call.apply(e,[this].concat(i)))),"raf",void 0),O(h(n),"element",void 0),O(h(n),"container",void 0),O(h(n),"state",{hasBeenScrolledIntoView:!1}),O(h(n),"update",(function(){cancelAnimationFrame(n.raf),n.raf=requestAnimationFrame((function(){var e=n.getElementBounds(),t=n.getViewportBounds(),r=n.getOffsetBounds();e&&t&&u(e,t,r)&&(n.stopListening(n.container),n.setState({hasBeenScrolledIntoView:!0},(function(){var e=n.props.onRender;e&&e()})))}))})),O(h(n),"handleMount",(function(e){var t=n.props.scrollContainer;n.element=e,n.container=n.getContainer(t)})),n}var n,i,c;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,e),n=t,(i=[{key:"getContainer",value:function(e){if(e)return e;if(this.element){var t=o()(this.element);return t===document.scrollingElement||t===document.documentElement||"BackCompat"!==document.compatMode&&t==document.body?window:t}}},{key:"getViewportBounds",value:function(){return l(this.container)}},{key:"getElementBounds",value:function(){return a(this.element)}},{key:"getOffsetBounds",value:function(){return function(e){var t,n,r,i;if(e)return"object"===s(e)?(t=e.top||0,n=e.right||0,r=e.bottom||0,i=e.left||0):(t=e||0,n=e||0,r=e||0,i=e||0),{top:t,right:n,bottom:r,left:i}}(this.props.offset)}},{key:"componentDidUpdate",value:function(e,t){var n=this,r=e.scrollContainer,i=this.props.scrollContainer;r!==i&&(t.hasBeenScrolledIntoView||this.stopListening(r),this.container=this.getContainer(i),this.startListening(this.container),this.setState({hasBeenScrolledIntoView:!1},(function(){n.update()})))}},{key:"startListening",value:function(e){e&&e.addEventListener("scroll",this.update,d),window.addEventListener("resize",this.update)}},{key:"stopListening",value:function(e){e&&e.removeEventListener("scroll",this.update,d),window.removeEventListener("resize",this.update)}},{key:"componentDidMount",value:function(){this.update(),this.startListening(this.container)}},{key:"componentWillUnmount",value:function(){this.stopListening(this.container)}},{key:"renderChildren",value:function(){var e=this.props,t=e.placeholder,n=e.content,r=e.children,i=this.state.hasBeenScrolledIntoView;return!i&&t?t:i&&n?n:r?r(i):null}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.component;return r.createElement(n||"div",{ref:this.handleMount,className:t,children:this.renderChildren()})}}])&&v(n.prototype,i),c&&v(n,c),t}(r.Component)},2891:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e){return{image:e,isLoaded:!1,isErrored:!1}}function c(e,t){return e.src!==t.src}var l=function(e){function t(){var e,n,r;i(this,t);for(var a=arguments.length,c=Array(a),l=0;l<a;l++)c[l]=arguments[l];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.state={isLoaded:!1,isErrored:!1},r.handleLoad=function(){var e=r.props.onLoad;r.unload(),r.setState({isLoaded:!0},(function(){e&&e()}))},r.handleError=function(){var e=r.props.onError;r.unload(),r.setState({isErrored:!0},(function(){e&&e()}))},o(r,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"load",value:function(){var e=this.props.src,t=this.state.image;t&&(t.onload=this.handleLoad,t.onerror=this.handleError,t.src=e)}},{key:"unload",value:function(){var e=this.state.image;e&&(e.onload=void 0,e.onerror=void 0)}},{key:"componentWillMount",value:function(){"undefined"!==typeof window&&this.setState(a(new Image))}},{key:"componentDidMount",value:function(){this.load()}},{key:"componentWillReceiveProps",value:function(e){c(this.props,e)&&this.setState(a(new Image))}},{key:"componentDidUpdate",value:function(e){c(e,this.props)&&(this.unload(),this.load())}},{key:"componentWillUnmount",value:function(){this.unload()}},{key:"render",value:function(){var e=this.props,t=e.loading,n=e.loaded,r=e.errored,i=e.children,o=this.state,a=o.image,c=o.isLoaded,l=o.isErrored;return c&&n?n:l&&r?r:c||l||!t?i?i({image:c?a:void 0,loaded:c,errored:l}):null:t}}]),t}(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)).Component);t.default=l},3465:function(e,t,n){"use strict";n.r(t),n.d(t,"LazyCardWithUrlContent",(function(){return At}));var r=n(0),i=n.n(r),o=n(27),a=n.n(o),c=n(2762),l=n(892),s=n(244),u=n(195),d=n(671),f=n(31),p=n(898),v=n.n(p),b=n(2),m=n(16),h=n(2660),y=n(328),O=n(26),j=n(2444),g=function(e){var t=e.isSelected,n=void 0!==t&&t,r=e.testId,i=void 0===r?"block-card-resolving-view":r,o=e.inheritDimensions;return Object(f.e)(h.a,{inheritDimensions:o,compact:!0,isSelected:n,testId:i},Object(f.e)(v.a,{size:"small",primaryColor:b.N50,label:"document-icon"}),Object(f.e)("span",{css:{fontSize:"".concat(Object(m.f)(),"px"),color:b.N90,marginLeft:Object(y.b)(.5)}},Object(f.e)(O.a,j.a.loading)))},w=n(3472),k=n(1),E=n.n(k),C=n(2701),S=n(2674),x=n(2713),I=n(2686),_=n(2687),A=n(2688),P=n(2675),R=function(e){var t=e.url,n=e.testId,r=void 0===n?"block-card":n;return Object(f.e)("span",{"data-testid":"".concat(r,"-link"),css:{color:b.B400,wordBreak:"break-all"}},t)};function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var z=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){E()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},j.a.connect_link_account_card_description),F=function(e){var t=e.context,n=void 0===t?{text:""}:t,r=e.isSelected,i=void 0!==r&&r,o=e.actions,c=void 0===o?[]:o,l=e.testId,s=void 0===l?"block-card-unauthorized-view":l,u=e.showActions,d=void 0===u||u,p=e.link,v=void 0===p?"":p,b=e.onClick,m=void 0===b?function(){}:b;return Object(f.e)(h.a,{isSelected:i,testId:s,isFluidHeight:!0},Object(f.e)(I.a,{isCompact:!0},Object(f.e)("div",null,Object(f.e)(_.a,{onClick:function(e){return Object(P.a)(e,m)},link:v},Object(f.e)(R,{url:v,testId:s})),Object(f.e)(S.a,{testId:s?"".concat(s,"-byline"):void 0,text:Object(f.e)(O.a,a()({},z,{values:{context:n.text}}))})),Object(f.e)(A.a,null,Object(f.e)(C.a,{name:n.text,icon:n.icon}),d&&Object(f.e)(x.a,{items:c}))))},M=n(23),L=n.n(M),V=n(2689),B=n.n(V),N=function(e){var t=e.icon,n=e.text;return Object(f.e)("span",{css:{display:"flex",alignItems:"center"}},t,n)},W=function(e){var t=e.context,n=void 0===t?{text:""}:t,r=e.isSelected,i=void 0!==r&&r,o=e.actions,c=void 0===o?[]:o,l=e.testId,s=void 0===l?"block-card-forbidden-view":l,u=e.showActions,d=void 0===u||u,p=e.link,v=void 0===p?"":p,m=e.onClick,y=void 0===m?function(){}:m,g=e.requestAccessContext,w=void 0===g?{}:g,k=w.action,E=w.descriptiveMessageKey,D=void 0===E?"invalid_permissions_description":E,z=k?[].concat(L()(c),[k]):c;return Object(f.e)(h.a,{isSelected:i,testId:s,isFluidHeight:!0},Object(f.e)(I.a,{isCompact:!0},Object(f.e)("div",null,Object(f.e)(_.a,{onClick:function(e){return Object(P.a)(e,y)},link:v},Object(f.e)(R,{url:v,testId:s})),Object(f.e)(S.a,null,Object(f.e)(N,{icon:Object(f.e)(B.a,{label:"forbidden-lock-icon",size:"small",primaryColor:b.R300,testId:"".concat(s,"-lock-icon")}),text:Object(f.e)(O.a,a()({},j.a[D],{values:{context:n.text}}))}))),Object(f.e)(A.a,null,Object(f.e)(C.a,{name:n.text,icon:n.icon}),d&&Object(f.e)(x.a,{items:z}))))},H=n(3419),q=n(855),T=n.n(q);function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var U=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){E()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},j.a.not_found_description),X=function(e){var t=e.context,n=void 0===t?{text:""}:t,r=e.isSelected,i=void 0!==r&&r,o=e.testId,a=void 0===o?"block-card-not-found-view":o,c=e.link,l=void 0===c?"":c,s=e.onClick,u=void 0===s?function(){}:s;return Object(f.e)(h.a,{isSelected:i,testId:a,isFluidHeight:!0},Object(f.e)(I.a,{isCompact:!0},Object(f.e)("div",null,Object(f.e)(_.a,{onClick:function(e){return Object(P.a)(e,u)},link:l},Object(f.e)(R,{url:l,testId:a})),Object(f.e)(S.a,null,Object(f.e)(N,{icon:Object(f.e)(T.a,{label:"not-found-warning-icon",size:"small",primaryColor:b.R300,testId:"".concat(a,"-warning-icon")}),text:Object(f.e)(O.a,U)}))),Object(f.e)(A.a,null,Object(f.e)(C.a,{name:n.text,icon:n.icon}))))},Y=n(2609),G=n(14),J=n.n(G),Q=n(22),Z=n.n(Q);function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ee=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){E()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},j.a.could_not_load_link),te=function(e){var t=e.isSelected,n=void 0!==t&&t,o=e.testId,a=void 0===o?"block-card-errored-view":o,c=e.link,l=void 0===c?"":c,s=e.onClick,u=void 0===s?function(){}:s,d=e.onRetry,p=e.inheritDimensions,v=void 0!==p&&p,m=Object(r.useMemo)((function(){return d?[(e=d,{id:"try-again",promise:function(){var t=Z()(J.a.mark((function t(){return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e());case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),text:i.a.createElement(O.a,j.a.try_again)})]:[];var e}),[d]);return Object(f.e)(h.a,{isSelected:n,testId:a,isFluidHeight:!0,inheritDimensions:v},Object(f.e)(I.a,{isCompact:!0},Object(f.e)("div",null,Object(f.e)(_.a,{onClick:function(e){return Object(P.a)(e,u)},link:l},Object(f.e)(R,{url:l,testId:a})),Object(f.e)(S.a,null,Object(f.e)(N,{icon:Object(f.e)(T.a,{label:"errored-warning-icon",size:"small",primaryColor:b.R300,testId:"".concat(a,"-warning-icon")}),text:Object(f.e)(O.a,ee)}))),Object(f.e)(A.a,null,Object(f.e)(x.a,{items:m}))))},ne=n(2761),re=n(860),ie=n(2672),oe=function(e){var t,n,r,o=e.url,c=e.cardState,l=c.status,s=c.details,d=e.authFlow,f=e.handleAuthorize,p=e.handleErrorRetry,v=e.handleFrameClick,b=e.handlePreviewAnalytics,m=e.handleInvoke,h=e.isSelected,y=e.onResolve,k=e.testId,E=e.showActions,C=s&&s.data||Object(re.a)(),S={handleAnalytics:b,handleInvoke:m,definitionId:Object(u.c)(s)};switch(l){case"pending":case"resolving":return i.a.createElement(g,{testId:k,isSelected:h});case"resolved":var x=Object(ne.a)(C,S);return y&&y({title:x.title,url:o}),i.a.createElement(w.a,a()({},x,{isSelected:h,testId:k,showActions:E,onClick:v}));case"unauthorized":var I=Object(ne.a)(C,S);return i.a.createElement(F,a()({},I,{isSelected:h,testId:k,showActions:E,actions:f?[(r=f,{id:"connect-account",text:i.a.createElement(O.a,j.a.connect_link_account_card),promise:function(){return new Promise((function(e){return e(r())}))},buttonAppearance:"default"})]:[],onClick:v}));case"forbidden":var _=Object(ne.a)(C,S),A=null!==(t=null===s||void 0===s?void 0:s.meta)&&void 0!==t?t:Object(re.b)().meta,P=Object(ie.c)({jsonLd:A,url:o,context:null===(n=_.context)||void 0===n?void 0:n.text});return i.a.createElement(W,a()({},_,{isSelected:h,showActions:E,actions:f?[Object(H.a)(f)]:[],onClick:v,requestAccessContext:P}));case"not_found":var R=Object(ne.a)(C,S);return i.a.createElement(X,a()({},R,{isSelected:h,testId:k,onClick:v}));case"fallback":case"errored":return d&&"disabled"===d?i.a.createElement(Y.a,{link:o,isSelected:h,onClick:v,testId:"".concat(k,"-").concat(l)}):i.a.createElement(te,{link:o,isSelected:h,onRetry:p,onClick:v,testId:k})}},ae=n(8),ce=n.n(ae),le=n(9),se=n.n(le),ue=n(11),de=n.n(ue),fe=n(12),pe=n.n(fe),ve=n(5),be=n.n(ve),me=n(857),he=n(1414),ye=n(2685),Oe=n(7),je=n.n(Oe),ge=n(6),we=n(854);function ke(){var e=je()(["\n  vertical-align: text-top;\n  margin-left: 2px;\n"]);return ke=function(){return e},e}var Ee=Object(ge.c)(we.c)(ke());function Ce(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=be()(e);if(t){var i=be()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return pe()(this,n)}}var Se=function(e){de()(n,e);var t=Ce(n);function n(){return ce()(this,n),t.apply(this,arguments)}return se()(n,[{key:"render",value:function(){var e=this.props,t=e.url,n=e.onClick,r=e.isSelected,o=e.inlinePreloaderStyle,a=e.testId,c=void 0===a?"inline-card-resolving-view":a;return"on-right-without-skeleton"===o?i.a.createElement(me.a,{withoutBackground:!0,testId:c,onClick:n,isSelected:r},i.a.createElement(we.c,null,t,i.a.createElement(we.g,null,i.a.createElement(Ee,{className:"inline-resolving-spinner"},i.a.createElement(he.a,{size:14}))))):i.a.createElement(me.a,{testId:c,onClick:n,isSelected:r},i.a.createElement(ye.a,{title:t},i.a.createElement(Ee,{className:"inline-resolving-spinner"},i.a.createElement(he.a,{size:14}))))}}]),n}(i.a.Component),xe=n(3420),Ie=n(3),_e=n.n(Ie),Ae=n(2639),Pe=n(2700),Re=n(65);function De(){var e=je()(["\n  color: ",";\n"]);return De=function(){return e},e}function ze(){var e=je()(["\n  text-transform: lowercase;\n"]);return ze=function(){return e},e}function Fe(){var e=je()(["\n  color: ",";\n"]);return Fe=function(){return e},e}function Me(){var e=je()(["\n  text-align: initial !important;\n  display: inline !important;\n\n  &:hover {\n    /* Remove the text-decoration to match other inline card hover states*/\n    text-decoration: none !important;\n  }\n\n  > span {\n    display: inline;\n    > span {\n      overflow: initial;\n      text-overflow: initial;\n      white-space: initial;\n    }\n  }\n"]);return Me=function(){return e},e}var Le="#4794FF",Ve=ge.c.span(Me()),Be=ge.c.span(Fe(),Object(Re.a)({light:b.N200,dark:Le})),Ne=ge.c.span(ze()),We=ge.c.span(De(),Object(Re.a)({light:b.B400,dark:Le}));function He(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=be()(e);if(t){var i=be()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return pe()(this,n)}}var qe=i.a.createElement(Pe.a,null,i.a.createElement(B.a,{label:"error",size:"small",primaryColor:b.R400})),Te=function(e){de()(n,e);var t=He(n);function n(){var e;ce()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),E()(_e()(e),"handleConnectAccount",(function(t){var n=e.props.onAuthorise;return t.preventDefault(),t.stopPropagation(),n()})),E()(_e()(e),"renderMessage",(function(){var t=e.props,n=t.onAuthorise,r=t.url,o=i.a.createElement(We,null,r);return n?i.a.createElement(i.a.Fragment,null,o," - ",i.a.createElement(Ae.a,{spacing:"none",appearance:"subtle-link",component:Ve,onClick:e.handleConnectAccount,testId:"button-connect-account"},i.a.createElement(O.a,j.a.connect_link_account))):o})),e}return se()(n,[{key:"render",value:function(){var e=this.props,t=e.url,n=e.icon,r=e.onClick,o=e.isSelected,a=e.testId,c=void 0===a?"inline-card-unauthorized-view":a;return i.a.createElement(me.a,{testId:c,link:t,onClick:r,isSelected:o},i.a.createElement(ye.a,{icon:n||qe,title:this.renderMessage(),titleColor:b.N500}))}}]),n}(i.a.Component);function Ke(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=be()(e);if(t){var i=be()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return pe()(this,n)}}var Ue=i.a.createElement(Pe.a,null,i.a.createElement(B.a,{label:"error",size:"small",primaryColor:b.R400})),Xe=function(e){de()(n,e);var t=Ke(n);function n(){var e;ce()(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o)),E()(_e()(e),"handleRetry",(function(t){var n,r,i,o=e.props.onAuthorise;(t.preventDefault(),t.stopPropagation(),o)?o():null===(n=e.props)||void 0===n||null===(r=n.requestAccessContext)||void 0===r||null===(i=r.action)||void 0===i||i.promise()})),E()(_e()(e),"renderForbiddenAccessMessage",(function(){var t,n;if(null===(t=e.props)||void 0===t||null===(n=t.requestAccessContext)||void 0===n?void 0:n.callToActionMessageKey){var r=e.props.requestAccessContext.callToActionMessageKey;return i.a.createElement(O.a,a()({},j.a[r],{values:{context:e.props.context}}))}return i.a.createElement(i.a.Fragment,null,i.a.createElement(O.a,j.a.invalid_permissions,(function(e){return i.a.createElement(i.a.Fragment,null,e,", ")})),i.a.createElement(O.a,j.a.try_another_account,(function(e){return i.a.createElement(Ne,null,e)})))})),E()(_e()(e),"renderMessage",(function(){var t,n,r=e.props,o=r.url,a=r.onAuthorise,c=i.a.createElement(We,null,o),l=null===(t=e.props)||void 0===t||null===(n=t.requestAccessContext)||void 0===n?void 0:n.callToActionMessageKey;return a||l?i.a.createElement(i.a.Fragment,null,c," - ",i.a.createElement(Ae.a,{spacing:"none",appearance:"subtle-link",onClick:e.handleRetry,component:Ve,testId:"button-connect-other-account"},e.renderForbiddenAccessMessage())):c})),e}return se()(n,[{key:"render",value:function(){var e=this.props,t=e.url,n=e.icon,r=e.onClick,o=e.isSelected,a=e.testId,c=void 0===a?"inline-card-forbidden-view":a;return i.a.createElement(me.a,{testId:c,link:t,onClick:r,isSelected:o},i.a.createElement(ye.a,{icon:n||Ue,title:this.renderMessage(),titleColor:b.N500}))}}]),n}(i.a.Component),Ye=n(515),Ge=n.n(Ye);function Je(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=be()(e);if(t){var i=be()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return pe()(this,n)}}var Qe=function(e){de()(n,e);var t=Je(n);function n(){var e;ce()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),E()(_e()(e),"handleRetry",(function(t){var n=e.props.onRetry;n&&(t.preventDefault(),t.stopPropagation(),n())})),E()(_e()(e),"renderMessage",(function(){var t=e.props,n=t.onRetry,r=t.url,o=t.message,a=i.a.createElement(We,null,r),c=i.a.createElement(Be,null,o);return n?i.a.createElement(i.a.Fragment,null,a," - ",c,",\xa0",i.a.createElement(Ae.a,{spacing:"none",appearance:"subtle-link",component:Ve,onClick:e.handleRetry},i.a.createElement(O.a,j.a.try_again,(function(e){return i.a.createElement(Ne,null,e)})))):i.a.createElement(i.a.Fragment,null,a," - ",c)})),e}return se()(n,[{key:"render",value:function(){var e=this.props,t=e.url,n=e.onClick,r=e.isSelected,o=e.testId,a=void 0===o?"inline-card-errored-view":o,c=e.icon;return i.a.createElement(me.a,{testId:a,link:t,onClick:n,isSelected:r},i.a.createElement(ye.a,{icon:c||i.a.createElement(Pe.a,null,i.a.createElement(Ge.a,{label:"error",size:"small",primaryColor:b.R300})),title:this.renderMessage()}))}}]),n}(i.a.Component),Ze=n(2717),$e=function(e){var t,n=e.url,r=e.cardState,o=e.handleAuthorize,c=e.handleFrameClick,l=e.isSelected,s=e.onResolve,u=e.testId,d=e.inlinePreloaderStyle,f=r.status,p=r.details,v=p&&p.data||Object(re.a)(),b=u?"".concat(u,"-").concat(f,"-view"):void 0;switch(f){case"pending":case"resolving":return i.a.createElement(Se,{url:n,isSelected:l,onClick:c,testId:b,inlinePreloaderStyle:d});case"resolved":var m=Object(Ze.a)(v);return s&&s({url:n,title:m.title}),i.a.createElement(xe.a,a()({},m,{link:n,isSelected:l,onClick:c,testId:b}));case"unauthorized":var h=Object(ie.b)(v);return i.a.createElement(Te,{icon:h&&h.icon,url:n,isSelected:l,onClick:c,onAuthorise:o,testId:b});case"forbidden":var y=Object(ie.b)(v),O=null!==(t=null===p||void 0===p?void 0:p.meta)&&void 0!==t?t:Object(re.b)().meta,j=Object(ie.c)({jsonLd:O,url:n,context:null===y||void 0===y?void 0:y.text});return i.a.createElement(Xe,{url:n,icon:y&&y.icon,context:null===y||void 0===y?void 0:y.text,isSelected:l,onClick:c,onAuthorise:o,testId:b,requestAccessContext:j});case"not_found":var g=Object(ie.b)(v);return i.a.createElement(Qe,{url:n,icon:g&&g.icon,isSelected:l,message:"Can't find link",onClick:c,testId:b||"inline-card-not-found-view"});case"fallback":case"errored":return i.a.createElement(Y.a,{link:n,isSelected:l,onClick:c,testId:b||"inline-card-errored-view"})}},et=n(1234),tt=n.n(et),nt=n(2454),rt=function(e){var t=e.isPlaceholder,n=void 0!==t&&t,r=e.children,o=e.onClick,a=e.icon,c=e.text,l=e.isSelected,s=e.isFrameVisible,u=e.isVisible,d=e.href,f=e.minWidth,p=e.maxWidth,v=e.testId,b=void 0===v?"expanded-frame":v,m=e.inheritDimensions,h=function(){return!n&&(Boolean(d)||Boolean(o))},y=function(e){return Object(P.a)(e,o)},O=function(){return i.a.createElement(nt.b,{className:"embed-header"},i.a.createElement(nt.c,{isPlaceholder:n},!n&&a),i.a.createElement(nt.f,{isPlaceholder:n},!n&&i.a.createElement("a",{href:d,onClick:y},c)))},j=function(){return i.a.createElement(nt.a,{isInteractive:h()},r)};return!n&&d?i.a.createElement(nt.e,{className:nt.h,isInteractive:h(),isSelected:l,isFrameVisible:s,minWidth:f,maxWidth:p,isVisible:u,"data-testid":b,"data-trello-do-not-use-override":b,"data-is-selected":l,"data-is-frame-visible":s,inheritDimensions:m},O(),j()):i.a.createElement(nt.g,{className:nt.h,isInteractive:h(),isSelected:l,minWidth:f,maxWidth:p,isVisible:u,"data-testid":b,"data-trello-do-not-use-override":b,"data-is-selected":l,"data-is-visible":u},O(),j())},it=n(2891),ot=n.n(it),at=function(e){var t=e.alt,n=void 0===t?"":t,r=e.src,o=e.size,a=void 0===o?16:o,c=e.title,l=e.default;return r?i.a.createElement(ot.a,{src:r,loading:l,loaded:i.a.createElement(nt.d,{className:"smart-link-icon",src:r,alt:n,size:a,title:c}),errored:l}):l||null},ct=n(28),lt=n.n(ct),st=i.a.forwardRef((function(e,t){var n=e.url,i=e.testId,o=Object(r.useState)(!1),a=lt()(o,2),c=a[0],l=a[1];return n?Object(f.e)("iframe",{ref:t,src:n,"data-testid":"".concat(i,"-frame"),"data-iframe-loaded":c,css:{border:0,top:0,left:0,width:"100%",height:"100%",position:"relative",overflow:"hidden",borderRadius:"3px"},allowFullScreen:!0,scrolling:"yes",allow:"autoplay; encrypted-media",onLoad:function(){return l(!0)}}):null})),ut=i.a.forwardRef((function(e,t){var n=e.link,r=e.context,o=e.onClick,a=e.isSelected,c=e.isFrameVisible,l=e.preview,s=e.title,u=e.testId,d=void 0===u?"embed-card-resolved-view":u,p=e.inheritDimensions,v="string"===typeof(null===r||void 0===r?void 0:r.icon)?r.icon:void 0,b=s||(null===r||void 0===r?void 0:r.text),m=i.a.useMemo((function(){return Object(f.e)(tt.a,{label:"icon",size:"small"})}),[]),h=i.a.useMemo((function(){return Object(f.e)(at,{src:v,default:m})}),[v,m]);return Object(f.e)(rt,{isSelected:a,isFrameVisible:c,href:n,testId:d,icon:h,text:b,onClick:o,inheritDimensions:p},Object(f.e)(st,{url:l,testId:d,ref:t}))})),dt=function(e){var t=e.image,n=e.title,r=e.description,i=e.button,o=e.context,c=e.onClick,l=e.testId;return Object(f.e)("div",{css:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",paddingTop:Object(y.b)(4.5),paddingBottom:Object(y.b)(6)},"data-testid":"".concat(l,"-unresolved-container")},Object(f.e)("img",{src:t,css:{height:Object(y.b)(14),marginBottom:Object(y.b)(4)}}),Object(f.e)("span",{css:{fontSize:Object(y.b)(2.5),marginBottom:Object(y.b)(1.5),width:Object(y.b)(50),textAlign:"center"}},Object(f.e)(O.a,a()({},j.a[n],{values:{context:o}}))),Object(f.e)("span",{css:{fontSize:Object(m.f)(),marginBottom:Object(y.b)(2.5),textAlign:"center",width:Object(y.b)(50),lineHeight:Object(y.b)(3)}},Object(f.e)(O.a,a()({},j.a[r],{values:{context:o}}))),i&&Object(f.e)(Ae.a,{testId:"button-".concat(i.testId||l),appearance:i.appearance,onClick:c},Object(f.e)(O.a,a()({},j.a[i.text],{values:{context:o}}))))},ft="https://smart-links-cdn.us-east-1.prod.public.atl-paas.net",pt="".concat(ft,"/lock.svg"),vt="".concat(ft,"/celebration.svg"),bt="".concat(ft,"/not_found.svg"),mt=function(e){var t=e.link,n=e.context,r=e.isSelected,o=e.testId,a=void 0===o?"embed-card-unauthorized-view":o,c=e.onAuthorise,l=e.inheritDimensions,s=e.onClick,u=n&&n.icon&&i.a.createElement(at,{src:"string"===typeof n.icon?n.icon:void 0});return i.a.createElement(rt,{href:t,icon:u,text:n&&n.text,isVisible:!0,isSelected:r,inheritDimensions:l,onClick:s,testId:a},i.a.createElement(dt,{image:vt,title:"connect_link_account_card_name",description:"connect_link_account_card_description",context:n&&n.text,button:{appearance:"primary",text:"connect_link_account_card",testId:"connect-account"},onClick:c,testId:a}))},ht=function(e){var t,n=e.link,r=e.context,o=e.isSelected,a=e.testId,c=void 0===a?"embed-card-forbidden-view":a,l=e.onAuthorise,s=e.inheritDimensions,u=e.onClick,d=e.requestAccessContext,f=void 0===d?{}:d,p=r&&r.icon&&i.a.createElement(at,{src:"string"===typeof r.icon?r.icon:void 0}),v=f.descriptiveMessageKey,b=f.callToActionMessageKey,m=f.action,h=null!==(t=null===m||void 0===m?void 0:m.promise)&&void 0!==t?t:l,y=!0;!b&&v&&(y=!1);var O,j=null!==v&&void 0!==v?v:"invalid_permissions_description";return y&&(O={appearance:"default",text:null!==b&&void 0!==b?b:"try_another_account",testId:(null===m||void 0===m?void 0:m.id)||"connect-other-account"}),i.a.createElement(rt,{href:n,icon:p,text:r&&r.text,isVisible:!0,isSelected:o,inheritDimensions:s,onClick:u,testId:c},i.a.createElement(dt,{image:pt,title:"invalid_permissions",description:j,context:r&&r.text,button:O,onClick:h,testId:c}))},yt=function(e){var t=e.link,n=e.context,r=e.isSelected,o=e.inheritDimensions,a=e.testId,c=void 0===a?"embed-card-not-found-view":a,l=e.onClick,s=n&&n.icon&&i.a.createElement(at,{src:"string"===typeof n.icon?n.icon:void 0});return i.a.createElement(rt,{href:t,icon:s,text:n&&n.text,isVisible:!0,isSelected:r,inheritDimensions:o,onClick:l,testId:c},i.a.createElement(dt,{image:bt,title:"not_found_title",description:"not_found_description",context:n&&n.text,testId:c}))},Ot=function(e){var t=e.onRetry,n=e.isSelected,r=void 0!==n&&n,i=e.testId,o=void 0===i?"embed-card-errored-view":i,a=e.inheritDimensions;return Object(f.e)(h.a,{inheritDimensions:a,compact:!0,isSelected:r,testId:o},Object(f.e)(Ge.a,{size:"small",primaryColor:b.R300,label:"error-icon"}),Object(f.e)("span",{css:{fontSize:"".concat(Object(m.f)(),"px"),marginLeft:Object(y.b)(.5),marginRight:Object(y.b)(.5),display:"-webkit-box",overflow:"hidden",textOverflow:"ellipsis",WebkitLineClamp:1,WebkitBoxOrient:"vertical",maxHeight:Object(y.b)(3)}},Object(f.e)(O.a,j.a.could_not_load_link)),Object(f.e)(Ae.a,{testId:"err-view-retry",appearance:"link",spacing:"none",onClick:t},Object(f.e)(O.a,j.a.try_again)))},jt=n(2764),gt=n(903),wt=function(e,t){var n=Object(gt.a)(e,t);if(n&&n.src)return n.src},kt=function(e,t){return{link:Object(jt.a)(e)||"",title:Object(jt.c)(e),context:Object(ie.b)(e),preview:wt(e,t)}},Et=i.a.forwardRef((function(e,t){var n,r,o=e.url,c=e.cardState,l=c.status,s=c.details,d=e.handleAuthorize,f=e.handleErrorRetry,p=e.handleFrameClick,v=e.handleAnalytics,b=e.handleInvoke,m=e.showActions,h=e.isSelected,y=e.isFrameVisible,O=e.platform,j=e.onResolve,k=e.testId,E=e.inheritDimensions,C=s&&s.data||Object(re.a)();switch(l){case"pending":case"resolving":return i.a.createElement(g,{testId:"embed-card-resolving-view",inheritDimensions:E,isSelected:h});case"resolved":var S=kt(C,O);if(j&&j({title:S.title,url:o}),S.preview)return i.a.createElement(ut,a()({},S,{isSelected:h,isFrameVisible:y,inheritDimensions:E,onClick:p,ref:t}));if("mobile"===O){var x=Object(Ze.a)(C);return i.a.createElement(xe.a,a()({},x,{isSelected:h,testId:k,onClick:p}))}var I=Object(ne.a)(C,{handleAnalytics:v,handleInvoke:b,definitionId:Object(u.c)(s)});return i.a.createElement(w.a,a()({},I,{isSelected:h,testId:k,showActions:m,onClick:p}));case"unauthorized":var _=kt(C,O);return i.a.createElement(mt,a()({},_,{isSelected:h,onAuthorise:d,inheritDimensions:E,onClick:p}));case"forbidden":var A=kt(C,O),P=null!==(n=null===s||void 0===s?void 0:s.meta)&&void 0!==n?n:Object(re.b)().meta,R=Object(ie.c)({jsonLd:P,url:o,context:null===(r=A.context)||void 0===r?void 0:r.text});return i.a.createElement(ht,a()({},A,{isSelected:h,onAuthorise:d,inheritDimensions:E,onClick:p,requestAccessContext:R}));case"not_found":var D=kt(C,O);return i.a.createElement(yt,a()({},D,{isSelected:h,inheritDimensions:E,onClick:p}));case"fallback":case"errored":return i.a.createElement(Ot,{onRetry:f,inheritDimensions:E,isSelected:h})}}));function Ct(e){var t=e.id,n=e.url,o=e.isSelected,a=e.isFrameVisible,c=e.platform,f=e.onClick,p=e.appearance,v=e.dispatchAnalytics,b=e.onResolve,m=e.testId,h=e.showActions,y=e.inheritDimensions,O=e.embedIframeRef,j=e.inlinePreloaderStyle,g=Object(d.b)(t,n,v),w=g.state,k=g.actions,E=g.config,C=g.analytics,S=Object(u.c)(w.details),x=Object(u.d)(w.details),I=Object(u.e)(w.details),_=Object(u.f)(w.details),A=Object(r.useCallback)((function(e){var t=Object(u.b)(n,w.details);Object(l.c)(e)?window.open(t,"_blank"):window.open(t,"_self")}),[w.details,n]),P=Object(r.useCallback)((function(e){"resolved"===w.status&&C.ui.cardClickedEvent(p,S,x),f?f(e):A(e)}),[w.status,C.ui,p,S,x,f,A]),R=Object(r.useCallback)((function(){return k.authorize(p)}),[k,p]),D=Object(r.useCallback)((function(){k.reload()}),[k]),z=Object(r.useCallback)((function(e){return k.invoke(e,p)}),[k,p]);switch(Object(r.useEffect)((function(){s.e(t,w.status),"pending"!==w.status&&(s.c(t,w.status),C.operational.instrument(t,w.status,S,x,I,w.error))}),[t,p,w.status,w.error,S,x,I,C.operational]),Object(r.useEffect)((function(){Object(u.i)(w.status)&&C.ui.renderSuccessEvent(p,S,x)}),[p,w.details,w.status,n,S,x,C.ui]),p){case"inline":return i.a.createElement($e,{url:n,cardState:w,handleAuthorize:_.length&&R||void 0,handleFrameClick:P,isSelected:o,onResolve:b,testId:m,inlinePreloaderStyle:j});case"block":return i.a.createElement(oe,{url:n,authFlow:E&&E.authFlow,cardState:w,handleAuthorize:_.length&&R||void 0,handleErrorRetry:D,handleInvoke:z,handleFrameClick:P,handlePreviewAnalytics:v,isSelected:o,onResolve:b,testId:m,showActions:h});case"embed":return i.a.createElement(Et,{url:n,cardState:w,handleAuthorize:_.length&&R||void 0,handleErrorRetry:D,handleFrameClick:P,handleInvoke:z,handleAnalytics:v,isSelected:o,isFrameVisible:a,platform:c,onResolve:b,testId:m,inheritDimensions:y,showActions:h,ref:O})}}var St=function(e){var t=e.isSelected,n=e.url;return i.a.createElement(Y.a,{key:"lazy-render-key",testId:"lazy-render-placeholder","data-trello-do-not-use-override":"lazy-render-placeholder-trello",isSelected:t,link:n})};function xt(e){var t=e.appearance,n=e.container,r=e.showActions,o=Math.ceil(window.innerHeight/4);return i.a.createElement(c.a,{offset:o,component:"inline"===t?"span":"div",className:"loader-wrapper",placeholder:i.a.createElement(St,e),scrollContainer:n,content:i.a.createElement(Ct,a()({},e,{showActions:r}))})}var It="360px";function _t(e){var t=Object(r.useState)(!1),n=lt()(t,2),o=n[0],c=n[1],l=e.showActions,s=e.appearance,u=e.url,f=Object(d.a)(u),p="inline"===s?"span":"div",v=p,b=Object(r.useCallback)((function(e,t){e.some((function(e){return e.isIntersecting}))?(c(!0),t.disconnect()):f()}),[f]),m=Object(r.useCallback)((function(e){if(e){var t=new IntersectionObserver(b,{rootMargin:"".concat(It," 0px ").concat(It," 0px")});return t.observe(e),function(){return t.disconnect()}}}),[b]),h=o?i.a.createElement(Ct,a()({},e,{showActions:l})):i.a.createElement(v,{ref:m},i.a.createElement(St,e));return i.a.createElement(p,{className:"loader-wrapper"},h)}function At(e){return"undefined"!==typeof IntersectionObserver?i.a.createElement(_t,e):i.a.createElement(xt,e)}}}]);