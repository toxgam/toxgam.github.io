(this["webpackJsonphappy-author"]=this["webpackJsonphappy-author"]||[]).push([[27],{2428:function(t,e,n){"use strict";n.r(e),n.d(e,"getFilesFromClipboard",(function(){return A})),n.d(e,"ClipboardBase",(function(){return T})),n.d(e,"Clipboard",(function(){return w}));var a=n(4),i=n.n(a),c=n(12),r=n.n(c),o=n(13),u=n.n(o),s=n(6),l=n.n(s),f=n(9),p=n.n(f),d=n(10),v=n.n(d),h=n(1),y=n.n(h),b=n(2011),g=n(1254),m=n(3007),E=n(2235),C=n(2299),k=n(2223),F=function(t){return t<10?"0".concat(t):"".concat(t)};function S(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=l()(t);if(e){var i=l()(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return u()(this,n)}}var A=function(t){return Array.from(t).map((function(t){if(0===t.type.indexOf("image/")){var e=function(t,e){var n=t.lastIndexOf("."),a=n>0,i=a?t.substring(0,n):t,c=a?t.substring(n):"",r=new Date(e),o="".concat(r.getUTCFullYear()).concat(F(r.getUTCMonth()+1)).concat(F(r.getUTCDate())),u="".concat(F(r.getUTCHours())).concat(F(r.getUTCMinutes())).concat(F(r.getUTCSeconds()));return"".concat(i,"-").concat(o,"-").concat(u).concat(c)}(t.name,t.lastModified);return new File([t],e,{type:t.type})}return t}))},U="clipboard",P=function(){function t(e,n){p()(this,t),this.uploadService=e,this.createAnalyticsEvent=n}return v()(t,[{key:"activate",value:function(){this.deactivate(),document.addEventListener("paste",t.handleEvent),t.instances.push(this)}},{key:"deactivate",value:function(){var e=t.instances.indexOf(this);e>-1?t.instances.splice(e,1):document.removeEventListener("paste",t.handleEvent)}},{key:"onFilesPasted",value:function(t){this.uploadService.addFilesWithSource(t),this.fireAnalyticsEvent(t)}},{key:"fireAnalyticsEvent",value:function(t){if(this.createAnalyticsEvent){var e={eventType:"ui",action:"pasted",actionSubject:"clipboard",attributes:{fileCount:t.length,fileAttributes:t.map((function(t){var e=t.file,n=e.type,a=e.size;return{fileSource:t.source,fileMimetype:n,fileSize:a}}))}};this.createAnalyticsEvent(e).fire(g.a)}}}],[{key:"latestInstance",get:function(){return t.instances[t.instances.length-1]}}]),t}();y()(P,"instances",[]),y()(P,"handleEvent",(function(t){var e=P.latestInstance;if(e){var n=t.clipboardData;if(n&&n.files){var a=1===n.types.length?C.a.PastedScreenshot:C.a.PastedFile,i=A(n.files).map((function(t){return{file:t,source:a}}));i.length>0&&e.onFilesPasted.call(e,i)}}}));var T=function(t){r()(n,t);var e=S(n);function n(t){var a;return p()(this,n),a=e.call(this,t,U),y()(i()(a),"clipboard",new P(a.uploadService,a.props.createAnalyticsEvent)),a}return v()(n,[{key:"componentDidMount",value:function(){this.clipboard.activate()}},{key:"componentWillUnmount",value:function(){this.clipboard.deactivate()}},{key:"render",value:function(){return null}}]),n}(E.a);y()(T,"defaultProps",{config:{uploadParams:{}}});var w=Object(m.a)(Object(k.a)(U),{filterFeatureFlags:["folderUploads","newCardExperience"]})(Object(b.a)()(T))}}]);