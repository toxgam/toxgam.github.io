(this["webpackJsonphappy-author"]=this["webpackJsonphappy-author"]||[]).push([[24],{3479:function(t,e,n){"use strict";n.r(e);var a=n(8),i=n.n(a),o=n(9),r=n.n(o),c=n(3),u=n.n(c),l=n(11),s=n.n(l),p=n(12),d=n.n(p),f=n(5),h=n.n(f),v=n(1),m=n.n(v),y=n(7),b=n.n(y),D=n(0),E=n.n(D),T=n(60),S=n.n(T),A=n(2436),R=n(2620),g=n(84),O=n(3467),k=n(16),w=n(2),x=n(308),j=n(6),I=n(69),C=n(26),N=n(821),P=n(658),K=n(2634),M=n(3457);function F(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=h()(t);if(e){var i=h()(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return d()(this,n)}}function W(){var t=b()(["\n  padding: 22px;\n  padding-bottom: 12px;\n"]);return W=function(){return t},t}var _=j.c.div(W()),V=Object(C.d)({invalidDateError:{id:"fabric.editor.invalidDateError",defaultMessage:"Enter a valid date",description:"Error message when the date typed in is invalid, requesting they inputs a new date"}}),Y=function(t){s()(n,t);var e=F(n);function n(t){var a;i()(this,n),a=e.call(this,t),m()(u()(a),"focusInput",(function(){a.inputRef&&(a.autofocusTimeout=setTimeout((function(){a.inputRef.focus()})))})),m()(u()(a),"selectInput",(function(){a.inputRef&&(a.autoSelectAllTimeout=setTimeout((function(){a.inputRef.select()})))})),m()(u()(a),"handleInputRef",(function(t){var e=a.props,n=e.autoFocus,i=e.autoSelectAll;t&&(a.inputRef=t),t&&n&&a.focusInput(),i&&a.selectInput()})),m()(u()(a),"handleChange",(function(t){var e=t.target.value,n=a.props,i=n.locale,o=n.dispatchAnalyticsEvent,r=Object(P.d)(e,i);void 0!==r&&null!==r?(a.setState({inputText:e}),a.props.onNewDate(r),o&&o({eventType:I.e.TRACK,action:I.a.TYPING_FINISHED,actionSubject:I.b.DATE})):a.setState({inputText:e})})),m()(u()(a),"handleKeyPress",(function(t){var e=a.props,n=e.locale,i=e.dispatchAnalyticsEvent,o=t.target.value;if(i&&"Enter"!==t.key&&"Backspace"!==t.key&&i({eventType:I.e.TRACK,action:I.a.TYPING_STARTED,actionSubject:I.b.DATE}),"Enter"===t.key)if(""!==o){var r=Object(P.d)(o,n);a.props.onSubmitDate(r)}else a.props.onEmptySubmit()})),m()(u()(a),"handleKeyDown",(function(t){var e,n=t.target.value,i=a.props.locale;if("ArrowUp"===t.key?e=1:"ArrowDown"===t.key&&(e=-1),void 0!==e){var o=a.props.dispatchAnalyticsEvent,r=a.inputRef.selectionStart,c=Object(N.b)(r,n,i);if(void 0!==c){var u;switch(c){case"day":u=I.c.DATE_DAY;break;case"month":u=I.c.DATE_MONTH;break;default:u=I.c.DATE_YEAR}o&&o({eventType:I.e.TRACK,action:e>0?I.a.INCREMENTED:I.a.DECREMENTED,actionSubject:I.b.DATE_SEGMENT,attributes:{dateSegment:u}});var l=Object(P.d)(n,i);if(void 0!==l&&null!==l){var s=Object(N.a)(l,c,e);a.setState({inputText:Object(P.c)(s,i)}),a.props.onNewDate(s),a.setInputSelectionPos=Math.min(r,n.length),t.preventDefault()}}}}));var o=t.date;a.setInputSelectionPos=void 0;var r=Object(P.c)(o,a.props.locale);return a.state={inputText:r},a}return r()(n,[{key:"render",value:function(){var t=this.props,e=t.locale,n=t.intl.formatMessage,a=this.state.inputText,i=Object(N.c)(a),o=(null===Object(P.d)(a,e)||!i)&&""!==a;return E.a.createElement(_,null,E.a.createElement(K.a,{name:"datetextfield",value:a,ref:this.handleInputRef,onChange:this.handleChange,onKeyPress:this.handleKeyPress,onKeyDown:this.handleKeyDown,spellCheck:!1,autoComplete:"off",isInvalid:o}),o&&E.a.createElement(M.a,null,n(V.invalidDateError)))}},{key:"componentDidUpdate",value:function(){var t=this.setInputSelectionPos;void 0!==t&&(this.inputRef.setSelectionRange(t,t),this.setInputSelectionPos=void 0),this.inputRef&&this.props.autoFocus&&this.focusInput()}},{key:"componentWillUnmount",value:function(){void 0!==this.autofocusTimeout&&clearTimeout(this.autofocusTimeout),void 0!==this.autoSelectAllTimeout&&clearTimeout(this.autoSelectAllTimeout)}}]),n}(E.a.Component),G=Object(C.e)(Y);function H(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=h()(t);if(e){var i=h()(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return d()(this,n)}}function U(){var t=b()(["\n  padding: 2px;\n  border-radius: ","px;\n  box-shadow: 0 4px 8px -2px ",", 0 0 1px ",";\n  background-color: ",";\n"]);return U=function(){return t},t}var B=Object(x.a)(A.a),J=j.c.div(U(),Object(k.c)(),w.N60A,w.N60A,w.N0),q=function(t){s()(n,t);var e=H(n);function n(t){var a;i()(this,n),a=e.call(this,t),m()(u()(a),"handleNewDate",(function(t){a.props.onTextChanged(t),a.setState({latestValidDate:t})})),m()(u()(a),"handleKeyboardSubmitDate",(function(t){a.props.onSelect(t,I.f.KEYBOARD)})),m()(u()(a),"handleEmptySubmitDate",(function(){a.props.onDelete()})),m()(u()(a),"handleOnChange",(function(t){var e={day:t.day,month:t.month,year:t.year};a.setState({latestValidDate:e})})),m()(u()(a),"closeDatePickerWithAnalytics",(function(){a.props.closeDatePickerWithAnalytics({date:a.state.latestValidDate})})),m()(u()(a),"handleRef",(function(t){var e=t&&S.a.findDOMNode(t);e&&e.focus()}));var o=t.element.getAttribute("timestamp");if(o){var r=Object(R.e)(o),c={day:r.day,month:r.month,year:r.year};a.state={selected:[Object(R.b)(o)],date:c,latestValidDate:c}}return a}return r()(n,[{key:"render",value:function(){var t=this.props,e=t.element,n=t.onSelect,a=t.mountTo,i=t.boundariesElement,o=t.scrollableElement,r=t.showTextField,c=t.intl,u=t.dispatchAnalyticsEvent,l=t.isNew,s=t.autoFocus,p=e.getAttribute("timestamp");if(null===this.state)return null;var d=this.state,f=d.date,h=d.selected,v=d.latestValidDate,m=v.day,y=v.month,b=v.year;return p?E.a.createElement(B,{target:e,offset:[0,8],fitHeight:327,fitWidth:340,handleClickOutside:this.closeDatePickerWithAnalytics,handleEscapeKeydown:this.closeDatePickerWithAnalytics,zIndex:g.m,mountTo:a,boundariesElement:i,scrollableElement:o},E.a.createElement(J,null,!0===r&&E.a.createElement(G,{date:f,onNewDate:this.handleNewDate,onSubmitDate:this.handleKeyboardSubmitDate,onEmptySubmit:this.handleEmptySubmitDate,locale:c.locale,dispatchAnalyticsEvent:u,autoFocus:s,autoSelectAll:l}),E.a.createElement(O.a,{onChange:this.handleOnChange,onSelect:function(t){return n(t,I.f.PICKER)},day:m,month:y,year:b,selected:h,ref:this.handleRef}))):null}}]),n}(E.a.Component);e.default=Object(C.e)(q)}}]);