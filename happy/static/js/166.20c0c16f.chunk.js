(this["webpackJsonphappy-author"]=this["webpackJsonphappy-author"]||[]).push([[166],{2134:function(e,t,n){"use strict";n.r(t);var r=n(1),i=n.n(r),o=n(24),a=n.n(o),c=n(23),u=n.n(c),s=n(13),l=n(0),d=n.n(l),f=n(76),h=n(805),m=n(9),p=n.n(m),v=n(10),g=n.n(v),j=function(){function e(){}return e.prototype.expandToken=function(e){for(var t=[],n="",r=0,i=e.length;r<i;++r)n+=e.charAt(r),t.push(n);return t},e}(),b=function(){function e(){}return e.prototype.sanitize=function(e){return e?e.toLocaleLowerCase().trim():""},e}();function y(e,t){t=t||[];for(var n=e=e||{},r=0;r<t.length;r++)if(null==(n=n[t[r]]))return null;return n}var O=function(){function e(e){this._uidFieldName=e,this._tokenToIdfCache={},this._tokenMap={}}var t=e.prototype;return t.indexDocument=function(e,t,n){this._tokenToIdfCache={};var r,i=this._tokenMap;"object"!==typeof i[e]?i[e]=r={$numDocumentOccurrences:0,$totalNumOccurrences:1,$uidMap:{}}:(r=i[e]).$totalNumOccurrences++;var o=r.$uidMap;"object"!==typeof o[t]?(r.$numDocumentOccurrences++,o[t]={$document:n,$numTokenOccurrences:1}):o[t].$numTokenOccurrences++},t.search=function(e,t){for(var n={},r=0,i=e.length;r<i;r++){var o=e[r],a=this._tokenMap[o];if(!a)return[];if(0===r)for(var c=0,u=(s=Object.keys(a.$uidMap)).length;c<u;c++){n[l=s[c]]=a.$uidMap[l].$document}else{var s;for(c=0,u=(s=Object.keys(n)).length;c<u;c++){var l=s[c];"object"!==typeof a.$uidMap[l]&&delete n[l]}}}var d=[];for(var l in n)d.push(n[l]);var f=this._createCalculateTfIdf();return d.sort((function(n,r){return f(e,r,t)-f(e,n,t)}))},t._createCalculateIdf=function(){var e=this._tokenMap,t=this._tokenToIdfCache;return function(n,r){if(!t[n]){var i="undefined"!==typeof e[n]?e[n].$numDocumentOccurrences:0;t[n]=1+Math.log(r.length/(1+i))}return t[n]}},t._createCalculateTfIdf=function(){var e=this._tokenMap,t=this._uidFieldName,n=this._createCalculateIdf();return function(r,i,o){for(var a=0,c=0,u=r.length;c<u;++c){var s,l=r[c],d=n(l,o);d===1/0&&(d=0),s=t instanceof Array?i&&y(i,t):i&&i[t],a+=("undefined"!==typeof e[l]&&"undefined"!==typeof e[l].$uidMap[s]?e[l].$uidMap[s].$numTokenOccurrences:0)*d}return a}},e}(),k=function(){function e(){this._tokenToUidToDocumentMap={}}var t=e.prototype;return t.indexDocument=function(e,t,n){"object"!==typeof this._tokenToUidToDocumentMap[e]&&(this._tokenToUidToDocumentMap[e]={}),this._tokenToUidToDocumentMap[e][t]=n},t.search=function(e,t){for(var n={},r=this._tokenToUidToDocumentMap,i=0,o=e.length;i<o;i++){var a=r[e[i]];if(!a)return[];if(0===i)for(var c=0,u=(s=Object.keys(a)).length;c<u;c++){n[d=s[c]]=a[d]}else for(c=0,u=(s=Object.keys(n)).length;c<u;c++){"object"!==typeof a[d=s[c]]&&delete n[d]}}var s,l=[];for(i=0,u=(s=Object.keys(n)).length;i<u;i++){var d=s[i];l.push(n[d])}return l},e}(),C=/[^a-z\u0430-\u044f\u04510-9\-']+/i,w=function(){function e(){}return e.prototype.tokenize=function(e){return e.split(C).filter((function(e){return e}))},e}();function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var S=function(){function e(e){if(!e)throw Error("js-search requires a uid field name constructor parameter");this._uidFieldName=e,this._indexStrategy=new j,this._searchIndex=new O(e),this._sanitizer=new b,this._tokenizer=new w,this._documents=[],this._searchableFields=[]}var t,n,r,i=e.prototype;return i.addDocument=function(e){this.addDocuments([e])},i.addDocuments=function(e){this._documents=this._documents.concat(e),this.indexDocuments_(e,this._searchableFields)},i.addIndex=function(e){this._searchableFields.push(e),this.indexDocuments_(this._documents,[e])},i.search=function(e){var t=this._tokenizer.tokenize(this._sanitizer.sanitize(e));return this._searchIndex.search(t,this._documents)},i.indexDocuments_=function(e,t){this._initialized=!0;for(var n=this._indexStrategy,r=this._sanitizer,i=this._searchIndex,o=this._tokenizer,a=this._uidFieldName,c=0,u=e.length;c<u;c++){var s,l=e[c];s=a instanceof Array?y(l,a):l[a];for(var d=0,f=t.length;d<f;d++){var h,m=t[d];if(null!=(h=m instanceof Array?y(l,m):l[m])&&"string"!==typeof h&&h.toString&&(h=h.toString()),"string"===typeof h)for(var p=o.tokenize(r.sanitize(h)),v=0,g=p.length;v<g;v++)for(var j=p[v],b=n.expandToken(j),O=0,k=b.length;O<k;O++){var C=b[O];i.indexDocument(C,s,l)}}}},t=e,(n=[{key:"indexStrategy",set:function(e){if(this._initialized)throw Error("IIndexStrategy cannot be set after initialization");this._indexStrategy=e},get:function(){return this._indexStrategy}},{key:"sanitizer",set:function(e){if(this._initialized)throw Error("ISanitizer cannot be set after initialization");this._sanitizer=e},get:function(){return this._sanitizer}},{key:"searchIndex",set:function(e){if(this._initialized)throw Error("ISearchIndex cannot be set after initialization");this._searchIndex=e},get:function(){return this._searchIndex}},{key:"tokenizer",set:function(e){if(this._initialized)throw Error("ITokenizer cannot be set after initialization");this._tokenizer=e},get:function(){return this._tokenizer}}])&&E(t.prototype,n),r&&E(t,r),e}(),M=n(133),I=n(165),T=n(103),R=new RegExp("[\u2e80-\u2e99\u2e9b-\u2ef3\u2f00-\u2fd5\u3005\u3007\u3021-\u3029\u3038-\u303b\u3400-\u4db5\u4e00-\u9fef\uf900-\ufa6d\ufa70-\ufad9]|[A-Za-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u08a0-\u08b4\u08b6-\u08bd\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u09fc\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16f1-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u1884\u1887-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2183\u2184\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005\u3006\u3031-\u3035\u303b\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fef\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6e5\ua717-\ua71f\ua722-\ua788\ua78b-\ua7b9\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab65\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc|0-9\xb2\xb3\xb9\xbc-\xbe\u0660-\u0669\u06f0-\u06f9\u07c0-\u07c9\u0966-\u096f\u09e6-\u09ef\u09f4-\u09f9\u0a66-\u0a6f\u0ae6-\u0aef\u0b66-\u0b6f\u0b72-\u0b77\u0be6-\u0bf2\u0c66-\u0c6f\u0c78-\u0c7e\u0ce6-\u0cef\u0d58-\u0d5e\u0d66-\u0d78\u0de6-\u0def\u0e50-\u0e59\u0ed0-\u0ed9\u0f20-\u0f33\u1040-\u1049\u1090-\u1099\u1369-\u137c\u16ee-\u16f0\u17e0-\u17e9\u17f0-\u17f9\u1810-\u1819\u1946-\u194f\u19d0-\u19da\u1a80-\u1a89\u1a90-\u1a99\u1b50-\u1b59\u1bb0-\u1bb9\u1c40-\u1c49\u1c50-\u1c59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249b\u24ea-\u24ff\u2776-\u2793\u2cfd\u3007\u3021-\u3029\u3038-\u303a\u3192-\u3195\u3220-\u3229\u3248-\u324f\u3251-\u325f\u3280-\u3289\u32b1-\u32bf\ua620-\ua629\ua6e6-\ua6ef\ua830-\ua835\ua8d0-\ua8d9\ua900-\ua909\ua9d0-\ua9d9\ua9f0-\ua9f9\uaa50-\uaa59\uabf0-\uabf9\uff10-\uff19]+[\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u07fd\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08d3-\u08e1\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962\u0963\u0981\u09bc\u09c1-\u09c4\u09cd\u09e2\u09e3\u09fe\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0afa-\u0aff\u0b01\u0b3c\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b62\u0b63\u0b82\u0bc0\u0bcd\u0c00\u0c04\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c81\u0cbc\u0cbf\u0cc6\u0ccc\u0ccd\u0ce2\u0ce3\u0d00\u0d01\u0d3b\u0d3c\u0d41-\u0d44\u0d4d\u0d62\u0d63\u0dca\u0dd2-\u0dd4\u0dd6\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u1885\u1886\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1bab-\u1bad\u1be6\u1be8\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8\u1cf9\u1dc0-\u1df9\u1dfb-\u1dff\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u3099\u309a\ua66f\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8c5\ua8e0-\ua8f1\ua8ff\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaec\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f|']*[A-Za-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u08a0-\u08b4\u08b6-\u08bd\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u09fc\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16f1-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u1884\u1887-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2183\u2184\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005\u3006\u3031-\u3035\u303b\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fef\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6e5\ua717-\ua71f\ua722-\ua788\ua78b-\ua7b9\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab65\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]*","gi"),P=n(1299),_=n.n(P);var A=function(){function e(){p()(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this.chain=n}return g()(e,[{key:"compare",value:function(e,t){for(var n=0;n<this.chain.length;n++){var r=this.chain[n].compare(e,t);if(0!==r)return r}return 0}}]),e}(),D=function(){function e(t){p()(this,e),this.query=t}return g()(e,[{key:"compare",value:function(e,t){var n=e.ascii&&-1!==e.ascii.indexOf(this.query),r=t.ascii&&-1!==t.ascii.indexOf(this.query);return n&&!r?-1:!n&&r?1:0}}]),e}(),U=function(){function e(t){p()(this,e),this.colonQuery=":".concat(t,":"),this.typeComparator=new N(!0)}return g()(e,[{key:"compare",value:function(e,t){return e.shortName===this.colonQuery&&t.shortName===this.colonQuery?this.typeComparator.compare(e,t):e.shortName===this.colonQuery?-1:t.shortName===this.colonQuery?1:0}}]),e}(),N=function(){function e(t){p()(this,e),this.typeToNumber=t?new Map([["SITE",0],["ATLASSIAN",1],["STANDARD",2]]):new Map([["STANDARD",0],["ATLASSIAN",1],["SITE",2]])}return g()(e,[{key:"compare",value:function(e,t){return this.emojiTypeToOrdinal(e)-this.emojiTypeToOrdinal(t)}},{key:"emojiTypeToOrdinal",value:function(e){var t=this.typeToNumber.get(e.type);return void 0===t&&(t=10),t}}]),e}(),x=function(){function e(t){var n=this;p()(this,e),this.positionLookup=new Map,t.map((function(e,t){return n.positionLookup.set(e,t+1)}))}return g()(e,[{key:"compare",value:function(e,t){return e.id&&t.id?this.getPositionInOrder(e)-this.getPositionInOrder(t):0}},{key:"getPositionInOrder",value:function(e){var t=e.id?e.id:"0";Object(I.h)(e)&&(t=e.baseId);var n=this.positionLookup.get(t);return n||M.a}}]),e}(),L=function(){function e(t,n){if(p()(this,e),this.query=t,!n)throw new Error("propertyToCompare is required");this.propertyName=n}return g()(e,[{key:"getScore",value:function(e){var t=e[this.propertyName],n=t?t.indexOf(this.query):M.a;return-1===n?M.a:n}},{key:"compare",value:function(e,t){return this.getScore(e)-this.getScore(t)}}]),e}(),z=function(){function e(){p()(this,e)}return g()(e,[{key:"compare",value:function(e,t){return(e.order?e.order:M.a)-(t.order?t.order:M.a)}}],[{key:"Instance",get:function(){return this.INSTANCE||(this.INSTANCE=new this)}}]),e}(),q=function(){function e(){p()(this,e)}return g()(e,[{key:"compare",value:function(e,t){return e.shortName.localeCompare(t.shortName)}}],[{key:"Instance",get:function(){return this.INSTANCE||(this.INSTANCE=new this)}}]),e}(),B=function(){function e(t){if(p()(this,e),t.maxDuplicates<1)throw new RangeError("The maxDuplicates option must be at least 1");if(t.minUniqueItems<1)throw new RangeError("The minUniqueItems option must be at least 1");this.maximumSize=t.maxDuplicates*t.minUniqueItems,this.perItemSize=t.maxDuplicates,this.createEmptyState()}return g()(e,[{key:"enqueue",value:function(e){this.enqueueWithoutOrdering(e),this.itemsOrderedByFrequency=this.orderItemsByFrequency()}},{key:"getItemsOrderedByDuplicateCount",value:function(){return this.itemsOrderedByFrequency}},{key:"clear",value:function(){this.createEmptyState()}},{key:"bulkEnqueue",value:function(e){var t=this;e.map((function(e){return t.enqueueWithoutOrdering(e)})),this.itemsOrderedByFrequency=this.orderItemsByFrequency()}},{key:"getItems",value:function(){return this.items}},{key:"createEmptyState",value:function(){this.items=new Array,this.itemCountMap=new Map,this.itemsOrderedByFrequency=new Array}},{key:"enqueueWithoutOrdering",value:function(e){var t=this.itemCountMap.get(e);t&&t>=this.perItemSize?this.removeFirstOccurrence(e):this.items.length>=this.maximumSize&&this.remove(),this.add(e)}},{key:"orderItemsByFrequency",value:function(){return Array.from(this.itemCountMap.entries()).sort((function(e,t){return t[1]-e[1]})).map((function(e){return e[0]}))}},{key:"decrementCount",value:function(e){var t=this.itemCountMap.get(e);t&&(--t>0?this.itemCountMap.set(e,t):this.itemCountMap.delete(e))}},{key:"removeFirstOccurrence",value:function(e){var t=this.items.indexOf(e);-1!==t&&(this.items.splice(t,1),this.decrementCount(e))}},{key:"remove",value:function(){var e=this.items.shift();return void 0!==e&&this.decrementCount(e),e}},{key:"add",value:function(e){this.items.push(e);var t=this.itemCountMap.get(e);t?this.itemCountMap.set(e,t+1):this.itemCountMap.set(e,1)}}]),e}(),F=n(141),H=n.n(F),V=n(15),Q=n.n(V),G=n(18),W=n.n(G),$=n(7),J=n.n($),K=n(539);function Y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=J()(e);if(t){var i=J()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return W()(this,n)}}var X=function(e){Q()(n,e);var t=Y(n);function n(e){var r;return p()(this,n),(r=t.call(this,e)).storage=e.storage,r.prefixedStorageKey="".concat(e.storagePrefix,".").concat(n.storageKey),r.load(),r}return g()(n,[{key:"enqueue",value:function(e){H()(J()(n.prototype),"enqueue",this).call(this,e),this.save()}},{key:"clear",value:function(){H()(J()(n.prototype),"clear",this).call(this),this.storage.removeItem(this.prefixedStorageKey)}},{key:"load",value:function(){var e=this.storage.getItem(this.prefixedStorageKey);if(e)try{var t=JSON.parse(e);this.bulkEnqueue(t)}catch(n){Object(K.a)("Error parsing the queue stored as ".concat(this.prefixedStorageKey," key from storage"),n)}}},{key:"save",value:function(){var e=JSON.stringify(this.getItems());try{this.storage.setItem(this.prefixedStorageKey,e)}catch(t){Object(K.a)("Error saving the queued items as ".concat(this.prefixedStorageKey),t)}}}]),n}(B);function Z(e){if("undefined"===typeof window)return!1;var t;try{t=window[e];var n="__storage_test__";return t.setItem(n,n),t.removeItem(n),!0}catch(r){return r instanceof DOMException&&(22===r.code||1014===r.code||"QuotaExceededError"===r.name||"NS_ERROR_DOM_QUOTA_REACHED"===r.name)&&t&&0!==t.length}}function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}i()(X,"storageKey","lastUsed");var ne=function(){function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];p()(this,e);var n=e.queueOptions;if(t&&n.storage){var r=te(te({},n),{},{storage:n.storage});this.queue=new X(r)}else this.queue=new B(n);this.gateway=new re(10)}return g()(e,[{key:"recordUsage",value:function(e){var t=this,n=e.id;n&&(Object(I.h)(e)&&(n=e.baseId),this.gateway.submit((function(){n&&t.queue.enqueue(n)})))}},{key:"getOrder",value:function(){return this.queue.getItemsOrderedByDuplicateCount()}},{key:"clear",value:function(){this.queue.clear()}}]),e}();i()(ne,"queueOptions",{storage:Z("localStorage")?window.localStorage:void 0,storagePrefix:M.n,maxDuplicates:25,minUniqueItems:5});var re=function(){function e(t){if(p()(this,e),t<1)throw new RangeError("The maximumPermitted parameter must be 1 or more.");this.maximumPermitted=t,this.count=0}return g()(e,[{key:"submit",value:function(e){var t=this;if(this.count>=this.maximumPermitted)return!1;this.count++;return"undefined"!==typeof window&&window.setTimeout((function(){try{e()}finally{t.completed()}})),!0}},{key:"completed",value:function(){this.count--}}]),e}(),ie=function(){function e(){p()(this,e)}return g()(e,[{key:"tokenize",value:function(e){return this.tokenizeAsTokens(e).map((function(e){return e.token}))}},{key:"tokenizeAsTokens",value:function(e){var t,n=[];for(R.lastIndex=0;null!==(t=R.exec(e));)t[0]&&n.push({token:t[0],start:t.index});return n}}]),e}(),oe=function e(t,n,r){var i=n(t);r.has(i)||r.set(i,[]);var o=r.get(i);if(o&&o.push(t),Object(I.g)(t)){var a=t.skinVariations;a&&a.forEach((function(t){return e(t,n,r)}))}},ae=function(e,t){var n=e.get(t);if(n&&n.length)return n[n.length-1]},ce=function(e,t){if(Object(I.g)(e)&&t){var n=t.skinTone;if(n&&e.skinVariations&&e.skinVariations.length){var r=e.skinVariations[n-1];if(r)return r}}return e},ue=function(){function e(t,n){p()(this,e),this.emojis=t,this.initMembers(n)}return g()(e,[{key:"all",value:function(){var e={sort:T.b.None};return this.search("",e)}},{key:"search",value:function(e,t){var n=[],r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return 0===e.indexOf(":")?{nameQuery:e.slice(1),asciiQuery:e}:{nameQuery:e,asciiQuery:""}}(e),i=r.nameQuery,o=r.asciiQuery;return i?(n=this.fullSearch.search(i),o&&(n=this.withAsciiMatch(o,n))):n=this.getAllSearchableEmojis(),{emojis:n=this.applySearchOptions(n,e,t),query:e}}},{key:"findAllMatchingShortName",value:function(e){return this.shortNameMap.get(e)||[]}},{key:"findByShortName",value:function(e){return ae(this.shortNameMap,e)}},{key:"findById",value:function(e){return ae(this.idMap,e)}},{key:"findByAsciiRepresentation",value:function(e){return this.asciiMap.get(e)}},{key:"findInCategory",value:function(e){return e===M.m?this.getFrequentlyUsed():this.all().emojis.filter((function(t){return t.category===e}))}},{key:"addUnknownEmoji",value:function(e){this.emojis=[].concat(a()(this.emojis),[e]),this.fullSearch.addDocuments([e]),this.addToMaps(e),this.addToDynamicCategories(e)}},{key:"getAsciiMap",value:function(){return this.asciiMap}},{key:"getFrequentlyUsed",value:function(e){var t=this,n=this.usageTracker.getOrder().map((function(e){return t.findById(e)})).filter((function(e){return void 0!==e}));return e&&(n=this.applySearchOptions(n,"",e)),n}},{key:"getDynamicCategoryList",value:function(){return this.dynamicCategoryList.slice()}},{key:"used",value:function(e){var t=this;if(this.usageTracker.recordUsage(e),-1===this.dynamicCategoryList.indexOf(M.m)){if("undefined"===typeof window)return;window.setTimeout((function(){t.dynamicCategoryList.push(M.m)}))}}},{key:"delete",value:function(e){var t=function(e,t){var n=t.id,r=-1;return e.forEach((function(e,i){(e.id&&e.id===n||!e.id&&!n&&e.shortName===t.shortName)&&(r=i)})),r}(this.emojis,e);-1!==t&&(this.emojis.splice(t,1),this.initMembers(this.usageTracker))}},{key:"withAsciiMatch",value:function(e,t){var n=t,r=this.findByAsciiRepresentation(e);return r&&(n=t.filter((function(e){return e.id!==r.id})),n=[r].concat(a()(n))),n}},{key:"applySearchOptions",value:function(e,t,n){var r;return n||(n={}),void 0===n.sort&&(n.sort=T.b.Default),n.sort===T.b.Default?r=function(e,t){var n=e?e.replace(/:/g,"").toLowerCase().trim():void 0,r=[];e&&r.push(new D(e)),n&&r.push(new U(n)),t&&t.length&&r.push(new x(t)),n&&r.push(new L(n,"shortName"),new L(n,"name")),r.push(z.Instance,q.Instance);var i=_()(A,r);return i.compare=i.compare.bind(i),i}(t,this.usageTracker.getOrder()):n.sort===T.b.UsageFrequency&&(r=function(e){var t=new A(new x(e),new N,z.Instance);return t.compare=t.compare.bind(t),t}(this.usageTracker.getOrder())),r&&(r.compare=r.compare.bind(r),e=e.sort(r.compare)),n.limit&&n.limit>0&&(e=e.slice(0,n.limit)),n.skinTone?e.map((function(e){return ce(e,n)})):e}},{key:"initMembers",value:function(e){this.usageTracker=e||new ne,this.initRepositoryMetadata(),this.initSearchIndex()}},{key:"initRepositoryMetadata",value:function(){var e=this;this.shortNameMap=new Map,this.idMap=new Map,this.asciiMap=new Map;var t=new Set;this.emojis.forEach((function(n){t.add(n.category),e.addToMaps(n)})),this.usageTracker.getOrder().length&&t.add(M.m),this.dynamicCategoryList=Array.from(t).filter((function(e){return-1===M.g.indexOf(e)}))}},{key:"initSearchIndex",value:function(){this.fullSearch=new S("id"),this.fullSearch.tokenizer=new ie,this.fullSearch.searchIndex=new k,this.fullSearch.addIndex("name"),this.fullSearch.addIndex("shortName"),this.fullSearch.addDocuments(this.getAllSearchableEmojis())}},{key:"getAllSearchableEmojis",value:function(){return this.emojis.filter((function(e){return e.searchable}))}},{key:"addToMaps",value:function(t){var n=this;"undefined"!==typeof t.order&&-1!==t.order||(t.order=e.defaultEmojiWeight),"undefined"===typeof t.id&&(t.id=e.defaultEmojiWeight.toString()),oe(t,(function(e){return e.shortName}),this.shortNameMap),oe(t,(function(e){return e.id}),this.idMap),t.ascii&&t.ascii.forEach((function(e){return n.asciiMap.set(e,t)}))}},{key:"addToDynamicCategories",value:function(e){var t=Object(I.e)(e);-1===M.g.indexOf(t)&&-1===this.dynamicCategoryList.indexOf(t)&&this.dynamicCategoryList.push(t)}}]),e}();i()(ue,"defaultEmojiWeight",1e6);var se,le=n(25),de=n.n(le),fe=n(5),he=n.n(fe),me=n(12),pe=n.n(me),ve=n(429),ge=n(880),je=function(){function e(t){p()(this,e),this.config=t}return g()(e,[{key:"loadEmoji",value:function(){return Object(ge.b)(this.config).then((function(e){return Object(ge.a)(e)}))}}]),e}(),be=n(42),ye=n.n(be),Oe=n(2074),ke=function(e){return new Promise((function(t,n){var r=new Image;r.onload=function(){return t({src:r.src})},r.onerror=function(){return n()},r.src=e}))},Ce=function(){return(void 0!==se?Promise.resolve(se):new Promise((function(e){var t=new Image,n=function(){se=2===t.height,e(se)};t.addEventListener("load",n),t.addEventListener("error",n),t.src="data:image/webp;base64,UklGRi4AAABXRUJQVlA4TCEAAAAvAUAAEB8wAiMwAgSSNtse/cXjxyCCmrYNWPwmHRH9jwMA"}))).then((function(e){return e?"image/webp,image/*,*/*;q=0.8":"image/*,*/*;q=0.8"}))},we=function(){function e(t,n){p()(this,e),i()(this,"mediaImageQueue",[]),i()(this,"activeProcessing",0),i()(this,"pendingRequests",new Map),this.concurrentDownloadLimit=n&&n.concurrentDownloadLimit||16,this.tokenManager=t}return g()(e,[{key:"loadMediaImage",value:function(e){var t=this,n=this.pendingRequests.get(e);if(void 0!==n)return n;var r=new Promise((function(n,r){t.mediaImageQueue.push({url:e,resolve:n,reject:r}),t.processFromQueue()})).then((function(n){return t.pendingRequests.delete(e),n})).catch((function(n){throw t.pendingRequests.delete(e),n}));return this.pendingRequests.set(e,r),r}},{key:"getQueueSize",value:function(){return this.mediaImageQueue.length}},{key:"getActiveDownloads",value:function(){return this.activeProcessing}},{key:"processFromQueue",value:function(){for(var e=this,t=function(){e.activeProcessing++;var t=e.mediaImageQueue.shift(),n=t.url,r=t.resolve,i=t.reject;e.tokenManager.getToken("read",!1).then((function(t){e.requestMediaEmoji(n,t,!0).then((function(t){r(t),e.completedItem()})).catch((function(t){i(t),e.completedItem()}))})).catch((function(t){i(t),e.completedItem()}))};this.activeProcessing<this.concurrentDownloadLimit&&this.mediaImageQueue.length>0;)t()}},{key:"completedItem",value:function(){this.activeProcessing--,this.processFromQueue()}},{key:"delay",value:function(e){return new Promise((function(t){return setTimeout(t,e)}))}},{key:"requestMediaEmoji",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;return Ce().then((function(o){var a={headers:{Authorization:"Bearer ".concat(t.jwt),"X-Client-Id":t.clientId,Accept:o}};return fetch(e,a).then((function(o){if(404===o.status&&i>0)return r.delay(600/i).then((function(){return r.requestMediaEmoji(e,t,!1,i-1)}));if(403===o.status&&n)return r.tokenManager.getToken("read",!0).then((function(t){return r.requestMediaEmoji(e,t,!1)}));if(o.ok)return o.blob().then((function(e){return r.readBlob(e)}));throw new Error("Unable to load media image. Status=".concat(o.status," ").concat(o.statusText))}))}))}},{key:"readBlob",value:function(e){return new Promise((function(t,n){var r=new FileReader;r.addEventListener("load",(function(){return t(r.result)})),r.addEventListener("error",(function(){return n(r.error)})),r.readAsDataURL(e)}))}}]),e}(),Ee=n(851),Se=function(e,t){return t?e.altRepresentation:e.representation},Me=function(){function e(t){p()(this,e),i()(this,"cachedImageUrls",new Set),Object(K.a)("BrowserCacheStrategy"),this.mediaImageLoader=t}return g()(e,[{key:"loadEmoji",value:function(e,t){var n=this,r=Se(e,t);if(!Object(I.l)(r))return e;var i=r.mediaPath;return this.cachedImageUrls.has(i)?e:this.mediaImageLoader.loadMediaImage(i).then((function(){return n.cachedImageUrls.add(i),e})).catch((function(){}))}},{key:"optimisticRendering",value:function(){return!0}}],[{key:"supported",value:function(e,t){return function(){var e=!!document.documentMode,t=!e&&!!window.StyleMedia;return e||t}()?Promise.resolve(!1):t.loadMediaImage(e).then((function(){return new Promise((function(t){var n=new Image;n.addEventListener("load",(function(){t(!0)})),n.addEventListener("error",(function(){t(!1)})),n.src=e}))})).catch((function(){return!1}))}}]),e}(),Ie=function(){function e(t){p()(this,e),Object(K.a)("MemoryCacheStrategy"),this.mediaImageLoader=t,this.dataURLCache=new Ee.LRUCache(1e3)}return g()(e,[{key:"loadEmoji",value:function(e,t){var n=this,r=Se(e,t);if(!Object(I.l)(r))return e;var i=r.mediaPath,o=this.dataURLCache.get(i);return o?Object(I.d)(e,o,t):this.mediaImageLoader.loadMediaImage(i).then((function(r){var o=Object(I.d)(e,r,t);return r.length<=1e4?n.dataURLCache.put(i,r):Object(K.a)("No caching as image is too large",r.length,r.slice(0,15),e.shortName),o})).catch((function(){}))}},{key:"optimisticRendering",value:function(){return!1}}]),e}(),Te=function(){function e(t){p()(this,e),i()(this,"waitingInitUrls",[]),Object(K.a)("MediaEmojiCache"),this.mediaImageLoader=new we(t)}return g()(e,[{key:"loadEmoji",value:function(e,t){var n=Se(e,t);if(!Object(I.l)(n))return e;var r=n.mediaPath,i=this.getCache(r);return Object(I.n)(i)?i.then((function(n){return n.loadEmoji(e,t)})).catch((function(){})):i.loadEmoji(e,t)}},{key:"optimisticRendering",value:function(e){var t=this.getCache(e);return Object(I.n)(t)?t.then((function(e){return e.optimisticRendering()})).catch((function(){return!1})):t.optimisticRendering()}},{key:"getCache",value:function(e){var t=this;return this.cache?this.cache:(this.waitingInitUrls.push(e),this.cacheLoading||(this.cacheLoading=this.initCache().then((function(e){return t.cache=e,t.cacheLoading=void 0,e})).catch((function(e){throw t.cacheLoading=void 0,e}))),this.cacheLoading)}},{key:"initCache",value:function(){var e=this,t=this.waitingInitUrls.pop();return t?Me.supported(t,this.mediaImageLoader).then((function(t){return e.waitingInitUrls=[],e.cacheLoading=void 0,t?new Me(e.mediaImageLoader):new Ie(e.mediaImageLoader)})).catch((function(){return e.initCache()})):Promise.reject("Unable to initialise cache based on provided url(s)")}}]),e}(),Re=function(){function e(t){p()(this,e),this.siteServiceConfig=t,this.tokens=new Map}return g()(e,[{key:"isValidToken",value:function(e){return Date.now()/1e3<e.expiresAt-30}},{key:"fetchNewToken",value:function(e){return ve.b.requestService(this.siteServiceConfig,{path:"token/".concat(e)})}},{key:"addToken",value:function(e,t){this.tokens.set(e,{mediaApiToken:t})}},{key:"getToken",value:function(e,t){var n=this.tokens.get(e);n||(n={},this.tokens.set(e,n));var r=n,i=r.mediaApiToken,o=r.activeTokenRefresh;if(i){if(this.isValidToken(i)&&!t)return Promise.resolve(i);if(o)return o}return n.activeTokenRefresh=this.fetchNewToken(e).then((function(e){return n.mediaApiToken=e,n.activeTokenRefresh=void 0,e})),n.activeTokenRefresh}}]),e}(),Pe=["altRepresentations"];function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var De=function(){function e(t,n){var r=this;p()(this,e),i()(this,"postToEmojiService",(function(e,t){var n=e.shortName,i=e.name,o=e.width,a=e.height,c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({shortName:n,name:i,width:o,height:a,fileId:t})};return ve.b.requestService(r.siteServiceConfig,{requestInit:c}).then((function(e){var t=e.emojis;if(t.length){var n=t[0],r=n.altRepresentations,i=ye()(n,Pe),o=Ae(Ae({},i),{},{representation:Object(I.c)(i.representation)}),a=Object(ge.c)(r||{}),c=a?Object(I.c)(a):void 0;return Object(I.a)(o,c)}throw new Error("No emoji returns from upload. Upload failed.")}))})),this.siteServiceConfig=t,this.mediaApiToken=n,this.tokenManager=new Re(t),this.tokenManager.addToken("read",n),this.mediaEmojiCache=new Te(this.tokenManager)}return g()(e,[{key:"generateTokenisedMediaURL",value:function(){var e=de()(pe.a.mark((function e(t){var n,r,i;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!Object(I.l)(t.representation)){e.next=9;break}return n=new URL(t.representation.mediaPath),r=n.searchParams,e.next=5,this.tokenManager.getToken("read");case 5:return i=e.sent,r.get("token")!==i.jwt&&r.set("token",i.jwt),r.get("client")!==i.clientId&&r.set("client",i.clientId),e.abrupt("return",n.toString());case 9:throw Error("Emoji resource is not of type Media Representation");case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadMediaEmoji",value:function(e,t){if(!Object(I.k)(e))throw new Error("Only supported for media emoji");return this.mediaEmojiCache.loadEmoji(e,t)}},{key:"optimisticRendering",value:function(e,t){var n=t?e.altRepresentation:e.representation;if(!Object(I.l)(n))throw new Error("Only supported for media emoji");var r=n.mediaPath;return this.mediaEmojiCache.optimisticRendering(r)}},{key:"uploadEmoji",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0,i=Date.now();return this.tokenManager.getToken("upload",n).then((function(n){var o=Date.now()-i;return Object(K.a)("upload token load time",o),new Promise((function(a,c){var u=n.url,s=n.clientId,l=n.collectionName,d=Object(Oe.a)({authProvider:function(){return Promise.resolve({clientId:s,token:n.jwt,baseUrl:u})}}).file.upload({content:e.dataURL,name:e.filename,collection:l}).subscribe({next:function(n){if("uploading"===n.status&&r)r({percent:.95*n.progress});else if("processing"===n.status){d.unsubscribe();var u=Date.now()-i,s=u-o;Object(K.a)("total upload / media upload times",u,s),t.postToEmojiService(e,n.id).then((function(e){a(e)})).catch((function(e){c(e.reason||e)}))}},error:function(e){c(e)}})}))}))}},{key:"hasUploadToken",value:function(){return this.tokenManager.getToken("upload").then((function(e){return void 0!==e}),(function(){return!1}))}},{key:"prepareForUpload",value:function(){this.tokenManager.getToken("upload")}},{key:"findEmoji",value:function(e){if(!e.id)return Promise.reject(!1);var t="../".concat(encodeURIComponent(e.id));return Object(ge.b)(this.siteServiceConfig,{path:t}).then((function(e){return Object(ge.a)(e).emojis[0]})).catch((function(t){Object(K.a)("failed to load emoji",e,t)}))}},{key:"deleteEmoji",value:function(e){if(!Object(I.k)(e)&&!Object(I.j)(e))return Promise.reject(!1);if(!e.id)return Promise.reject(!1);var t="".concat(encodeURIComponent(e.id));return ve.b.requestService(this.siteServiceConfig,{path:t,requestInit:{method:"DELETE"}}).then((function(){return!0})).catch((function(){return!1}))}}]),e}(),Ue=n(275);function Ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Le(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=J()(e);if(t){var i=J()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return W()(this,n)}}var ze=function(e){var t=e;return!!t.isUploadSupported&&!!t.uploadCustomEmoji&&!!t.prepareForUpload},qe=(ve.a,":raised_hand:"),Be=n(2310),Fe=n(531),He=n(346),Ve=n(2762),Qe=n.n(Ve),Ge=n(2768),We=n.n(Ge),$e=n(2766),Je=n.n($e),Ke=n(2761),Ye=n.n(Ke),Xe=n(2758),Ze=n.n(Xe),et=n(2760),tt=n.n(et),nt=n(2764),rt=n.n(nt),it=n(2759),ot=n.n(it),at=n(2765),ct=n.n(at),ut=n(2763),st=n.n(ut),lt=n(2767),dt=n.n(lt),ft={SEARCH:{id:"SEARCH",name:"categoriesSearchResults",icon:void 0,order:0},FREQUENT:{id:"FREQUENT",name:"frequentCategory",icon:Ze.a,order:1},PEOPLE:{id:"PEOPLE",name:"peopleCategory",icon:ot.a,order:2},NATURE:{id:"NATURE",name:"natureCategory",icon:tt.a,order:3},FOODS:{id:"FOODS",name:"foodsCategory",icon:Ye.a,order:4},ACTIVITY:{id:"ACTIVITY",name:"activityCategory",icon:Qe.a,order:5},PLACES:{id:"PLACES",name:"placesCategory",icon:st.a,order:6},OBJECTS:{id:"OBJECTS",name:"objectsCategory",icon:rt.a,order:7},SYMBOLS:{id:"SYMBOLS",name:"symbolsCategory",icon:ct.a,order:8},FLAGS:{id:"FLAGS",name:"flagsCategory",icon:Je.a,order:9},ATLASSIAN:{id:"ATLASSIAN",name:"productivityCategory",icon:dt.a,order:10},USER_CUSTOM:{id:M.d,name:M.p,icon:We.a,order:11},CUSTOM:{id:M.d,name:M.e,icon:We.a,order:12}},ht=n(312);function mt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=J()(e);if(t){var i=J()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return W()(this,n)}}var pt=function(e,t){return ft[e].order-ft[t].order},vt=function(e,t){return t?e.concat(t.filter((function(e){return!!ft[e]}))).sort(pt):e},gt=function(e){Q()(n,e);var t=mt(n);function n(e){var r;p()(this,n),r=t.call(this,e),i()(he()(r),"onClick",(function(e){var t=r.props,n=t.onCategorySelected;if(t.disableCategories)e.preventDefault();else{var i=e.currentTarget.getAttribute("data-category-id");n&&n(i)}}));var o=e.dynamicCategories,a=M.g;return o&&(a=vt(a,o)),r.state={categories:a},r}return g()(n,[{key:"UNSAFE_componentWillUpdate",value:function(e){this.props.dynamicCategories!==e.dynamicCategories&&this.setState({categories:vt(M.g,e.dynamicCategories)})}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.disableCategories,i=n.intl,o=this.state.categories;if(o){var a=i.formatMessage;e=Object(s.d)("ul",null,o.map((function(e){var n=ft[e],i=[ht.c];e===t.props.activeCategoryId&&i.push(ht.a),r&&i.push(ht.d);var o=n.icon,c=a(Fe.a[n.name]);return Object(s.d)("li",{key:n.id},Object(s.d)("button",{"aria-label":c,"data-category-id":n.id,disabled:r,css:i,onClick:t.onClick,title:c,type:"button"},Object(s.d)(o,{label:c})))})))}return Object(s.d)("div",{css:ht.b},e)}}]),n}(l.PureComponent);i()(gt,"defaultProps",{onCategorySelected:function(){},dynamicCategories:[]});var jt=Object(He.c)(gt),bt=n(1146),yt=[ht.i,ht.j],Ot=function(e){var t=e.selectedEmoji;return Object(s.d)("div",{css:yt,"data-testid":"emoji-picker-footer"},t&&Object(s.d)(bt.a,{emoji:t}))},kt=Object(l.memo)(Ot),Ct=n(1115),wt=function(){function e(){p()(this,e),this.reset()}return g()(e,[{key:"reset",value:function(){this.categoryToRow=new Map,this.rowToCategory=new Map}},{key:"add",value:function(e,t){this.categoryToRow.has(e)||(this.categoryToRow.set(e,t),this.rowToCategory.set(t,e))}},{key:"getRow",value:function(e){return this.categoryToRow.get(e)}},{key:"findNearestCategoryAbove",value:function(e,t){var n=Array.from(this.rowToCategory.keys()).sort((function(e,t){return e-t}));if(0!==n.length){if(!t||n[0]>e)return this.rowToCategory.get(n[0]);for(var r=[0,n.length-1],i=Math.floor(n.length/2);n[i]!==e&&r[0]<r[1];)n[i]>e?r[1]=Math.max(i-1,0):r[0]=i+1,i=Math.floor((r[0]+r[1])/2);var o=n[n[i]>e?Math.max(i-1,0):i];return this.rowToCategory.get(o)}}}]),e}(),Et=n(668),St=n(1154),Mt=n(28),It=n.n(Mt),Tt=n(2332),Rt=n(614),Pt=n(538),_t=n.n(Pt),At=n(2089),Dt=function(e){var t=e.messageStyles,n=e.message;return e.tooltip?Object(s.d)("div",{css:t},Object(s.d)(At.a,{content:n,position:"top"},Object(s.d)(_t.a,{label:"Error",size:"medium"}))):Object(s.d)("div",{css:t},Object(s.d)(_t.a,{label:"Error",size:"small"})," ",n)},Ut=n(1269),Nt=n(115),xt=function(){return Object(s.d)("span",{css:Nt.d},Object(s.d)(Ut.a,null))},Lt=function(e){var t=e.onSubmit;return Object(s.d)(h.a,Fe.a.retryLabel,(function(e){return Object(s.d)(Tt.a,{css:Nt.U,appearance:"warning",onClick:t},e)}))},zt=function(e){var t=e.appearance,n=e.onSubmit,r=e.label;return Object(s.d)(Tt.a,{css:Nt.Q,appearance:t,onClick:n},r)},qt=function(e){var t=e.loading,n=e.error;return t?Object(s.d)(xt,null):n?Object(s.d)(Lt,e):Object(s.d)(zt,e)};function Bt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=J()(e);if(t){var i=J()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return W()(this,n)}}var Ft,Ht=function(e){Q()(n,e);var t=Bt(n);function n(e){var r;return p()(this,n),r=t.call(this,e),i()(he()(r),"onSubmit",(function(){var e=r.props,t=e.emoji,n=e.onDeleteEmoji,i=e.onCloseDelete;r.state.loading||(r.setState({loading:!0}),n(t).then((function(e){e?i():r.setState({loading:!1,error:!0})})))})),i()(he()(r),"onCancel",(function(){r.props.onCloseDelete()})),r.state={loading:!1,error:!1},r}return g()(n,[{key:"UNSAFE_componentWillUpdate",value:function(e){e.emoji.id!==this.props.emoji.id&&this.setState({error:!1})}},{key:"render",value:function(){var e=this.props,t=e.emoji,n=e.intl,r=this.state,i=r.loading,o=r.error,a=n.formatMessage;return Object(s.d)("div",{css:Nt.i},Object(s.d)("div",{css:Nt.j},Object(s.d)("h5",null,Object(s.d)(h.a,Fe.a.deleteEmojiTitle)),Object(s.d)(h.a,It()({},Fe.a.deleteEmojiDescription,{values:{emojiShortName:t.shortName}}))),Object(s.d)("div",{css:Nt.h},Object(s.d)(Rt.a,{emoji:t}),Object(s.d)("div",{css:Nt.H},o?i?null:Object(s.d)(Dt,{message:a(Fe.a.deleteEmojiFailed),messageStyles:Nt.p,tooltip:!0}):null,Object(s.d)(qt,{label:a(Fe.a.deleteEmojiLabel),onSubmit:this.onSubmit,appearance:"danger",loading:i,error:o}),Object(s.d)(Tt.a,{appearance:"subtle",onClick:this.onCancel,css:Nt.e},Object(s.d)(h.a,Fe.a.cancelLabel)))))}}]),n}(l.Component),Vt=Object(He.c)(Ht),Qt=n(2322),Gt=n(685);function Wt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=J()(e);if(t){var i=J()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return W()(this,n)}}!function(e){e[e.Waiting=0]="Waiting",e[e.Uploading=1]="Uploading",e[e.Error=2]="Error"}(Ft||(Ft={}));var $t=function(e){Q()(n,e);var t=Wt(n);function n(){return p()(this,n),t.apply(this,arguments)}return g()(n,[{key:"render",value:function(){var e,t=this.props,n=t.name,r=t.previewImage,i=t.uploadStatus,o=t.errorMessage,a=t.onAddEmoji,c=t.onUploadCancelled,u=t.intl.formatMessage;if(r){var l={shortName:":".concat(n,":"),type:M.d,category:M.d,representation:{imagePath:r,width:24,height:24},searchable:!0};e=Object(s.d)(Gt.a,{emoji:l})}var d=i===Ft.Uploading;return Object(s.d)("div",{css:Nt.S},Object(s.d)("div",{css:Nt.R},Object(s.d)("div",{css:Nt.T},Object(s.d)("h5",null,Object(s.d)(h.a,Fe.a.emojiPreviewTitle)),Object(s.d)(h.a,It()({},Fe.a.emojiPreview,{values:{emoji:e}}))),Object(s.d)("div",{css:Nt.c},e)),Object(s.d)("div",{css:Nt.L},!d&&o?Object(s.d)(Dt,{messageStyles:Nt.v,message:o,tooltip:!0}):null,Object(s.d)(qt,{label:u(Fe.a.addEmojiLabel),onSubmit:a,appearance:"primary",loading:d,error:!!o}),Object(s.d)(Tt.a,{onClick:c,appearance:"subtle",isDisabled:d,css:Nt.e},Object(s.d)(h.a,Fe.a.cancelLabel))))}}]),n}(l.PureComponent),Jt=Object(He.c)($t),Kt=function(e){var t=e.accept,n=e.ariaDescribedBy,r=e.isDisabled,i=e.label,o=e.onChange,a=e.onClick,c=Object(l.useRef)(null);return d.a.createElement("span",null,d.a.createElement(Tt.a,{onClick:function(){c.current&&(a&&a(),c.current.click())},isDisabled:r,"aria-describedby":n},i),d.a.createElement("input",{className:"emojiUploadFileInput",ref:c,onChange:o,type:"file",accept:t,style:{display:"none"}}))},Yt=new Map([[":",""],["!",""],["@",""],["#",""],["%",""],["^",""],["&",""],["*",""],["(",""],[")",""],[" ","_"]]),Xt=function(e){return Yt.forEach((function(t,n){e=e.split(n).join(t)})),e},Zt=function(e){var t=e.split("_").join(" ");return"".concat(t.substr(0,1).toLocaleUpperCase()).concat(t.substr(1))},en=function(e){var t=e.name,n=void 0===t?"":t,r=e.onChooseFile,i=e.onClick,o=e.onNameChange,a=e.onUploadCancelled,c=e.errorMessage,u=e.intl.formatMessage,d=!n,f="choose.emoji.file.button.screen.reader.description.id";return Object(s.d)("div",{css:Nt.A},Object(s.d)("div",{css:Nt.O},Object(s.d)(h.a,Fe.a.addCustomEmojiLabel,(function(e){return Object(s.d)("h5",null,e)}))),Object(s.d)("div",{css:Nt.P},Object(s.d)("span",{css:Nt.N},Object(s.d)(Qt.a,{placeholder:u(Fe.a.emojiPlaceholder),"aria-label":u(Fe.a.emojiNameAriaLabel),maxLength:50,onChange:o,onKeyDown:function(e){"Escape"===e.key&&a()},value:n,isCompact:!0,autoFocus:!0})),Object(s.d)("span",{css:Nt.M},Object(s.d)(h.a,Fe.a.emojiChooseFileScreenReaderDescription,(function(e){return Object(s.d)(l.Fragment,null,Object(s.d)("span",{hidden:!0,id:f},e),Object(s.d)(Kt,{label:u(Fe.a.emojiChooseFileTitle),onChange:r,onClick:i,accept:"image/png,image/jpeg,image/gif",ariaDescribedBy:f,isDisabled:d}))})))),Object(s.d)("div",{css:Nt.B},c?Object(s.d)(Dt,{messageStyles:Nt.m,message:c}):Object(s.d)("p",null,Object(s.d)(h.a,Fe.a.emojiImageRequirements))))},tn=Object(He.c)((function(e){var t=e.errorMessage,n=e.initialUploadName,r=e.onUploadEmoji,i=e.onFileChooserClicked,o=e.onUploadCancelled,a=e.intl,c=Object(l.useState)(t?Ft.Error:Ft.Waiting),f=u()(c,2),m=f[0],p=f[1],v=Object(l.useState)(),g=u()(v,2),j=g[0],b=g[1],y=Object(l.useState)(n&&Xt(n)),O=u()(y,2),k=O[0],C=O[1],w=Object(l.useState)(),E=u()(w,2),S=E[0],M=E[1],I=Object(l.useState)(),T=u()(I,2),R=T[0],P=T[1];Object(l.useEffect)((function(){t?p(Ft.Error):m===Ft.Error&&p(Ft.Waiting)}),[t,m]),Object(l.useEffect)((function(){n&&C(Xt(n))}),[n]);var _=function(e){Object(K.a)("File load error: ",e),b(Fe.a.emojiUploadFailed),A()},A=function(){P(void 0)},D=function(){C(void 0),P(void 0),p(Ft.Waiting)},U=function(){D(),o()};return Object(s.d)(d.a.Fragment,null,k&&R?Object(s.d)(Jt,{errorMessage:t,name:k,onAddEmoji:function(){var e;if(m!==Ft.Uploading&&(S&&k&&R)){var t=function(e){var t=e.width,n=e.height;p(Ft.Uploading),r({name:Zt(k),shortName:":".concat(k,":"),filename:S,dataURL:R,width:t,height:n},m===Ft.Error,D)};(e=R,new Promise((function(t,n){var r=new Image;r.addEventListener("load",(function(){t({width:r.naturalWidth,height:r.naturalHeight})})),r.addEventListener("error",n),r.src=e}))).then((function(e){t(e)})).catch((function(e){Object(K.a)("getNaturalImageSize error",e),t({width:32,height:32})}))}},onUploadCancelled:U,previewImage:R,uploadStatus:m}):Object(s.d)(en,{name:k,onChooseFile:function(e){var t=e.target.files;if(t.length){var n=new FileReader,r=t[0];if(function(e){return e&&e.size>1048576}(r))return b(Fe.a.emojiImageTooBig),void A();n.addEventListener("load",function(e){return function(){var t=de()(pe.a.mark((function t(n){return pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,M(e.name),t.next=4,ke(n.target.result);case 4:P(n.target.result),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),b(Fe.a.emojiInvalidImage),A();case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}(r)),n.addEventListener("abort",_),n.addEventListener("error",_),n.readAsDataURL(r)}else A()},onClick:i,onNameChange:function(e){var t=Xt(e.target.value);k!==t&&C(t)},onUploadCancelled:U,errorMessage:j?Object(s.d)(h.a,j):void 0,intl:a}))})),nn=n(2478),rn=n.n(nn);function on(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=J()(e);if(t){var i=J()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return W()(this,n)}}var an=function(e){Q()(n,e);var t=on(n);function n(){var e;p()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),i()(he()(e),"onBlur",(function(){var t=document.activeElement;t instanceof HTMLElement&&t.getAttribute("data-emoji-picker-container")&&e.restoreInputFocus()})),i()(he()(e),"onChange",(function(t){e.saveInputSelection(),e.props.onChange(t)})),i()(he()(e),"focusInput",(function(){e.inputRef&&e.inputRef.focus()})),i()(he()(e),"handleInputRef",(function(t){if(t){if(e.inputRef=t,"undefined"===typeof window)return;window.setTimeout(e.focusInput)}})),e}return g()(n,[{key:"saveInputSelection",value:function(){if(this.inputSelection=void 0,this.inputRef){var e=this.inputRef,t=e.selectionStart,n=e.selectionEnd,r=e.selectionDirection;t&&n&&r&&(this.inputSelection={selectionStart:t,selectionEnd:n,selectionDirection:r})}}},{key:"restoreInputFocus",value:function(){if(this.focusInput(),this.inputSelection&&this.inputRef&&this.inputRef.setSelectionRange){var e=this.inputSelection,t=e.selectionStart,n=e.selectionEnd,r=e.selectionDirection;this.inputRef.setSelectionRange(t,n,r)}}},{key:"render",value:function(){var e=this.props,t=e.style,n=e.query,r=e.intl.formatMessage;return Object(s.d)("div",{css:ht.o,style:t},Object(s.d)(Qt.a,{"aria-label":r(Fe.a.searchLabel),css:ht.n,autoComplete:"off",name:"search",placeholder:"".concat(r(Fe.a.searchPlaceholder),"..."),onChange:this.onChange,value:n||"",ref:this.handleInputRef,isCompact:!0,onBlur:this.onBlur,elemBeforeInput:Object(s.d)("span",{css:ht.p},Object(s.d)(rn.a,{label:""}))}))}}]),n}(l.PureComponent);i()(an,"defaultProps",{style:{}});var cn,un=Object(He.c)(an),sn=n(608),ln=Object(l.forwardRef)((function(e,t){var n=e.emoji,r=e.selectOnHover,i=e.ariaLabelText,o=e.ariaExpanded,a=e.shouldHideButton;return Object(s.d)("button",{ref:t,"aria-expanded":o,css:a?Nt.C:Nt.l,onMouseDown:function(t){!function(e,t){var n=e.onSelected;t.preventDefault(),n&&Object(sn.a)(t)&&n()}(e,t)},onKeyDown:function(t){!function(e,t){var n=e.onSelected;!n||"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),n())}(e,t)},"aria-label":i},Object(s.d)(Gt.a,{emoji:n,selectOnHover:r}))})),dn=n(505),fn=(cn={},i()(cn,"raised hand","default skin tone"),i()(cn,"raised hand: light skin tone","light skin tone"),i()(cn,"raised hand: medium-light skin tone","medium-light skin tone"),i()(cn,"raised hand: medium skin tone","medium skin tone"),i()(cn,"raised hand: medium-dark skin tone","medium-dark skin tone"),i()(cn,"raised hand: dark skin tone","dark skin tone"),cn),hn=function(e){if(e)return fn[e]};function mn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mn(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var vn=Object(dn.a)()((function(e){var t=e.createAnalyticsEvent,n=e.emoji,r=e.previewEmojiId,i=e.onToneSelected,o=Object(l.useRef)(!1),c=Object(l.useRef)(null),u=Object(l.useMemo)((function(){return function(e){return e.skinVariations?[e].concat(a()(e.skinVariations)):[e]}(n).map((function(e,t){return pn(pn({},e),{},{focused:e.id!==r,label:hn(e.name),toneId:t})}))}),[n,r]);Object(l.useEffect)((function(){c.current&&c.current.focus()}),[c]);var s=function(e){t&&Object(Be.c)(e)(t)};return o.current||s(Object(Be.q)({})),o.current=!0,d.a.createElement("div",null,u.map((function(e){return d.a.createElement(ln,{ref:e.focused?c:null,shouldHideButton:e.id===r,ariaLabelText:e.label,key:"".concat(e.id),onSelected:(t=e.toneId,function(){i(t),s(Object(Be.o)({skinToneModifier:["default","light","mediumLight","medium","mediumDark","dark"][t]}))}),emoji:e,selectOnHover:!0});var t})))})),gn=n(2309),jn=n(1155),bn=n(366),yn=n(1147),On=["onMouseDown","onMouseUp"];function kn(){}var Cn="undefined"!==typeof navigator&&navigator.userAgent.toLowerCase().indexOf("firefox")>-1,wn=d.a.memo(d.a.forwardRef((function(e,t){var n=e.onMouseDown,r=void 0===n?kn:n,i=e.onMouseUp,o=void 0===i?kn:i,a=ye()(e,On),c=Object(gn.b)().mode,s=a.appearance||"default",f=a.spacing||"default",h=Boolean(a.shouldFitContainer),m=Boolean(a.isSelected),p=Object(yn.a)(a),v=Object(l.useState)(!1),g=u()(v,2),j=g[0],b=g[1],y=Object(l.useCallback)((function(e){r(e),Cn&&b(!0)}),[r,b]),O=Object(l.useCallback)((function(e){o(e),Cn&&b(!1)}),[o,b]),k=Object(l.useMemo)((function(){return Object(bn.b)({appearance:s,spacing:f,mode:c,isSelected:m,shouldFitContainer:h,isOnlySingleIcon:p})}),[s,f,c,m,h,p]);return d.a.createElement(jn.a,It()({},a,{ref:t,buttonCss:k,"data-firefox-is-active":!!j||void 0,onMouseDown:y,onMouseUp:O}))})));wn.displayName="Button";var En=wn,Sn=n(1145),Mn=n.n(Sn),In=function(e){var t=e.onOpenUpload,n=e.uploadEnabled,r=e.intl.formatMessage;return Object(s.d)(l.Fragment,null,n&&Object(s.d)("div",{css:Nt.a},Object(s.d)(h.a,Fe.a.addCustomEmojiLabel,(function(e){return Object(s.d)(En,{onClick:t,iconBefore:Object(s.d)(Mn.a,{label:r(Fe.a.addCustomEmojiLabel),size:"small"}),appearance:"subtle",css:Nt.b,className:Nt.u},e)}))))},Tn=function(e){var t=e.toneEmoji,n=e.selectedTone,r=e.intl,i=e.onToneSelected,o=e.onToneOpen,a=e.showToneSelector,c=r.formatMessage;if(!t)return null;var u=t;return n&&u.skinVariations&&(u=u.skinVariations[(n||1)-1]),Object(s.d)("div",{css:Nt.z},a&&Object(s.d)(vn,{emoji:t,onToneSelected:i,previewEmojiId:u.id}),Object(s.d)(ln,{ariaExpanded:a,emoji:u,selectOnHover:!0,onSelected:o,ariaLabelText:c(Fe.a.emojiSelectSkinToneButtonAriaLabelText,{selectedTone:"".concat(hn(u.name)," selected")})}))},Rn=Object(He.c)((function(e){var t=e.onToneSelected,n=e.onToneSelectorCancelled,r=e.initialUploadName,i=e.onUploadCancelled,o=e.onCloseDelete,a=e.onDeleteEmoji,c=e.onUploadEmoji,d=e.uploadErrorMessage,f=e.uploading,h=e.onFileChooserClicked,m=e.emojiToDelete,p=e.onChange,v=e.query,g=Object(l.useState)(!1),j=u()(g,2),b=j[0],y=j[1],O=[ht.i,ht.e];return f?Object(s.d)("div",{css:O},Object(s.d)(tn,{onUploadCancelled:i,onUploadEmoji:c,onFileChooserClicked:h,errorMessage:d,initialUploadName:r})):m?Object(s.d)("div",{css:O},Object(s.d)(Vt,{emoji:m,onDeleteEmoji:a,onCloseDelete:o})):Object(s.d)("div",{css:O,onMouseLeave:function(){b&&n&&n(),y(!1)}},Object(s.d)("div",{css:Nt.k},!b&&Object(s.d)(un,{onChange:p,query:v}),Object(s.d)(Tn,It()({},e,{onToneOpen:function(){return y(!0)},onToneSelected:function(e){y(!1),t&&t(e)},showToneSelector:b}))),Object(s.d)(In,e))}));function Pn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=J()(e);if(t){var i=J()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return W()(this,n)}}var _n=function(e,t){return(e.order||0)-(t.order||0)},An=function(e){Q()(n,e);var t=Pn(n);function n(e){var r;return p()(this,n),r=t.call(this,e),i()(he()(r),"virtualItems",[]),i()(he()(r),"categoryTracker",new wt),i()(he()(r),"onEmojiMouseEnter",(function(e,t){r.props.onEmojiActive&&r.props.onEmojiActive(e,t)})),i()(he()(r),"onSearch",(function(e){r.props.onSearch&&r.props.onSearch(e.target.value)})),i()(he()(r),"buildVirtualItemFromGroup",(function(e){var t=r.props,n=t.onEmojiSelected,i=t.onEmojiDelete,o=[];o.push(new St.a({id:e.category,title:e.title,className:"emoji-category"}));for(var a=e.emojis;a.length>0;){var c=a.slice(0,Et.a.emojiPerRow);a=a.slice(Et.a.emojiPerRow),o.push(new St.b({emojis:c,title:e.title,showDelete:e.title===M.p,onSelected:n,onDelete:i,onMouseMove:r.onEmojiMouseEnter}))}return o})),i()(he()(r),"buildVirtualItems",(function(e,t){var n=e.emojis,i=e.loading,o=e.query,c=[];if(r.categoryTracker.reset(),i)c.push(new St.c);else if(o){var u=ft.SEARCH;c=[].concat(a()(c),a()(r.buildVirtualItemFromGroup({category:"SEARCH",title:u.name,emojis:n,order:u.order})))}else r.allEmojiGroups.forEach((function(e){r.categoryTracker.add(e.emojis[0].category,c.length),c=[].concat(a()(c),a()(r.buildVirtualItemFromGroup(e)))}));var s=r.virtualItems.length!==c.length;r.virtualItems=c;var l=r.refs.list;!s&&l&&l.forceUpdateGrid(),!o&&l&&l.recomputeRowHeights()})),i()(he()(r),"addToCategoryMap",(function(e,t,n){if(!e[n]){var r=ft[n];e[n]={emojis:[],title:r.name,category:n,order:r.order}}return e[n].emojis.push(t),e})),i()(he()(r),"groupByCategory",(function(e){return function(t,n){return r.addToCategoryMap(t,n,n.category),n.category===M.d&&e&&n.creatorUserId===e.id&&r.addToCategoryMap(t,n,"USER_CUSTOM"),t}})),i()(he()(r),"buildEmojiGroupedByCategory",(function(e,t){var n=e.reduce(r.groupByCategory(t),{});r.allEmojiGroups=Object.keys(n).map((function(e){return n[e]})).map((function(e){return"FREQUENT"!==e.category&&e.emojis.sort(_n),e})).sort(_n)})),i()(he()(r),"repaintList",(function(){if(r.refs.root){var e=r.refs.root,t=e.style.display;e.style.display="none",e.offsetHeight,e.style.display=t}})),i()(he()(r),"checkCategoryIdChange",(function(e){var t=e.startIndex;if(0===t&&r.repaintList(),!r.props.query){var n=r.refs.list,i=r.categoryTracker.findNearestCategoryAbove(t,n);i&&r.activeCategoryId!==i&&(r.activeCategoryId=i,r.props.onCategoryActivated&&r.props.onCategoryActivated(i))}})),i()(he()(r),"rowSize",(function(e){var t=e.index;return r.virtualItems[t].height})),i()(he()(r),"renderRow",(function(e){return Object(St.d)(r.virtualItems,e)})),r.buildEmojiGroupedByCategory(e.emojis,e.currentUser),r.buildVirtualItems(e,r.state),r}return g()(n,[{key:"UNSAFE_componentWillUpdate",value:function(e,t){this.props.emojis===e.emojis&&this.props.selectedTone===e.selectedTone&&this.props.loading===e.loading&&this.props.query===e.query||(e.query||this.buildEmojiGroupedByCategory(e.emojis,e.currentUser),this.buildVirtualItems(e,t))}},{key:"reveal",value:function(e){var t=this.categoryTracker.getRow(e);this.refs.list.scrollToRow(t)}},{key:"scrollToBottom",value:function(){this.refs.list.scrollToRow(this.virtualItems.length)}},{key:"render",value:function(){var e=this.props,t=e.query,n=e.selectedTone,r=e.onToneSelected,i=e.onToneSelectorCancelled,o=e.toneEmoji,a=e.uploading,c=e.uploadEnabled,u=e.emojiToDelete,l=e.initialUploadName,d=e.uploadErrorMessage,f=e.onUploadCancelled,h=e.onUploadEmoji,m=e.onCloseDelete,p=e.onDeleteEmoji,v=e.onFileChooserClicked,g=e.onOpenUpload;return Object(s.d)("div",{ref:"root",css:ht.k},Object(s.d)(Rn,{selectedTone:n,onToneSelected:r,onToneSelectorCancelled:i,toneEmoji:o,uploading:a,uploadEnabled:c,emojiToDelete:u,initialUploadName:l,uploadErrorMessage:d,onUploadCancelled:f,onUploadEmoji:h,onCloseDelete:m,onDeleteEmoji:p,onFileChooserClicked:v,onOpenUpload:g,query:t,onChange:this.onSearch}),Object(s.d)(Ct.List,{ref:"list",height:Et.a.listHeight,overscanRowCount:5,rowCount:this.virtualItems.length,rowHeight:this.rowSize,rowRenderer:this.renderRow,scrollToAlignment:"start",width:Et.a.listWidth,css:ht.q,onRowsRendered:this.checkCategoryIdChange}))}}]),n}(l.PureComponent);i()(An,"defaultProps",{onEmojiSelected:function(){},onEmojiActive:function(){},onEmojiDelete:function(){},onCategoryActivated:function(){},onSearch:function(){}});var Dn=n(887);function Un(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Un(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Un(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xn=function(e){var t=e.emojiProvider,n=e.onSelection,r=e.onPickerRef,i=e.hideToneSelector,o=e.createAnalyticsEvent,c=Object(l.useState)([]),d=u()(c,2),m=d[0],p=d[1],v=Object(l.useState)([]),g=u()(v,2),j=g[0],b=g[1],y=Object(l.useState)([]),O=u()(y,2),k=O[0],C=O[1],w=Object(l.useState)(""),E=u()(w,2),S=E[0],R=E[1],P=Object(l.useState)([]),_=u()(P,2),A=_[0],D=_[1],U=Object(l.useState)(i?void 0:t.getSelectedTone()),N=u()(U,2),x=N[0],L=N[1],z=Object(l.useState)(!0),q=u()(z,2),B=q[0],F=q[1],H=Object(l.useState)(!1),V=u()(H,2),Q=V[0],G=V[1],W=Object(l.useState)(!1),$=u()(W,2),J=$[0],K=$[1],Y=Object(l.useState)(),X=u()(Y,2),Z=X[0],ee=X[1],te=Object(l.useState)(null),ne=u()(te,2),re=ne[0],ie=ne[1],oe=Object(l.useState)(!1),ae=u()(oe,2),ue=ae[0],se=ae[1],le=Object(l.useState)(),de=u()(le,2),fe=de[0],he=de[1],me=Object(l.useState)(),pe=u()(me,2),ve=pe[0],ge=pe[1],je=Object(l.useState)(),be=u()(je,2),ye=be[0],Oe=be[1],ke=Object(l.useMemo)((function(){return Object(l.createRef)()}),[]),Ce=Object(l.useRef)(0),we=Object(l.useRef)(!0),Ee=function(){var e=Object(l.useRef)(!1);return Object(l.useEffect)((function(){e.current=!0}),[]),e.current}(),Se=Object(l.useRef)(!0),Me=Object(l.useRef)(t),Ie=Object(l.useMemo)((function(){return t.getCurrentUser()}),[t]),Te=Object(l.useCallback)((function(e){o&&Object(Be.c)(e)(o)}),[o]),Re=Object(l.useCallback)((function(e,t){Z&&Z.id===(null===e||void 0===e?void 0:e.id)||ee(t)}),[Z]),Pe=Object(l.useCallback)((function(e){re!==e&&ie(e)}),[re]),_e=function(){return Date.now()-Ce.current},Ae=Object(l.useCallback)((function(e){G(e)}),[]),De=Object(l.useCallback)((function(e){D(e)}),[]),Ne=Object(l.useCallback)((function(){Object(f.unstable_batchedUpdates)((function(){K(!1),he(void 0)})),Te(Object(Be.s)())}),[Te]),xe=Object(l.useCallback)((function(){return t.calculateDynamicCategories?t.calculateDynamicCategories():Promise.resolve([])}),[t]),Le=Object(l.useCallback)((function(e){var t=e.searchQuery,n=e.emojiToRender,r=e.searchEmoji,i=e.frequentEmoji,o=!!t;!o&&n&&n.length!==m.length&&xe().then((function(e){De(e)})),n&&!Object(I.b)(n,Z)&&Object(f.unstable_batchedUpdates)((function(){ee(void 0),ie(null)})),Object(f.unstable_batchedUpdates)((function(){n&&p(n),r&&b(r),i&&C(i),F(!1),se(o)}))}),[m.length,xe,De,Z]),He=Object(l.useCallback)((function(e){var t=e.map((function(e){var t=JSON.parse(JSON.stringify(e));return t.category=M.m,t}));Le({frequentEmoji:t})}),[Le]),Ve=Object(l.useCallback)((function(e){var t,n=k||[],r=e.query||"";t=!n.length||S?e.emojis:[].concat(a()(e.emojis),a()(n)),Le({searchQuery:r,emojiToRender:t,searchEmoji:e.emojis})}),[k,S,Le]),Qe=Object(l.useMemo)((function(){return{result:Ve}}),[Ve]),Ge=Object(l.useCallback)((function(e,n){if(!e){n||(n={}),n.sort||(n.sort=T.b.None);var r=Nn(Nn({},n),{},{sort:T.b.None,limit:16});t.getFrequentlyUsed(r).then(He)}t.filter(e,n)}),[t,He]),We=Object(l.useCallback)((function(e){t.setSelectedTone(e),Ge(S,{skinTone:e}),L(e)}),[t,S,Ge]),$e=Object(l.useCallback)((function(){Te(Object(Be.p)())}),[Te]),Je=Object(l.useCallback)((function(e,t,r){n&&(n(e,t,r),Te(Object(Be.h)({duration:_e(),emojiId:(null===e||void 0===e?void 0:e.id)||"",category:t&&t.category||"",type:t&&t.type||"",queryLength:S&&S.length||0})))}),[Te,n,S]),Ke=Object(l.useCallback)((function(e){e&&t.findInCategory(e).then((function(t){var n;ue||(t&&t.length>0&&(n=ce(t[0],{skinTone:x})),ke.current&&ke.current.reveal(e),Object(f.unstable_batchedUpdates)((function(){ie(e),ee(n)})),Te(Object(Be.a)({category:e})))}))}),[ue,ke,t,Te,x]),Ye=Object(l.useMemo)((function(){return function(e,t,n){return function(r,i,o){try{e.recordSelection&&i&&(Ue.d["emoji-selection-recorded"].start(),e.recordSelection(i).then((function(){n&&n(Be.m),Ue.d["emoji-selection-recorded"].success()})).catch((function(){n&&n(Be.j),Ue.d["emoji-selection-recorded"].failure({metadata:{reason:"recordSelection error",source:"RecordSelectionDefault",data:{emoji:{id:i.id,name:i.name,shortName:i.shortName}}}})})))}finally{t&&t(r,i,o)}}}(t,Je,(function(e){return Te(e("picker"))}))}),[t,Te,Je]),Xe=Object(l.useMemo)((function(){return fe?Object(s.d)(h.a,fe):null}),[fe]),Ze=Object(l.useMemo)((function(){return{emoji:{emojiProvider:t}}}),[t]),et=Object(l.useCallback)((function(){Te(Object(Be.n)())}),[Te]),tt=Object(l.useCallback)((function(e){var t={skinTone:x};S&&(Ue.d["emoji-searched"].start(),Ue.d["emoji-searched"].addMetadata({queryLength:S.length,source:"picker"})),e!==S&&R(e),Ge(S,t)}),[S,x,Ge]),nt=Object(l.useCallback)((function(){ze(t)&&t.prepareForUpload(),Object(f.unstable_batchedUpdates)((function(){he(void 0),K(!0)})),Te(Object(Be.r)())}),[t,Te]),rt=Object(l.useCallback)((function(){"undefined"!==typeof window&&ke.current&&window.setTimeout((function(){var e;null===(e=ke.current)||void 0===e||e.scrollToBottom()}),0)}),[ke]),it=Object(l.useCallback)((function(e,n){Te(Object(Be.t)({retry:n}));!function(e,t,n,r,i,o){var a=Date.now();n(void 0),ze(t)&&(Ue.d["emoji-uploaded"].start(),t.uploadCustomEmoji(e,o).then((function(e){i(Object(Be.v)({duration:Date.now()-a})),r(e),Ue.d["emoji-uploaded"].success()})).catch((function(e){n(Fe.a.emojiUploadFailed),console.error("Unable to upload emoji",e),i(Object(Be.u)({duration:Date.now()-a,reason:Fe.a.emojiUploadFailed.defaultMessage})),Ue.d["emoji-uploaded"].failure({metadata:{source:"UploadEmoji",error:e}})})))}(e,t,(function(e){he(e)}),(function(e){Object(f.unstable_batchedUpdates)((function(){ie(M.d),ee(e),K(!1)})),rt()}),Te,n)}),[t,Te,rt]),ot=Object(l.useCallback)((function(e,t){e&&(Te(Object(Be.d)({emojiId:e.id})),ge(t))}),[Te]),at=Object(l.useCallback)((function(){Te(Object(Be.e)({emojiId:ve&&ve.id})),ge(void 0)}),[ve,Te]),ct=Object(l.useCallback)((function(e){return Te(Object(Be.f)({emojiId:ve&&ve.id})),t.deleteSiteEmoji(e).then((function(e){return e&&Ge(S,{skinTone:x}),e}))}),[t,ve,Te,S,x,Ge]),ut=Object(l.useCallback)((function(){if(t.subscribe(Qe),tt(S),ze(t)&&t.isUploadSupported().then(Ae),!i){var e=t.findByShortName(qe);Object(I.n)(e)?e.then((function(e){return Oe(e)})):(void 0===e||Object(I.f)(e))&&Oe(e)}}),[t,i,Qe,tt,Ae,S]);we.current&&(Ue.d["emoji-picker-opened"].success(),Ce.current=Date.now(),Te(Object(Be.g)()),we.current=!1),Object(l.useEffect)((function(){Ee&&Se.current&&(ut(),Se.current=!1)}),[Ee,ut]),Object(l.useEffect)((function(){return Me.current.unsubscribe(Qe),Me.current=t,t.subscribe(Qe),ze(t)&&t.isUploadSupported().then(Ae),function(){t.unsubscribe(Qe)}}),[t,Qe,Ae]),Object(l.useEffect)((function(){tt(S)}),[t,tt,S]),Object(l.useEffect)((function(){Te(Object(Be.i)({queryLength:S.length,numMatches:m.length})),Ue.d["emoji-searched"].success({metadata:{emojisLength:m.length}})}),[m.length,Te,S]),Object(l.useEffect)((function(){!k.length||S?p(j):p([].concat(a()(j),a()(k)))}),[k,S,j]),Object(l.useEffect)((function(){return function(){Te(Object(Be.b)({duration:_e()})),Ue.d["emoji-picker-opened"].abort({metadata:{source:"EmojiPickerComponent",reason:"unmount"}}),Ue.d["emoji-searched"].abort({metadata:{source:"EmojiPickerComponent",reason:"unmount"}})}}),[Te]),Object(l.useEffect)((function(){return function(){t.unsubscribe(Qe)}}),[t,Qe]);var st=Z&&!J;return Object(s.d)(Dn.a,{emojiContextValue:Ze},Object(s.d)("div",{css:Object(ht.h)(st),ref:r,"data-emoji-picker-container":!0},Object(s.d)(jt,{activeCategoryId:re,dynamicCategories:A,disableCategories:ue,onCategorySelected:Ke}),Object(s.d)(An,{emojis:m,currentUser:Ie,onEmojiSelected:Ye,onEmojiActive:Re,onEmojiDelete:ot,onCategoryActivated:Pe,onSearch:tt,query:S,selectedTone:x,loading:B,ref:ke,initialUploadName:S,onToneSelected:We,onToneSelectorCancelled:$e,toneEmoji:ye,uploading:J,emojiToDelete:ve,uploadErrorMessage:Xe,uploadEnabled:Q&&!J,onUploadEmoji:it,onUploadCancelled:Ne,onDeleteEmoji:ct,onCloseDelete:at,onFileChooserClicked:et,onOpenUpload:nt}),st&&Object(s.d)(kt,{selectedEmoji:Z})))};t.default=Object(l.memo)(xn)},2478:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(0))&&r.__esModule?r:{default:r},o=n(53);var a=function(e){return i.default.createElement(o.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path d="M16.436 15.085l3.94 4.01a1 1 0 01-1.425 1.402l-3.938-4.006a7.5 7.5 0 111.423-1.406zM10.5 16a5.5 5.5 0 100-11 5.5 5.5 0 000 11z" fill="currentColor" fill-rule="evenodd"/></svg>'},e))};a.displayName="SearchIcon";var c=a;t.default=c},2758:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(0))&&r.__esModule?r:{default:r},o=n(53);var a=function(e){return i.default.createElement(o.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path d="M12 4c-4.412 0-8 3.588-8 8s3.588 8 8 8 8-3.588 8-8-3.588-8-8-8zm0 14.222A6.23 6.23 0 015.778 12 6.23 6.23 0 0112 5.778 6.23 6.23 0 0118.222 12 6.23 6.23 0 0112 18.222zm.889-6.59V8.448c0-.489-.4-.889-.889-.889s-.889.4-.889.89v3.555c0 .248.103.471.268.633l2.195 2.194a.891.891 0 001.257 0 .891.891 0 000-1.256l-1.942-1.943z" fill="currentColor" fill-rule="evenodd"/></svg>'},e))};a.displayName="EmojiFrequentIcon";var c=a;t.default=c},2759:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(0))&&r.__esModule?r:{default:r},o=n(53);var a=function(e){return i.default.createElement(o.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path d="M12 4c-4.412 0-8 3.588-8 8s3.588 8 8 8 8-3.588 8-8-3.588-8-8-8zm0 14.222A6.23 6.23 0 015.778 12 6.23 6.23 0 0112 5.778 6.23 6.23 0 0118.222 12 6.23 6.23 0 0112 18.222zM14.83 14a3.001 3.001 0 01-5.66 0h5.66zM14 11a1 1 0 100-2 1 1 0 000 2zm-4 0a1 1 0 100-2 1 1 0 000 2z" fill="currentColor" fill-rule="evenodd"/></svg>'},e))};a.displayName="EmojiPeopleIcon";var c=a;t.default=c},2760:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(0))&&r.__esModule?r:{default:r},o=n(53);var a=function(e){return i.default.createElement(o.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path d="M13 16h3.625l-2.5-4h1.208L12 7l-3.333 5h1.208l-2.5 4H11v2h2v-2zm4.33-2.06l1.527 2.546A1 1 0 0118 18h-3c-.003 1.105-.9 2-1.998 2h-2.004A1.999 1.999 0 019 18H6a1 1 0 01-.857-1.514L6.67 13.94c-.6-.23-.888-1.068-.484-1.697l5-7.778c.4-.62 1.229-.62 1.628 0l5 7.778c.404.629.117 1.467-.484 1.697z" fill="currentColor" fill-rule="evenodd"/></svg>'},e))};a.displayName="EmojiNatureIcon";var c=a;t.default=c},2761:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(0))&&r.__esModule?r:{default:r},o=n(53);var a=function(e){return i.default.createElement(o.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path d="M9.425 4.798v.005L9.271 7H4.995a.881.881 0 00-.885.999L5.319 19c.06.552.556.999 1.108.999H17.99A2.006 2.006 0 0020 18v-3.99A3.998 3.998 0 0016.004 10H13.56l.294-2.001c.08-.552-.3-.999-.85-.999h-1.728l.075-1.07 3.002.21a1 1 0 001.058-.928.993.993 0 00-.919-1.067l-4.008-.28a1 1 0 00-1.059.933zM18 15v-1.002A2 2 0 0016.002 12h-4.004A1.993 1.993 0 0010 13.998V15h8zm0 2v1h-8v-1h8zm-6.111-6.999L12 9H6l1 9h1v-3.99A4.008 4.008 0 0111.889 10z" fill="currentColor" fill-rule="evenodd"/></svg>'},e))};a.displayName="EmojiFoodIcon";var c=a;t.default=c},2762:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(0))&&r.__esModule?r:{default:r},o=n(53);var a=function(e){return i.default.createElement(o.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path d="M15.677 16.738A5.97 5.97 0 0112 18a5.97 5.97 0 01-3.677-1.262 6.329 6.329 0 001.982-4.589 6.33 6.33 0 00-2.157-4.746A5.973 5.973 0 0112 6c1.465 0 2.808.528 3.851 1.403a6.33 6.33 0 00-2.156 4.746c0 1.751.736 3.41 1.982 4.589zm1.354-1.472c.613-.94.969-2.063.969-3.266 0-1.124-.31-2.176-.85-3.076a4.321 4.321 0 00-1.455 3.225c0 1.187.495 2.313 1.336 3.117zm-10.062 0A5.964 5.964 0 016 12c0-1.124.31-2.176.85-3.076a4.324 4.324 0 011.455 3.225 4.323 4.323 0 01-1.336 3.117zM12 4a8 8 0 100 16 8 8 0 000-16z" fill="currentColor" fill-rule="evenodd"/></svg>'},e))};a.displayName="EmojiActivityIcon";var c=a;t.default=c},2763:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(0))&&r.__esModule?r:{default:r},o=n(53);var a=function(e){return i.default.createElement(o.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path d="M15.584 17H8.416l-2.708 2.709a1.004 1.004 0 01-1.415 0l-.002-.002a1.004 1.004 0 010-1.415l1.618-1.617A1.998 1.998 0 015 14.997V6.003C5 4.897 5.897 4 7.006 4h9.988C18.102 4 19 4.894 19 6.003v8.994a2 2 0 01-.909 1.678l1.618 1.617a1.004 1.004 0 010 1.415 1.004 1.004 0 01-1.417.002L15.584 17zM17 10V6H7v4h10zm0 2v3H7v-3h10zm-1.5 6.997c0 .55-.45 1-1 1h-5c-.55 0-1-.45-1-1s.45-1 1-1h5c.55 0 1 .45 1 1zm.2-5.517a1 1 0 11-2 0 1 1 0 012 0zm-6.691 1a1 1 0 110-2 1 1 0 010 2z" fill="currentColor" fill-rule="evenodd"/></svg>'},e))};a.displayName="EmojiTravelIcon";var c=a;t.default=c},2764:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(0))&&r.__esModule?r:{default:r},o=n(53);var a=function(e){return i.default.createElement(o.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path d="M11.998 4A5.997 5.997 0 006 9.998c0 2.218 2.288 4.484 2.288 4.484.39.387.71 1.112.71 1.611 0 .499.45.907 1 .907h4c.55 0 1-.408 1-.907 0-.499.32-1.224.71-1.611 0 0 2.288-2.266 2.288-4.484A5.997 5.997 0 0011.998 4zm0 2a4.003 4.003 0 013.998 3.998c0 1.029-1.145 2.511-1.695 3.064-.507.501-.912 1.216-1.13 1.938h-2.346c-.217-.722-.622-1.435-1.125-1.934-.555-.557-1.7-2.039-1.7-3.068A4.003 4.003 0 0111.998 6zm2.965 13c0-.55-.45-1-1-1h-4c-.55 0-1 .45-1 1v.003c0 .55.45 1 1 1h4c.55 0 1-.45 1-1V19z" fill="currentColor" fill-rule="evenodd"/></svg>'},e))};a.displayName="EmojiObjectsIcon";var c=a;t.default=c},2765:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(0))&&r.__esModule?r:{default:r},o=n(53);var a=function(e){return i.default.createElement(o.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path d="M12 9.44l1.76-1.744a2.505 2.505 0 013.52 0 2.451 2.451 0 010 3.488L12 16.417l-5.28-5.232a2.451 2.451 0 010-3.49 2.505 2.505 0 013.52 0v.001L12 9.44zm-6.684 3.143l.003.004 6.322 6.266a.508.508 0 00.718 0l6.322-6.266.003-.004.004-.003a4.412 4.412 0 000-6.28 4.509 4.509 0 00-6.336 0l-.003.004-.004.003L12 6.65l-.345-.342-.004-.003-.003-.003a4.509 4.509 0 00-6.336 0 4.412 4.412 0 000 6.279l.004.003z" fill="currentColor" fill-rule="evenodd"/></svg>'},e))};a.displayName="EmojiSymbolsIcon";var c=a;t.default=c},2766:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(0))&&r.__esModule?r:{default:r},o=n(53);var a=function(e){return i.default.createElement(o.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path d="M6 12.235v6.446c0 .537.45.977 1 .977s1-.44 1-.977v-5.778c1.17-.341 2.389-.045 3.768.29.982.238 2.036.495 3.13.495a5.73 5.73 0 002.547-.567 1 1 0 00.563-.9V5.466a.998.998 0 00-1.437-.9c-1.345.654-2.731.317-4.331-.071-1.729-.42-3.687-.895-5.678.072A1 1 0 006 5.466v6.769zm3.111-1.48c1.094 0 2.148.256 3.129.495 1.381.335 2.6.63 3.768.289V6.836c-1.488.27-2.93-.08-4.24-.398-1.379-.335-2.598-.632-3.768-.29v4.704a6.195 6.195 0 011.111-.097z" fill="currentColor" fill-rule="evenodd"/></svg>'},e))};a.displayName="EmojiFlagsIcon";var c=a;t.default=c},2767:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(0))&&r.__esModule?r:{default:r},o=n(53);var a=function(e){return i.default.createElement(o.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" role="presentation"><g fill="currentColor"><path d="M12 18a6 6 0 100-12 6 6 0 000 12zm0 2a8 8 0 110-16 8 8 0 010 16z"/><path d="M14.301 9.485a1 1 0 011.398 1.43l-4.261 4.166a1 1 0 01-1.406-.008l-2.04-2.04a1 1 0 111.415-1.413l1.34 1.34L14.3 9.484z"/></g></svg>'},e))};a.displayName="EmojiProductivityIcon";var c=a;t.default=c},2768:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(0))&&r.__esModule?r:{default:r},o=n(53);var a=function(e){return i.default.createElement(o.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path d="M13 11V7.002a.999.999 0 10-2 0V11H7.002a.999.999 0 100 2H11v3.998a.999.999 0 102 0V13h3.998a.999.999 0 100-2H13z" fill="currentColor" fill-rule="evenodd"/></svg>'},e))};a.displayName="EmojiCustomIcon";var c=a;t.default=c}}]);