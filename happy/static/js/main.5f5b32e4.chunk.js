(this["webpackJsonphappy-author"]=this["webpackJsonphappy-author"]||[]).push([[39],{105:function(e,t,n){"use strict";(function(e){n.d(t,"m",(function(){return h})),n.d(t,"j",(function(){return O})),n.d(t,"n",(function(){return x})),n.d(t,"k",(function(){return v})),n.d(t,"l",(function(){return m})),n.d(t,"f",(function(){return g})),n.d(t,"g",(function(){return y})),n.d(t,"a",(function(){return I})),n.d(t,"c",(function(){return S})),n.d(t,"h",(function(){return D})),n.d(t,"b",(function(){return F})),n.d(t,"e",(function(){return B})),n.d(t,"d",(function(){return M})),n.d(t,"i",(function(){return U}));var r=n(58),c=n(56),a=n(49),o=n.n(a),i=n(79),s=n(200),u=n(1143),l=n(133),d=n(276),f=n(275),p=n(779),b=n(585);e.enabledFirestorePersistence||(e.enabledFirestorePersistence=!0,f.b.enablePersistence());var j=9999;function h(e,t,n){var r=G(e).limit(void 0===n?j:2);return void 0!==t&&(r=r.where("parentId","==",t)),Object(d.isOrdered)(e)&&(r=r.orderBy("order","asc"),n&&(r=r.startAfter(n))),Object(s.e)(r,{idField:"id"}).data}function O(e,t){var n=Object(s.d)().collection(Object(d.collectionPath)(e)).doc(t),r=Object(s.f)(n,{idField:"id"}).data;return 1===Object.keys(r).length?void 0:r}function x(e,t,n){return Object(l.useMacros)(t,(function(t,r){return h([e,t],r,n)}))}function v(e,t){var n=V;return Object(u.a)(n,[e,t])}function m(e,t){var n=Object(s.d)().collection(Object(d.collectionPath)(e)).doc(t),r=n.update.bind(n);return function(){var t=Object(i.a)(o.a.mark((function t(n){var c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ee(n),t.next=3,te(e,n);case 3:return c=K(n),t.next=6,r(c);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function g(e){return k.apply(this,arguments)}function k(){return(k=Object(i.a)(o.a.mark((function e(t){var n,c,a,i,s,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("books",t);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",void 0);case 5:c={},a=Object(r.a)(l.bookDataCollections),e.prev=7,a.s();case 9:if((i=a.n()).done){e.next=17;break}return s=i.value,e.next=13,J([t,s],void 0);case 13:u=e.sent,c[s]=u;case 15:e.next=9;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(7),a.e(e.t0);case 22:return e.prev=22,a.f(),e.finish(22);case 25:return e.abrupt("return",{book:n,data:c});case 26:case"end":return e.stop()}}),e,null,[[7,19,22,25]])})))).apply(this,arguments)}function y(e,t){return w.apply(this,arguments)}function w(){return(w=Object(i.a)(o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G(t).doc(n).get();case 2:return r=e.sent,e.abrupt("return",_(r));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t){return C.apply(this,arguments)}function C(){return(C=Object(i.a)(o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ee(n),e.next=3,te(t,n);case 3:return e.next=5,G(t).add(n);case 5:return r=e.sent,e.abrupt("return",r.id);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,t,n){return P.apply(this,arguments)}function P(){return(P=Object(i.a)(o.a.mark((function e(t,n,r){var c,a,i,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=Object(d.collectionFromPath)(t),a=Object(d.isOrdered)(t),e.t0=Object,e.t1=void 0===n?{}:{parentId:n},e.t2=b.a[c],!a){e.next=16;break}if(e.t4=r,e.t4){e.next=12;break}return e.next=10,X(t,n);case 10:e.t5=e.sent,e.t4=e.t5+1;case 12:e.t6=e.t4,e.t3={order:e.t6},e.next=17;break;case 16:e.t3={};case 17:if(e.t7=e.t3,i=e.t0.assign.call(e.t0,e.t1,e.t2,e.t7),"mListSelects"!==c&&"mListShows"!==c){e.next=27;break}return s=t[0],e.next=23,Z(s);case 23:if(e.t8=e.sent,e.t8){e.next=26;break}e.t8="";case 26:i.listId=e.t8;case 27:return e.next=29,I(t,i);case 29:return e.abrupt("return",e.sent);case 30:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e,t,n){return A.apply(this,arguments)}function A(){return(A=Object(i.a)(o.a.mark((function e(t,n,r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ee(r),e.next=3,te(t,r);case 3:return e.next=5,G(t).doc(n).set(r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e,t,n){return E.apply(this,arguments)}function E(){return(E=Object(i.a)(o.a.mark((function e(t,n,r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(t,n);case 2:if(e.sent){e.next=6;break}return e.next=6,D(t,n,r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e,t){return N.apply(this,arguments)}function N(){return(N=Object(i.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.b.runTransaction((function(e){return T(e,t,n)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e,t,n){return z.apply(this,arguments)}function z(){return(z=Object(i.a)(o.a.mark((function e(t,n,r){var c,a,s,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=function(){return(s=Object(i.a)(o.a.mark((function e(n){var a,i,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[c,n],e.next=3,G(a).where("parentId","==",r).get();case 3:return i=e.sent,s=i.docs.map((function(e){return T(t,a,e.id)})),e.next=7,Promise.all(s);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)},a=function(e){return s.apply(this,arguments)},t.delete(G(n).doc(r)),c=n[0],u=l.bookDataCollections.map(a),e.next=7,Promise.all(u);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e,t){return L.apply(this,arguments)}function L(){return(L=Object(i.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.b.runTransaction((function(e){return R(e,t,n)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e,t,n,r){return q.apply(this,arguments)}function q(){return(q=Object(i.a)(o.a.mark((function e(t,n,r,c){var a,s,u,d,f,p,b,j,h,O,x;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O=function(){return(O=Object(i.a)(o.a.mark((function e(r){var c,a,i,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=[b,r],a=[j,r],e.next=4,G(c).where("parentId","==",n.id).get();case 4:return i=e.sent,s=i.docs.map((function(e){return R(t,{bookIdAndDataCollection:c,id:e.id},{bookIdAndDataCollection:a,parentId:p},e.data())})),e.next=8,Promise.all(s);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)},h=function(e){return O.apply(this,arguments)},c){e.next=11;break}return a=G(n.bookIdAndDataCollection),s=a.doc(n.id),e.next=7,s.get();case 7:if(u=e.sent,c=u.data()){e.next=11;break}return e.abrupt("return");case 11:return d=G(r.bookIdAndDataCollection).doc(),f=Object.assign({},c,{parentId:r.parentId}),t.set(d,f),p=d.id,b=n.bookIdAndDataCollection[0],j=r.bookIdAndDataCollection[0],x=l.bookDataCollections.map(h),e.next=20,Promise.all(x);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e,t,n){return Q.apply(this,arguments)}function Q(){return(Q=Object(i.a)(o.a.mark((function e(t,n,r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G(t).doc(n).update({parentId:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){var t=e.data();if(t){var n=t;return n.id=e.id,n}}function K(e){var t=Object.assign({},e);return delete t.id,t}function G(e){return f.b.collection(Object(d.collectionPath)(e))}function J(e,t,n){return W.apply(this,arguments)}function W(){return(W=Object(i.a)(o.a.mark((function e(t,n,r){var c,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=G(t).limit(void 0===r?j:2),void 0!==n&&(c=c.where("parentId","==",n)),Object(d.isOrdered)(t)&&(c=c.orderBy("order","asc"),r&&(c=c.startAfter(r))),e.next=5,c.get();case 5:return a=e.sent,e.abrupt("return",a.docs.map((function(e){return _(e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e,t){return H.apply(this,arguments)}function H(){return(H=Object(i.a)(o.a.mark((function e(t,n){var r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[];case 1:if(!n){e.next=8;break}return e.next=4,y(t,n);case 4:(c=e.sent)?(r.push(c),n=c.parentId):n="",e.next=1;break;case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e,t){return Y.apply(this,arguments)}function Y(){return(Y=Object(i.a)(o.a.mark((function e(t,n){var r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=G(t).orderBy("order","desc").limit(1),void 0!==n&&(r=r.where("parentId","==",n)),e.next=4,r.get();case 4:return c=e.sent,e.abrupt("return",c.empty?0:c.docs[0].data().order);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e){return $.apply(this,arguments)}function $(){return($=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J([t,"lists"],void 0);case 2:return n=e.sent,e.abrupt("return",0===n.length?void 0:n[0].id);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var r=Object(c.a)(n[t],2),a=r[0];void 0===r[1]&&(e[a]="")}}function te(e,t){return ne.apply(this,arguments)}function ne(){return(ne=Object(i.a)(o.a.mark((function e(t,n){var r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=600,"mImages"!==(c=Object(d.collectionFromPath)(t))&&"mQuotes"!==c){e.next=8;break}return e.next=5,Object(p.a)(n.image,r);case 5:n.image=e.sent,e.next=12;break;case 8:if("pages"!==c||"string"!==typeof n.visual){e.next=12;break}return e.next=11,Object(p.a)(n.visual,r);case 11:n.visual=e.sent;case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}).call(this,n(143))},1143:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(274),c=n(1144),a=n.n(c);function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=n.category||e.toString(),o=n.lifespan||1e4,i=[c].concat(Object(r.a)(t)),s=function(){return e.apply(null,t)};return a()(s,i,o)}},1176:function(e,t){},1906:function(e,t){},1912:function(e,t){},1995:function(e,t,n){"use strict";n.r(t);var r=n(2),c=n(101),a=n.n(c),o=n(194),i=n(2196),s=n(200),u=n(134),l=n(2136),d=n(2134),f=n(630),p=(n(1585),n(56)),b=n(2209),j=n(2206),h=n(22),O=Object(u.b)({key:"snackbarState",default:{severity:"info",msg:""}});function x(){var e=Object(u.c)(O),t=Object(p.a)(e,2),n=t[0],r=n.severity,c=n.msg,a=t[1];return Object(h.jsx)(b.a,{open:c.length>0,autoHideDuration:3e3,onClose:function(){return a({severity:r,msg:""})},children:Object(h.jsx)(j.a,{severity:r,children:c})})}function v(){var e=Object(u.c)(O),t=Object(p.a)(e,2)[1];return function(e,n){return t({severity:e,msg:n})}}var m=n(2144),g=n(1256),k=Object(m.a)((function(e){return{paper:{marginBottom:e.spacing(2),padding:e.spacing(2)}}}));function y(e){var t=e.children,n=k();return Object(h.jsx)(g.a,{className:n.paper,children:t})}function w(){var e=Object(s.c)(),t=v();return Object(h.jsx)(l.a,{item:!0,md:6,sm:12,children:Object(h.jsx)(y,{children:Object(h.jsx)(f.a,{autoComplete:"off",schema:{type:"object",required:["email","password"],properties:{email:{type:"string",format:"email",title:"Email"},password:{type:"string",title:"Password"}}},uiSchema:{password:{"ui:widget":"password"}},onSubmit:function(n){var r,c,a=n.formData;return r=a.email,c=a.password,void e.signInWithEmailAndPassword(r,c).then((function(){}),(function(e){t("error","Could not login"),console.error(e)}))},children:Object(h.jsx)(d.a,{type:"submit",color:"primary",children:"Login"})})})})}var I=n(275),C=n(131),S=n(799),P=n(105),D=n(274),A=n(49),F=n.n(A),E=n(79),B=n(133),N=n(585),T=n(2145),z=n(2146),M=n(2147),L=n(2148),R=n(2149),q=Object(u.b)({key:"confirmDlgState",default:{open:!1,msg:"",onConfirm:function(){}}});function U(){var e=Object(u.c)(q),t=Object(p.a)(e,2),n=t[0],r=n.open,c=n.msg,a=n.onConfirm,o=t[1],i=function(){o({open:!1,msg:"",onConfirm:function(){}})};return Object(h.jsxs)(T.a,{open:r,onClose:i,children:[Object(h.jsx)(z.a,{children:"Confirm"}),Object(h.jsx)(M.a,{children:Object(h.jsx)(L.a,{children:c})}),Object(h.jsxs)(R.a,{children:[Object(h.jsx)(d.a,{onClick:function(){a(),i()},color:"secondary",children:"OK"}),Object(h.jsx)(d.a,{onClick:i,color:"primary",autoFocus:!0,children:"Cancel"})]})]})}var Q=n(127),_=n(234),K=n(236),G=n(238);function J(e,t){var n=document.createElement("a");n.setAttribute("href",t),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}function W(e,t){return e.replace(";base64",";name=".concat(encodeURIComponent(t),";base64"))}function V(e){var t=e.name,n=e.size,r=e.type;return new Promise((function(c,a){var o=new window.FileReader;o.onerror=a,o.onload=function(e){c({dataURL:W(e.target.result,t),name:t,size:n,type:r})},o.readAsDataURL(e)}))}function H(e){var t=e.filesInfo;return 0===t.length?null:Object(h.jsx)("ul",{className:"file-info",children:t.map((function(e,t){var n=e.name,r=e.size,c=e.type;return Object(h.jsxs)("li",{children:[Object(h.jsx)("strong",{children:n})," (",c,", ",r," bytes)",Object(h.jsx)("br",{}),Object(h.jsx)("button",{onClick:function(){return J(e.name,e.dataURL)},children:"Download"})]},t)}))})}function X(e){return e.filter((function(e){return"undefined"!==typeof e})).map((function(e){var t=function(e){var t,n=e.split(","),r=n[0].split(";"),c=r[0].replace("data:",""),a=r.filter((function(e){return"name"===e.split("=")[0]}));t=1!==a.length?"unknown":a[0].split("=")[1];for(var o=atob(n[1]),i=[],s=0;s<o.length;s++)i.push(o.charCodeAt(s));return{blob:new window.Blob([new Uint8Array(i)],{type:c}),name:t}}(e),n=t.blob;return{name:t.name,size:n.size,type:n.type,dataURL:e}}))}var Y=function(e){Object(K.a)(n,e);var t=Object(G.a)(n);function n(e){var r;Object(Q.a)(this,n),(r=t.call(this,e)).onChange=function(e){var t,n=r.props,c=n.multiple,a=n.onChange;(t=e.target.files,Promise.all([].map.call(t,V))).then((function(e){var t={values:e.map((function(e){return e.dataURL})),filesInfo:e};r.setState(t,(function(){a(c?t.values:t.values[0])}))}))};var c=e.value,a=Array.isArray(c)?c:[c];return r.state={values:a,filesInfo:X(a)},r}return Object(_.a)(n,[{key:"shouldComponentUpdate",value:function(e,t){return function(e,t,n){var r=e.props,c=e.state;return!$(r,t)||!$(c,n)}(this,e,t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.multiple,r=t.id,c=t.readonly,a=t.disabled,o=t.autofocus,i=t.options,s=this.state.filesInfo;return Object(h.jsxs)("div",{children:[Object(h.jsx)("p",{children:Object(h.jsx)("input",{ref:function(t){return e.inputRef=t},id:r,type:"file",disabled:c||a,onChange:this.onChange,defaultValue:"",autoFocus:o,multiple:n,accept:i.accept})}),Object(h.jsx)(H,{filesInfo:s})]})}}]),n}(r.Component);Y.defaultProps={autofocus:!1};var Z=Y;function $(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(e===t)return!0;if("function"===typeof e||"function"===typeof t)return!0;if("object"!==typeof e||"object"!==typeof t)return!1;if(null===e||null===t)return!1;if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(e instanceof RegExp&&t instanceof RegExp)return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(ee(e)||ee(t)){if(!ee(e)||!ee(t))return!1;var c=Array.prototype.slice;return $(c.call(e),c.call(t),n,r)}if(e.constructor!==t.constructor)return!1;var a=Object.keys(e),o=Object.keys(t);if(0===a.length&&0===o.length)return!0;if(a.length!==o.length)return!1;for(var i,s=n.length;s--;)if(n[s]===e)return r[s]===t;n.push(e),r.push(t),a.sort(),o.sort();for(var u=a.length-1;u>=0;u--)if(a[u]!==o[u])return!1;for(var l=a.length-1;l>=0;l--)if(!$(e[i=a[l]],t[i],n,r))return!1;return n.pop(),r.pop(),!0}function ee(e){return"[object Arguments]"===Object.prototype.toString.call(e)}var te=n(2003),ne=n(2150),re=Object(u.b)({key:"longRunningTaskState",default:{open:!1,msg:""}});function ce(){var e=Object(u.c)(re),t=Object(p.a)(e,2)[1];return function(){var e=Object(E.a)(F.a.mark((function e(n,r){var c;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({open:!0,msg:n}),e.prev=1,e.next=4,r();case 4:t({open:!1,msg:""}),e.next=13;break;case 7:e.prev=7,e.t0=e.catch(1),c="Error running task: ".concat(n),console.error(c,e.t0),t({open:!0,msg:c}),setTimeout((function(){return t({open:!1,msg:""})}),3e3);case 13:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}()}var ae=Object(m.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},msg:{margin:"1em"}}}));function oe(){var e=Object(u.c)(re),t=Object(p.a)(e,1)[0],n=t.open,r=t.msg,c=ae();return Object(h.jsxs)(te.a,{className:c.backdrop,open:n,children:[Object(h.jsx)(ne.a,{color:"inherit"}),Object(h.jsx)(S.a,{className:c.msg,children:r})]})}var ie=Object(m.a)((function(){return{buttons:{display:"flex",justifyContent:"space-between"}}}));function se(e){var t=e.bookId,n=e.collection,c=e.doc,a=e.onDelete,o=e.onCancel,i=ie(),s=ce(),l=v(),b=function(){var e=Object(u.c)(q),t=Object(p.a)(e,2)[1];return function(e,n){t({open:!0,msg:e,onConfirm:n})}}(),j=Object(C.g)(),O=Object(r.useState)(c),x=Object(p.a)(O,2),m=x[0],g=x[1],k=Object(r.useState)(ue(m)),w=Object(p.a)(k,2),I=w[0],S=w[1],D="books"===n?n:[t,n],A=Object(P.l)(D,c.id),T=function(){var e=Object(E.a)(F.a.mark((function e(){var t;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a&&a(),"string"!==typeof D){e.next=3;break}return e.abrupt("return");case 3:if("pages"!==(t=D)[1]){e.next=9;break}s("Deleting page...",Object(E.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(P.e)(t,c.id);case 2:l("info","Successfully deleted the page");case 3:case"end":return e.stop()}}),e)})))),e.next=19;break;case 9:return e.prev=9,e.next=12,Object(P.e)(t,c.id);case 12:l("info","Successfully deleted"),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(9),console.error("Successfully deleted document of ".concat(n,": ").concat(c.id)),l("error","Could not delete");case 19:case"end":return e.stop()}}),e,null,[[9,15]])})));return function(){return e.apply(this,arguments)}}();return Object(h.jsx)(y,{children:Object(h.jsx)(f.a,{autoComplete:"off",schema:B.jsonSchemas[n],uiSchema:N.b[n],widgets:{FileWidget:Z},formData:m,onSubmit:function(e){var t=e.formData;return A(t).then((function(){g(t),S(ue(t)),l("info","Successfully updated")}),(function(e){l("error","Could not update"),console.error(e)}))},children:Object(h.jsxs)("div",{className:i.buttons,children:[o&&Object(h.jsx)(d.a,{onClick:o,children:"Cancel"}),Object(h.jsx)(d.a,{type:"submit",color:"primary",children:"Update"}),"books"===n&&Object(h.jsx)(d.a,{color:"primary",onClick:function(){return j.push("/books/".concat(t))},children:"Edit content"}),"books"!==n&&Object(h.jsx)(d.a,{color:"secondary",onClick:function(){B.macroTypes.includes(n)?T():b("Do you want to delete this document of ".concat(n,"?"),T)},children:"Delete"})]})},I)})}function ue(e){var t=le(e);return"".concat(e.id,"-").concat(t.join("-"))}function le(e){for(var t=[],n=0,r=Object.keys(e);n<r.length;n++){var c=r[n];t.push(c);var a=e[c];"object"!==typeof a||Array.isArray(a)||t.push.apply(t,Object(D.a)(le(a)))}return t}var de=n(2154),fe=n(2155),pe=n(2142),be=n(2212),je=n(1147),he=n.n(je),Oe=n(159),xe=n(2153);function ve(){var e=Object(s.c)(),t=Object(s.g)().data,n=v(),r=Object(C.g)();return Object(h.jsx)("div",{children:Object(h.jsxs)(S.a,{children:[Object(h.jsx)(d.a,{color:"primary",onClick:function(){e.signOut().then((function(){return r.push("/")}),(function(e){n("error","Could not logout"),console.error(e)}))},children:"Logout"}),t.email]})})}var me=n(480),ge=n.n(me);function ke(){return(ke=Object(E.a)(F.a.mark((function e(t){var n,r;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(P.f)(t);case 2:return n=e.sent,r=ge()(n,{space:2}),e.next=6,we("backup/"+Ce(t,{timestamped:!0}),r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ye(){return(ye=Object(E.a)(F.a.mark((function e(t){var n,r;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(P.f)(t);case 2:return n=e.sent,r=ge()(n,{space:2}),e.next=6,we("backup/"+Ce(t,{timestamped:!0,tag:"publish"}),r);case 6:return e.next=8,we("publish/"+Ce(t),r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function we(e,t){return Ie.apply(this,arguments)}function Ie(){return(Ie=Object(E.a)(F.a.mark((function e(t,n){var r;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=I.c.ref(t),e.next=3,r.putString(n,void 0,{contentType:"text/json"}).then();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ce(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.timestamped,r=t.tag,c=n?"-"+Se():"",a=r?"-"+r:"";return"".concat(e,"/happy-").concat(e).concat(c).concat(a,".json")}function Se(){return(new Date).toISOString()}function Pe(){var e=Object(C.h)().bookId,t=Object(C.g)(),n=Object(P.j)("books",e),c=v();Object(r.useEffect)((function(){n||(console.error("Book not found: ".concat(e)),t.replace("/"))}));return n?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{children:[Object(h.jsx)(d.a,{color:"primary",onClick:function(){Object(P.f)(e).then((function(t){!function(e,t){var n=ge()(t,{space:2});J(e,"data:application/json;charset=utf-8,"+encodeURIComponent(n))}("happy-".concat(e,".json"),t)}),(function(e){c("error","Could not download"),console.error(e)}))},children:"Download"}),Object(h.jsx)(d.a,{color:"primary",onClick:function(){(function(e){return ke.apply(this,arguments)})(e).then((function(){c("info","Created backup")}),(function(e){c("error","Could not backup"),console.error(e)}))},children:"Backup"}),Object(h.jsx)(d.a,{color:"primary",onClick:function(){(function(e){return ye.apply(this,arguments)})(e).then((function(){c("info","Created backup and published")}),(function(e){c("error","Could not publish"),console.error(e)}))},children:"Publish"})]}),Object(h.jsx)(d.a,{color:"primary",onClick:function(){return t.push("/")},children:"View book list"})]}):Object(h.jsx)(h.Fragment,{})}var De=n(2151);function Ae(){var e=Object(C.h)().bookId,t=Object(C.g)(),n="#/books/".concat(e,"/question-playground");return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(j.a,{severity:"info",children:Object(h.jsx)(De.a,{href:n,onClick:function(){return t.push(n)},children:"Question generation playground"})}),Object(h.jsx)(j.a,{severity:"info",children:Object(h.jsx)(De.a,{href:"https://oblador.github.io/react-native-vector-icons/",target:"_blank",children:"Icons"})}),Object(h.jsx)(j.a,{severity:"info",children:Object(h.jsx)(De.a,{href:"https://translate.google.com/?hl=vi&sl=en&tl=vi&op=translate",target:"_blank",children:"Google Translate"})})]})}var Fe=n(106),Ee=n(2152),Be=n(2213),Ne=n(782),Te=n.n(Ne),ze=n(1146),Me=n.n(ze),Le=n(1145),Re=n.n(Le);function qe(){return(qe=Object(E.a)(F.a.mark((function e(t){var n,r,c,a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object.keys(B.topPageIds),r=0;case 2:if(!(r<n.length)){e.next=10;break}return c=n[r],a={parentId:t,order:r+1,id:c,title:c},e.next=7,Object(P.b)([t,"pages"],c,a);case 7:r++,e.next=2;break;case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ue(e){var t=e.msg;return Object(h.jsx)(S.a,{color:"error",children:t})}var Qe=function(e){Object(K.a)(n,e);var t=Object(G.a)(n);function n(e){var r;return Object(Q.a)(this,n),(r=t.call(this,e)).state={hasError:!1},r}return Object(_.a)(n,[{key:"render",value:function(){return this.state.hasError?Object(h.jsx)(Ue,{msg:this.props.errorMsg}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return console.error(e),{hasError:!0}}}]),n}(r.Component);function _e(e){return Object(h.jsx)(Qe,{errorMsg:e.errorMsg,children:Object(h.jsx)(r.Suspense,{fallback:Object(h.jsx)(ne.a,{}),children:e.children})})}var Ke=n(58),Ge=Object(u.b)({key:"docTreeState",default:{expandedNodeIds:["pages"],selectedNodeId:"pages"}});function Je(e,t,n){return"/books/".concat(e,"/").concat(t,"/").concat(n)}var We=Je;function Ve(){return Object(u.c)(Ge)}function He(){var e=Object(C.h)().bookId,t=Object(P.j)("books",e),n=Ve(),r=Object(p.a)(n,2),c=r[0],a=c.expandedNodeIds,o=c.selectedNodeId,i=r[1];return Object(h.jsxs)(y,{children:[Object(h.jsx)(S.a,{variant:"h5",children:null===t||void 0===t?void 0:t.title}),Object(h.jsx)(S.a,{variant:"h6",children:null===t||void 0===t?void 0:t.subtitle}),Object(h.jsxs)(Ee.a,{defaultCollapseIcon:Object(h.jsx)(Re.a,{}),defaultExpandIcon:Object(h.jsx)(Me.a,{}),expanded:a,selected:o,onNodeToggle:function(e,t){return i({expandedNodeIds:t,selectedNodeId:o})},children:[Object(h.jsx)(Xe,{bookId:e}),Object(h.jsx)(Ye,{bookId:e})]})]})}function Xe(e){var t=e.bookId;return Object(h.jsx)(Be.a,{nodeId:"lists",label:"Text lists",children:Object(h.jsx)(Ze,{bookId:t,collection:"lists",recursive:!1,level:0,parentId:t,labelMaker:function(e){return e.title}})})}function Ye(e){var t=e.bookId;return Object(r.useEffect)((function(){Object(P.g)("books",t).then((function(e){e&&function(e){qe.apply(this,arguments)}(t)}))}),[t]),Object(h.jsx)(Be.a,{nodeId:"pages",label:"Pages",children:Object(h.jsx)(Ze,{bookId:t,collection:"pages",recursive:!0,level:0,parentId:t,labelMaker:function(e){return e.title}})})}function Ze(e){return Object(h.jsx)(_e,{errorMsg:"Error loading ".concat(e.collection),children:Object(h.jsx)($e,Object(Fe.a)({},e))})}function $e(e){var t=e.bookId,n=e.collection,r=e.recursive,c=e.level,a=e.parentId,o=e.grandParentId,i=e.labelMaker,s=Object(C.g)(),u=Ve(),l=Object(p.a)(u,1)[0].selectedNodeId,d=Object(P.m)([t,n],a),f=v(),b=function(e){Object(P.c)([t,n],e).then((function(e){s.push(Je(t,n,e))}),(function(e){console.error(e),f("error","Could not add new document to ".concat(n))}))};return Object(h.jsxs)(h.Fragment,{children:[d.map((function(e){var o=e.id,u=We(t,n,o),l=Je(t,n,o);return Object(h.jsx)(Be.a,{nodeId:u,label:i(e),onLabelClick:function(e){e.preventDefault(),s.push(l)},children:r&&Object(h.jsx)(Ze,{bookId:t,collection:n,recursive:!0,level:c+1,parentId:o,grandParentId:a,labelMaker:i})},u)})),(a===t&&"pages"!==n||We(t,n,a)===l)&&Object(h.jsxs)(h.Fragment,{children:[c<=3&&Object(h.jsx)(Be.a,{nodeId:"add-doc-to-".concat(t,"-").concat(n,"-").concat(a),icon:Object(h.jsx)(Te.a,{}),label:"Add child",onClick:function(){return b(a)}}),o&&Object(h.jsx)(Be.a,{nodeId:"add-doc-to-".concat(t,"-").concat(n,"-").concat(o),icon:Object(h.jsx)(Te.a,{}),label:"Add sibling",onClick:function(){return b(o)}})]})]})}function et(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(C.b,{path:"/books/:bookId",children:Object(h.jsx)(He,{})}),Object(h.jsxs)(y,{children:[Object(h.jsxs)(C.b,{path:"/books/:bookId",children:[Object(h.jsx)(Ae,{}),Object(h.jsx)(Pe,{})]}),Object(h.jsx)(ve,{})]})]})}function tt(){var e=Object(Oe.a)();return Object(xe.a)(e.breakpoints.up("md"))}function nt(e){var t=e.title,n=tt(),c=Object(r.useState)(!1),a=Object(p.a)(c,2),o=a[0],i=a[1];return Object(h.jsx)(de.a,{position:"static",children:Object(h.jsxs)(fe.a,{children:[!n&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(pe.a,{color:"inherit",edge:"start",onClick:function(){return i(!0)},children:Object(h.jsx)(he.a,{})}),Object(h.jsx)(be.a,{anchor:"left",open:o,onClose:function(){return i(!1)},children:Object(h.jsx)(et,{})})]}),Object(h.jsx)(S.a,{children:t})]})})}function rt(e){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(nt,{title:e.title}),Object(h.jsx)("div",{style:{marginTop:"1em"},children:Object(h.jsx)(_e,{errorMsg:"There's error, please try reloading this web page.",children:e.children})})]})}var ct=Object(h.jsx)(C.b,{path:"/",exact:!0,children:Object(h.jsx)(rt,{title:"Books",children:Object(h.jsx)(at,{})})});function at(){var e=Object(P.m)("books",void 0);return e.sort((function(e,t){return e.title<t.title?-1:1})),Object(h.jsxs)(h.Fragment,{children:[e.map((function(e){return Object(h.jsx)(se,{bookId:e.id,collection:"books",doc:e,onDelete:function(){}},e.id)})),Object(h.jsx)(d.a,{color:"primary",onClick:function(){return Object(P.c)("books",void 0)},children:"Add book"}),Object(h.jsx)(j.a,{severity:"info",children:Object(h.jsx)(S.a,{children:"Deleting books from this admin UI is not effecient for the system. If you want to delete a book, please contact a DB admin."})})]})}var ot=Object(h.jsx)(C.b,{path:"/books/:bookId",exact:!0,children:Object(h.jsx)(rt,{title:"Edit book",children:Object(h.jsx)(it,{})})});function it(){return Object(h.jsx)(S.a,{children:"Please start from the sidebar."})}var st=n(1250),ut=n(1248),lt=(n(1990),n(1991),{status:"pending",promise:null,result:null});function dt(e,t){if("fulfilled"===e.status)return e.result;if("rejected"===e.status)throw e.result;throw e.promise||(e.promise=t().then((function(t){"pending"===e.status&&(e.status="fulfilled",e.promise=null,e.result=t)}),(function(t){"pending"===e.status&&(e.status="rejected",e.promise=null,e.result=t)}))),e.promise}var ft=function(e){var t={status:"pending",promise:null,result:null};return function(c){var a=dt(lt,(function(){return n.e(59).then(n.bind(null,3034))})).default,o=dt(t,e).default,i=Object(r.useRef)(null),s=Object(r.useRef)(null);return Object(r.useLayoutEffect)((function(){s.current||(s.current=a(i.current));var e=s.current;return function(){e.unmount()}}),[a]),Object(r.useLayoutEffect)((function(){s.current&&s.current.render(o,c)}),[o,c]),Object(h.jsx)("div",{style:{display:"contents"},ref:i})}}((function(){return Promise.resolve().then(n.bind(null,1248))}));function pt(e){var t=e.bookId,n=e.pageId,r=Object(P.n)(t,n),c=v();return Object(h.jsx)(_e,{errorMsg:"Could not render macros",children:Object(h.jsx)(ft,{pageId:n,before:r,onSave:function(e){var n=e.after,a=e.create,o=e.update,i=e.remove,s=Promise.all(a.map((function(e){var r=n[e],c=[t,r.macroType];return Object(P.a)(c,r.doc).then((function(e){return r.doc.id=e}))}))),u=Promise.all(o.map((function(e){var r=n[e],c=[t,r.macroType];return Object(P.h)(c,r.doc.id,r.doc)}))),l=Promise.all(i.map((function(e){var n=r[e],c=[t,n.macroType];return Object(P.e)(c,n.doc.id)})));return Promise.all([s,u,l]).then((function(){return c("info","Successfully updated"),n}),(function(e){return c("error","Could not update"),console.error(e),n}))}},"".concat(t,"-").concat(n))})}var bt=Object(u.b)({key:"srcPageState",default:{srcBookId:"",srcPage:void 0}});function jt(e){var t=e.bookId,n=e.currentPageAndAncestors,r=Object(u.c)(bt),c=Object(p.a)(r,2),a=c[0],o=a.srcBookId,i=a.srcPage,s=c[1],l=ce(),f=v(),b=n[0],j=Object.keys(B.topPageIds).includes(b.id),O=Object(h.jsx)(d.a,{color:"secondary",onClick:function(){s({srcBookId:t,srcPage:b}),f("info","Select a page at the page tree to copy/move to")},children:"Copy/move this page"});if(!i)return j?null:O;if(i&&i.id===b.id)return null;if(function(e,t,n,r){if(e!==n)return!1;var c,a=Object(Ke.a)(r);try{for(a.s();!(c=a.n()).done;){if(c.value.id===t.id)return!0}}catch(o){a.e(o)}finally{a.f()}return!1}(o,i,t,n))return O;if(function(e,t,n,r){if(e!==n)return!1;return t.parentId===r.id}(o,i,t,b))return O;var x=Object(h.jsx)(d.a,{color:"secondary",onClick:Object(E.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s({srcBookId:"",srcPage:void 0}),l("Copying page...",Object(E.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(P.d)({bookIdAndDataCollection:[o,"pages"],id:i.id},{bookIdAndDataCollection:[t,"pages"],parentId:b.id});case 2:f("info","Page copy finished");case 3:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e)}))),children:"Copy it here"}),m=Object(h.jsx)(d.a,{color:"secondary",onClick:Object(E.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s({srcBookId:"",srcPage:void 0}),e.next=3,Object(P.i)([t,"pages"],i.id,b.id);case 3:f("info","Page move finished");case 4:case"end":return e.stop()}}),e)}))),children:"Move it here"}),g=Object(h.jsx)(De.a,{href:"/#/books/".concat(t,"/pages/").concat(i.id),target:"_blank",children:"Page to move"});return Object(h.jsxs)(h.Fragment,{children:[g,x,o===t&&m,O]})}var ht=[["lists","Edit text list"],["pages","Edit page"]].map((function(e){var t=Object(p.a)(e,2),n=t[0],r=t[1];return Object(h.jsx)(C.b,{path:"/books/:bookId/".concat(n,"/:bookDataId"),exact:!0,children:Object(h.jsx)(rt,{title:r,children:Object(h.jsx)(Ot,{collection:n})})},n)}));function Ot(e){var t=e.collection,n=Object(C.h)(),c=n.bookId,a=n.bookDataId,o=Object(P.k)([c,t],a),i=function(){var e=Object(u.c)(Ge),t=Object(p.a)(e,2),n=t[0].expandedNodeIds,c=t[1];return Object(r.useCallback)((function(e,t,r,a){var o,i=We(e,t,r),s=Object(D.a)(n),u=Object(Ke.a)(a);try{for(u.s();!(o=u.n()).done;){var l=o.value,d=We(e,t,l);s.includes(d)||s.push(d)}}catch(p){u.e(p)}finally{u.f()}var f=s.length!==n.length;c({expandedNodeIds:f?s:n,selectedNodeId:i})}),[n,c])}(),s=Object(C.g)(),l=Object(r.useState)(!1),f=Object(p.a)(l,2),b=f[0],j=f[1],O=o.map((function(e){return e.id}));if(Object(st.a)((function(){return i(c,t,a,O)}),[i,c,t,a,O]),0===o.length)return Object(h.jsx)(Ue,{msg:"Could not load data to edit"});var x=B.shortJsonSchemas[t],v=Object.keys(x.properties),m=o[0],k="".concat(c,"/").concat(t,"/").concat(a);return Object(h.jsxs)(h.Fragment,{children:["pages"===t&&Object(h.jsx)(jt,{bookId:c,currentPageAndAncestors:o}),b?Object(h.jsx)(se,{bookId:c,collection:t,doc:m,onDelete:function(){return s.push("/books/".concat(c))},onCancel:function(){return j(!1)}},k):Object(h.jsxs)(g.a,{style:{padding:"1em",marginBottom:"1em"},children:[Object(h.jsx)(ut.DocShow,{doc:m,sortKeys:v}),Object(h.jsx)(d.a,{color:"primary",onClick:function(){return j(!0)},children:"Edit"})]}),"pages"===t&&Object(h.jsx)(_e,{errorMsg:"Could not load macros",children:Object(h.jsx)(pt,{bookId:c,pageId:a},k)})]})}var xt=n(2202),vt=n(1247),mt=n.n(vt),gt=Object(h.jsx)(C.b,{path:"/books/:bookId/question-playground",children:Object(h.jsx)(rt,{title:"Question generation playground",children:Object(h.jsx)(kt,{})})});function kt(){var e=Object(r.useState)(""),t=Object(p.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)([]),o=Object(p.a)(a,2),i=o[0],s=o[1],u=Object(r.useState)([]),l=Object(p.a)(u,2),f=l[0],b=l[1],j=Object(r.useState)([]),O=Object(p.a)(j,2),x=O[0],v=O[1],m=Object(r.useState)(!1),g=Object(p.a)(m,2),k=g[0],y=g[1],w=Object(r.useState)(""),I=Object(p.a)(w,2),C=I[0],P=I[1];return Object(h.jsxs)(h.Fragment,{children:[!k&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(xt.a,{fullWidth:!0,multiline:!0,rows:10,value:n,onChange:function(e){return c(e.target.value)}}),Object(h.jsx)(d.a,{color:"primary",disabled:0===n.trim().length,onClick:Object(E.a)(F.a.mark((function e(){var t,r,c,a,o,i,u,l,d,f,p,j;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y(!0),P(""),s([]),b([]),v([]),t=mt.a.sentences(n,{newline_boundaries:!0}),s(t),r=[],c=[],e.prev=9,a=Object(Ke.a)(t),e.prev=11,a.s();case 13:if((o=a.n()).done){e.next=42;break}return i=o.value,e.next=17,It(i);case 17:u=e.sent,r.push(u),l=[],d=Object(Ke.a)(u),e.prev=21,d.s();case 23:if((f=d.n()).done){e.next=31;break}return p=f.value,e.next=27,St(p,i);case 27:j=e.sent,l.push(j);case 29:e.next=23;break;case 31:e.next=36;break;case 33:e.prev=33,e.t0=e.catch(21),d.e(e.t0);case 36:return e.prev=36,d.f(),e.finish(36);case 39:c.push(l);case 40:e.next=13;break;case 42:e.next=47;break;case 44:e.prev=44,e.t1=e.catch(11),a.e(e.t1);case 47:return e.prev=47,a.f(),e.finish(47);case 50:b(r),v(c),e.next=57;break;case 54:e.prev=54,e.t2=e.catch(9),P(e.t2.message);case 57:y(!1);case 58:case"end":return e.stop()}}),e,null,[[9,54],[11,44,47,50],[21,33,36,39]])}))),children:"Generate questions"})]}),k&&Object(h.jsx)(ne.a,{}),C.length>0&&Object(h.jsx)(Ue,{msg:C}),i.map((function(e,t){return Object(h.jsxs)("div",{children:[Object(h.jsxs)(S.a,{children:[t+1,". ",e]}),f[t]&&x[t]&&Object(h.jsx)("div",{children:f[t].map((function(e,n){return Object(h.jsxs)("div",{children:[Object(h.jsxs)(S.a,{children:["Q: ",e]}),Object(h.jsxs)(S.a,{children:["A: ",x[t][n]]})]},n)}))},t),Object(h.jsx)("hr",{})]},t)}))]})}var yt="https://api-inference.huggingface.co",wt="api_DwXNmIqfMrkqtAsBPajwkjVDLzUNGeFzBr";function It(e){return Ct.apply(this,arguments)}function Ct(){return(Ct=Object(E.a)(F.a.mark((function e(t){var n,r,c,a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(yt,"/models/valhalla/t5-base-e2e-qg"),{headers:{authorization:"Bearer ".concat(wt)},body:JSON.stringify({inputs:"generate questions: ".concat(t," </s>")}),method:"POST"});case 2:if((n=e.sent).ok){e.next=8;break}return e.next=6,n.text();case 6:throw r=e.sent,new Error(r);case 8:return e.next=10,n.json();case 10:return c=e.sent,a=c[0].generated_text,e.abrupt("return",a.split("<sep>").map((function(e){return e.trim()})).filter((function(e){return e.length>0})));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function St(e,t){return Pt.apply(this,arguments)}function Pt(){return(Pt=Object(E.a)(F.a.mark((function e(t,n){var r,c,a,o;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(yt,"/models/valhalla/t5-base-qa-qg-hl"),{headers:{authorization:"Bearer ".concat(wt)},body:JSON.stringify({inputs:"question: ".concat(t,"  context: ").concat(n," </s>")}),method:"POST"});case 2:if((r=e.sent).ok){e.next=8;break}return e.next=6,r.text();case 6:throw c=e.sent,new Error(c);case 8:return e.next=10,r.json();case 10:return a=e.sent,o=a[0].generated_text,e.abrupt("return",o);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dt(){var e=tt();return Object(h.jsxs)(l.a,{container:!0,spacing:e?2:0,children:[e&&Object(h.jsx)(l.a,{item:!0,md:5,children:Object(h.jsx)(et,{})}),Object(h.jsx)(l.a,{item:!0,md:7,sm:12,children:Object(h.jsxs)(C.d,{children:[ct,ot,ht,gt,Object(h.jsx)(C.a,{from:"*",to:"/"})]})})]})}function At(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(i.a,{}),Object(h.jsx)(_e,{errorMsg:"There's error, please try reloading this page",children:Object(h.jsx)(u.a,{children:Object(h.jsxs)(o.a,{children:[Object(h.jsx)(x,{}),Object(h.jsx)(U,{}),Object(h.jsx)(oe,{}),Object(h.jsx)(s.b,{firebaseApp:I.a,suspense:!0,children:Object(h.jsx)(s.a,{fallback:Object(h.jsx)(w,{}),children:Object(h.jsx)(Dt,{})})})]})})})]})}a.a.render(Object(h.jsx)(At,{}),document.getElementById("root"))},275:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o}));var r=n(239),c=(n(1998),n(1999),r.a.initializeApp({apiKey:"AIzaSyB-svyOf1GKrlLnGCNWFo7SA9xMzKKLkys",projectId:"happy-child-302620",authDomain:"localhost",storageBucket:"gs://happy-child-302620.appspot.com"})),a=r.a.firestore(c),o=r.a.storage(c);e.firestore=a}).call(this,n(143))},585:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return b}));var r,c=n(56),a=n(58),o=n(133),i=Object(a.a)(o.collections);try{for(i.s();!(r=i.n()).done;){var s=r.value;delete o.jsonSchemas[s].properties.id,delete o.jsonSchemas[s].properties.parentId}}catch(j){i.e(j)}finally{i.f()}var u,l={},d=Object(a.a)(o.collections);try{for(d.s();!(u=d.n()).done;){var f=u.value;l[f]={}}}catch(j){d.e(j)}finally{d.f()}var p={"ui:widget":"textarea","ui:options":{rows:20}};l.mMarkdowns.text=p,l.mSurveys.question=p,l.mQuizTests.instruction=p,l.mQuizzes.question=p,l.mQuizzes.explanation=p,l.mQuotes.quote=p;var b={};o.collections.forEach((function(e){var t=o.jsonSchemas[e].properties;b[e]={};for(var n=0,r=Object.entries(t);n<r.length;n++){var a=Object(c.a)(r[n],2),i=a[0],s=a[1];b[e][i]=s.default}}))},779:function(e,t,n){"use strict";function r(e,t){return e?new Promise((function(n){var r=new Image;r.onload=function(){if(r.width<=t)n(e);else{var c=function(e,t){var n=e.height*t/e.width,r=document.createElement("canvas");return r.width=t,r.height=n,r.getContext("2d").drawImage(e,0,0,t,n),r.toDataURL("image/jpeg",.7)}(r,t);n(c)}},r.src=e})):Promise.resolve("")}n.d(t,"a",(function(){return r}))}},[[1995,40,41]]]);