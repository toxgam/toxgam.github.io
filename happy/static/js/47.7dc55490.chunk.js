/*! For license information please see 47.7dc55490.chunk.js.LICENSE.txt */
(this["webpackJsonphappy-author"]=this["webpackJsonphappy-author"]||[]).push([[47,26,27,28],{2228:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(0)),i=o(n(43));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e){return r.default.createElement(i.default,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path d="M12 10.586L6.707 5.293a1 1 0 00-1.414 1.414L10.586 12l-5.293 5.293a1 1 0 001.414 1.414L12 13.414l5.293 5.293a1 1 0 001.414-1.414L13.414 12l5.293-5.293a1 1 0 10-1.414-1.414L12 10.586z" fill="currentColor"/></svg>'},e))};a.displayName="CrossIcon";var c=a;t.default=c},2241:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));var r=n(218),i=function(e,t){var n=["audio","video","image"];return Object(r.a)("newCardExperience",t)?[].concat(n,["doc"]).indexOf(e)>-1:n.indexOf(e)>-1},o=function(e){return!!e.mediaType&&!!e.mimeType&&!!e.processingStatus}},2255:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(0),i=n.n(r),o=i.a.createElement("svg",{viewBox:"0 0 163.28 218"},i.a.createElement("defs",null,i.a.createElement("style",null,"\n.cls-1{fill:url(#linear-gradient);}\n.cls-2{fill:#253858;}\n.cls-3{fill:#ffc400;}\n.cls-4{fill:#ffab00;}\n.cls-5,.cls-6{fill:none;stroke-linecap:round;stroke-miterlimit:10;stroke-width:2px;}\n.cls-5{stroke:#344563;}\n.cls-6{stroke:#5e6c84;}\n"),i.a.createElement("linearGradient",{id:"linear-gradient",x1:"133.86",y1:"136.43",x2:"-2.79",y2:"200.15",gradientUnits:"userSpaceOnUse"},i.a.createElement("stop",{offset:"0",stopColor:"#ffd740"}),i.a.createElement("stop",{offset:"1",stopColor:"#ffab00"})),i.a.createElement("clipPath",null,i.a.createElement("path",{className:"cls-1",d:"M94.78,80.16l66.44,115.08A15.17,15.17,0,0,1,148.08,218H15.2A15.17,15.17,0,0,1,2.06,195.24L68.5,80.16A15.17,15.17,0,0,1,94.78,80.16Z"}))),i.a.createElement("g",null,i.a.createElement("g",null,i.a.createElement("path",{className:"cls-1",d:"M94.78,80.16l66.44,115.08A15.17,15.17,0,0,1,148.08,218H15.2A15.17,15.17,0,0,1,2.06,195.24L68.5,80.16A15.17,15.17,0,0,1,94.78,80.16Z"}),i.a.createElement("path",{className:"cls-2",d:"M87.22,163.71l2.88-44.35a9.18,9.18,0,0,0-9.16-9.78h0a9.18,9.18,0,0,0-9.16,9.78l2.88,44.35a6.3,6.3,0,0,0,6.28,5.89h0A6.3,6.3,0,0,0,87.22,163.71Z"}),i.a.createElement("path",{className:"cls-2",d:"M71.38,187.25a9.53,9.53,0,0,0,10.39,9.58,9.68,9.68,0,0,0-.9-19.32A9.64,9.64,0,0,0,71.38,187.25Z"}),i.a.createElement("path",{className:"cls-3",d:"M91.7,27.17,84.29.45A.61.61,0,0,0,83.1.5L78.44,25.6l-5.8-1.08a.61.61,0,0,0-.7.76L79.35,52A.61.61,0,0,0,80.54,52l4.66-25.1L91,27.93A.61.61,0,0,0,91.7,27.17Z"}),i.a.createElement("path",{className:"cls-4",d:"M65.12,41.81,54.24,33.26a.27.27,0,0,0-.41.33L59.36,45,56.7,46.31a.27.27,0,0,0,0,.45l10.87,8.55a.27.27,0,0,0,.41-.33L62.41,43.55l2.66-1.29A.27.27,0,0,0,65.12,41.81Z"}),i.a.createElement("path",{className:"cls-5",d:"M115.15,36.6c-1.17,1.59-11-5.6-12.16-4s8.66,8.79,7.5,10.39-11-5.6-12.17-4,8.66,8.79,7.49,10.39-11-5.6-12.17-4,8.66,8.79,7.49,10.39"}),i.a.createElement("path",{className:"cls-6",d:"M119.92,64.19c-1.46,1.33-7.05-4.78-8.51-3.44s4.13,7.45,2.67,8.78-7.05-4.78-8.51-3.44c-.68.62.16,2.27,1.11,4"}),i.a.createElement("path",{className:"cls-6",d:"M44.8,64c1.82.77,5-6.87,6.86-6.1s-1.39,8.4.43,9.17,5-6.87,6.86-6.1c.85.36.61,2.19.29,4.13"}))))},2268:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(0)),i=o(n(43));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e){return r.default.createElement(i.default,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><rect fill="currentColor" x="4" y="4" width="16" height="16" rx="2"/><path d="M16 9.283V13.6h-.003A1.5 1.5 0 1114.5 12c.175 0 .344.03.5.085v-2.08l-4 .431V14.6h-.003A1.5 1.5 0 018 14.5a1.5 1.5 0 012-1.415V9.034c0-.238.186-.451.432-.478l5.136-.553a.38.38 0 01.432.384v.896z" fill="inherit"/></svg>'},e))};a.displayName="MediaServicesAudioIcon";var c=a;t.default=c},2317:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(0)),i=o(n(43));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e){return r.default.createElement(i.default,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><g fill-rule="evenodd"><rect fill="currentColor" x="4" y="4" width="16" height="16" rx="2"/><circle fill="inherit" cx="8.667" cy="8.667" r="2"/><path fill="inherit" d="M6.667 17.333l2.666-2.666L12 17.333z"/><path fill="inherit" d="M14.667 12l2.666 2.933v2.4h-8z"/></g></svg>'},e))};a.displayName="MediaServicesImageIcon";var c=a;t.default=c},2318:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(0)),i=o(n(43));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e){return r.default.createElement(i.default,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><g fill-rule="evenodd"><rect fill="currentColor" x="4" y="4" width="16" height="16" rx="2"/><rect fill="inherit" x="7" y="8" width="10" height="2" rx="1"/><rect fill="inherit" x="7" y="11" width="10" height="2" rx="1"/><rect fill="inherit" x="7" y="14" width="5" height="2" rx="1"/></g></svg>'},e))};a.displayName="MediaServicesDocumentIcon";var c=a;t.default=c},2319:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(0)),i=o(n(43));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e){return r.default.createElement(i.default,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><g fill-rule="evenodd"><rect fill="currentColor" x="4" y="4" width="16" height="16" rx="2"/><path d="M12 11h3.502a.5.5 0 01.498.491v4.518A.993.993 0 0115 17H9.01C8.451 17 8 16.544 8 16.005v-8.01C8 7.445 8.443 7 9.01 7h2.5a.5.5 0 01.49.51V11zm1-4l3 3h-3V7z" fill="inherit"/></g></svg>'},e))};a.displayName="MediaServicesUnknownIcon";var c=a;t.default=c},2378:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(0)),i=o(n(43));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e){return r.default.createElement(i.default,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path fill="currentColor" fill-rule="evenodd" d="M7 3L2 6.202l5 3.202-5 3.202 5 3.202 5-3.202 5 3.202 5-3.202-5-3.202 5-3.202L17 3l-5 3.202L7 3zm5 3.202l5 3.202-5 3.202-5-3.202 5-3.202zm0 13.875l-5-3.202 5-3.202 5 3.202-5 3.202z" clip-rule="evenodd"/></svg>'},e))};a.displayName="DropboxIcon";var c=a;t.default=c},2379:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(0)),i=o(n(43));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e){return r.default.createElement(i.default,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path d="M15.81 3l-6.776.068 5.846 10.126 6.777-.07L15.811 3zM2 14.315l3.447 5.835 5.846-10.126L7.846 4.19 2 14.315zm8.307.175l-3.33 5.902H18.67L22 14.49H10.307z" fill="currentColor" fill-rule="evenodd"/></svg>'},e))};a.displayName="GoogledriveIcon";var c=a;t.default=c},2380:function(e,t,n){var r;!function(i){"use strict";var o=function(){var e=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|'[^']*'|'[^']*'/g,t=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,n=/[^-+\dA-Z]/g;return function(r,i,l,f){if(1!==arguments.length||"string"!==s(r)||/\d/.test(r)||(i=r,r=void 0),(r=r||new Date)instanceof Date||(r=new Date(r)),isNaN(r))throw TypeError("Invalid date");var p=(i=String(o.masks[i]||i||o.masks.default)).slice(0,4);"UTC:"!==p&&"GMT:"!==p||(i=i.slice(4),l=!0,"GMT:"===p&&(f=!0));var d=l?"getUTC":"get",v=r[d+"Date"](),h=r[d+"Day"](),m=r[d+"Month"](),y=r[d+"FullYear"](),g=r[d+"Hours"](),b=r[d+"Minutes"](),O=r[d+"Seconds"](),w=r[d+"Milliseconds"](),E=l?0:r.getTimezoneOffset(),j=c(r),x=u(r),P={d:v,dd:a(v),ddd:o.i18n.dayNames[h],dddd:o.i18n.dayNames[h+7],m:m+1,mm:a(m+1),mmm:o.i18n.monthNames[m],mmmm:o.i18n.monthNames[m+12],yy:String(y).slice(2),yyyy:y,h:g%12||12,hh:a(g%12||12),H:g,HH:a(g),M:b,MM:a(b),s:O,ss:a(O),l:a(w,3),L:a(Math.round(w/10)),t:g<12?"a":"p",tt:g<12?"am":"pm",T:g<12?"A":"P",TT:g<12?"AM":"PM",Z:f?"GMT":l?"UTC":(String(r).match(t)||[""]).pop().replace(n,""),o:(E>0?"-":"+")+a(100*Math.floor(Math.abs(E)/60)+Math.abs(E)%60,4),S:["th","st","nd","rd"][v%10>3?0:(v%100-v%10!=10)*v%10],W:j,N:x};return i.replace(e,(function(e){return e in P?P[e]:e.slice(1,e.length-1)}))}}();function a(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e}function c(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);var n=new Date(t.getFullYear(),0,4);n.setDate(n.getDate()-(n.getDay()+6)%7+3);var r=t.getTimezoneOffset()-n.getTimezoneOffset();t.setHours(t.getHours()-r);var i=(t-n)/6048e5;return 1+Math.floor(i)}function u(e){var t=e.getDay();return 0===t&&(t=7),t}function s(e){return null===e?"null":void 0===e?"undefined":"object"!==typeof e?typeof e:Array.isArray(e)?"array":{}.toString.call(e).slice(8,-1).toLowerCase()}o.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},o.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},void 0===(r=function(){return o}.call(t,n,t,e))||(e.exports=r)}()},2381:function(e,t,n){"use strict";(function(t){!function(t){var n=/^(b|B)$/,r={iec:{bits:["b","Kib","Mib","Gib","Tib","Pib","Eib","Zib","Yib"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["b","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},i={iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]};function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=[],a=0,c=void 0,u=void 0,s=void 0,l=void 0,f=void 0,p=void 0,d=void 0,v=void 0,h=void 0,m=void 0,y=void 0,g=void 0,b=void 0,O=void 0,w=void 0;if(isNaN(e))throw new Error("Invalid arguments");return s=!0===t.bits,y=!0===t.unix,u=t.base||2,m=void 0!==t.round?t.round:y?1:2,g=void 0!==t.separator&&t.separator||"",b=void 0!==t.spacer?t.spacer:y?"":" ",w=t.symbols||t.suffixes||{},O=2===u&&t.standard||"jedec",h=t.output||"string",f=!0===t.fullform,p=t.fullforms instanceof Array?t.fullforms:[],c=void 0!==t.exponent?t.exponent:-1,l=u>2?1e3:1024,(d=(v=Number(e))<0)&&(v=-v),(-1===c||isNaN(c))&&(c=Math.floor(Math.log(v)/Math.log(l)))<0&&(c=0),c>8&&(c=8),0===v?(o[0]=0,o[1]=y?"":r[O][s?"bits":"bytes"][c]):(a=v/(2===u?Math.pow(2,10*c):Math.pow(1e3,c)),s&&(a*=8)>=l&&c<8&&(a/=l,c++),o[0]=Number(a.toFixed(c>0?m:0)),o[1]=10===u&&1===c?s?"kb":"kB":r[O][s?"bits":"bytes"][c],y&&(o[1]="jedec"===O?o[1].charAt(0):c>0?o[1].replace(/B$/,""):o[1],n.test(o[1])&&(o[0]=Math.floor(o[0]),o[1]=""))),d&&(o[0]=-o[0]),o[1]=w[o[1]]||o[1],"array"===h?o:"exponent"===h?c:"object"===h?{value:o[0],suffix:o[1],symbol:o[1]}:(f&&(o[1]=p[c]?p[c]:i[O][c]+(s?"bit":"byte")+(1===o[0]?"":"s")),g.length>0&&(o[0]=o[0].toString().replace(".",g)),o.join(b))}o.partial=function(e){return function(t){return o(t,e)}},e.exports=o}("undefined"!==typeof window&&window)}).call(this,n(143))},2383:function(e,t,n){"use strict";n.r(t),n.d(t,"BrowserBase",(function(){return P})),n.d(t,"Browser",(function(){return C}));var r=n(9),i=n.n(r),o=n(10),a=n.n(o),c=n(4),u=n.n(c),s=n(12),l=n.n(s),f=n(13),p=n.n(f),d=n(6),v=n.n(d),h=n(1),m=n.n(h),y=n(0),g=n.n(y),b=n(2026),O=n(3028),w=n(2256),E=n(2244);function j(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var i=v()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var x="browser",P=function(e){l()(n,e);var t=j(n);function n(e){var r;return i()(this,n),r=t.call(this,e,x),m()(u()(r),"browserRef",g.a.createRef()),m()(u()(r),"onFilePicked",(function(e){if(e.target){var t=[].slice.call(e.target.files);try{r.uploadService.addFiles(t)}finally{r.browserRef.current&&(r.browserRef.current.value="")}}})),m()(u()(r),"browse",(function(){var e=r.props.onClose;r.browserRef.current&&(r.browserRef.current.click(),e&&e())})),r}return a()(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.onBrowseFn,n=e.onCancelFn,r=e.isOpen;t&&t(this.browse),n&&n(this.cancel),r&&this.browse()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props.isOpen,n=e.isOpen;n&&n!==t&&this.browse()}},{key:"render",value:function(){var e=this.props,t=e.config,n=e.children,r=t.multiple,i=t.fileExtensions&&t.fileExtensions.join(",");return g.a.createElement(g.a.Fragment,null,g.a.createElement("input",{"data-testid":"media-picker-file-input",ref:this.browserRef,type:"file",style:{display:"none"},multiple:r,accept:i,onChange:this.onFilePicked}),n?n(this.browse):null)}}]),n}(w.a);m()(P,"defaultProps",{config:{uploadParams:{}}});var C=Object(O.a)(Object(E.a)(x),{filterFeatureFlags:["folderUploads","newCardExperience"]})(Object(b.a)()(P))},2446:function(e,t,n){"use strict";n.r(t),n.d(t,"DropzoneBase",(function(){return L})),n.d(t,"Dropzone",(function(){return _}));var r,i=n(15),o=n.n(i),a=n(23),c=n.n(a),u=n(9),s=n.n(u),l=n(10),f=n.n(l),p=n(4),d=n.n(p),v=n(12),h=n.n(v),m=n(13),y=n.n(m),g=n(6),b=n.n(g),O=n(1),w=n.n(O),E=n(2026),j=n(218),x=n(1261),P=n(3028);function C(e){var t=void 0!==e?e:navigator;if(void 0!==e&&(r=void 0),void 0===r){if("undefined"!==typeof t){var n=/Edge\/(\d+)/.exec(t.userAgent),i=/MSIE \d/.test(t.userAgent),o=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(t.userAgent),a=/Opera/.test(t.platform)||/OPR/.test(t.platform),c=!!(i||o||n),u=/Firefox/.test(t.userAgent);return!c&&!a&&!u}return!1}return r}var k=n(338),S=function(e){return[].concat.apply([],e)},D=function e(t){return t.isDirectory?function(e){return new Promise((function(t){e.createReader().readEntries(t)}))}(t).then((function(t){var n=t.map(e);return Promise.all(n).then((function(e){return S(e)}))})):Promise.resolve([t])},I=function(e){var t,n=(t=e,[].slice.call(t,0)).map((function(e){var t=e.webkitGetAsEntry();return D(t)}));return Promise.all(n).then((function(e){return S(e)}))},R=function(e){return new Promise((function(t){var n=[];e.forEach((function(r){r.file((function(r){n.push(r),n.length===e.length&&t(n)}))}))}))},M=(function(){function e(e,t){var n=this;this.onDrop=function(e){return Object(k.b)(n,void 0,void 0,(function(){var t,n,r;return Object(k.d)(this,(function(i){switch(i.label){case 0:return e.preventDefault(),t=this.callback,n=e.dataTransfer.items,[4,I(n)];case 1:return r=i.sent(),t(r),[2]}}))}))},this.dropzone=e,this.callback=t}e.prototype.subscribe=function(){var e=this.dropzone;e.addEventListener("dragover",this.onDragOver,!1),e.addEventListener("drop",this.onDrop)},e.prototype.onDragOver=function(e){e.preventDefault()}}(),n(2256)),A=n(2244);function T(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b()(e);if(t){var i=b()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}function N(e){if(!e.dataTransfer)return!1;var t=e.dataTransfer.types;return Array.from(t).indexOf("Files")>-1}var F="dropzone",L=function(e){h()(n,e);var t=T(n);function n(e){var r;return s()(this,n),r=t.call(this,e,F),w()(d()(r),"uiActive",!1),w()(d()(r),"addContainerListeners",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.getContainer();e.addEventListener("dragover",r.onDragOver,!1),e.addEventListener("dragleave",r.onDragLeave,!1),e.addEventListener("drop",r.onFileDropped)})),w()(d()(r),"removeContainerListeners",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.getContainer();e.removeEventListener("dragover",r.onDragOver,!1),e.removeEventListener("dragleave",r.onDragLeave,!1),e.removeEventListener("drop",r.onFileDropped)})),w()(d()(r),"onDragOver",(function(e){if(e.preventDefault(),e.dataTransfer&&N(e)){var t,n=e.dataTransfer;try{t=n.effectAllowed}catch(o){}n.dropEffect="move"===t||"linkMove"===t?"move":"copy";var i=r.getDraggedItemsLength(n);e.stopPropagation(),r.emitDragOver({length:i})}})),w()(d()(r),"onDragLeave",(function(e){if(e.dataTransfer){e.preventDefault();var t=0;if(N(e)){var n=e.dataTransfer;t=r.getDraggedItemsLength(n)}r.emitDragLeave({length:t})}})),w()(d()(r),"onFileDropped",function(){var e=c()(o.a.mark((function e(t){var n,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.dataTransfer){e.next=2;break}return e.abrupt("return");case 2:if(t.preventDefault(),t.stopPropagation(),!C()||!Object(j.a)("folderUploads",r.props.featureFlags)){e.next=13;break}return r.fireAnalyticsForFolders(t.dataTransfer.items),e.next=8,r.getFilesFromDragEvent(t.dataTransfer.items);case 8:n=e.sent,r.onDropFolders(n.length),r.uploadService.addFiles(n),e.next=16;break;case 13:r.onDrop(t),i=Array.from(t.dataTransfer.files),r.uploadService.addFiles(i);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),w()(d()(r),"fireAnalyticsForFolders",(function(e){var t=Array.from(e),n=t.filter((function(e){return function(e){return e.webkitGetAsEntry().isDirectory}(e)})).length;n>0&&r.fireAnalyticsEvent("folderDroppedInto",n)})),w()(d()(r),"getFilesFromDragEvent",function(){var e=c()(o.a.mark((function e(t){var n,i,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.next=3,I(n);case 3:return i=e.sent,e.next=6,R(i);case 6:return a=e.sent,e.abrupt("return",r.filterFilesAgainstBlacklist(a));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),w()(d()(r),"filterFilesAgainstBlacklist",(function(e){var t=[".DS_Store","thumbs.db","desktop.ini"];return e.filter((function(e){return!t.includes(e.name)}))})),w()(d()(r),"onDropFolders",(function(e){e>0&&r.sendAnalyticsAndEmitDragLeave(e)})),w()(d()(r),"onDrop",(function(e){if(e.dataTransfer&&N(e)){var t=e.dataTransfer,n=r.getDraggedItemsLength(t);r.sendAnalyticsAndEmitDragLeave(n)}})),w()(d()(r),"sendAnalyticsAndEmitDragLeave",(function(e){r.fireAnalyticsEvent("droppedInto",e),r.props.onDrop&&r.props.onDrop(),r.emitDragLeave({length:e})})),r}return f()(n,[{key:"getContainer",value:function(){return this.props.config.container||document.body}},{key:"componentDidMount",value:function(){var e=this.props.onCancelFn;this.addContainerListeners(this.getContainer()),e&&e(this.cancel)}},{key:"componentWillUnmount",value:function(){this.removeContainerListeners(this.getContainer())}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.config.container,n=this.props.config.container;t!==n&&(this.removeContainerListeners(n),this.addContainerListeners(t))}},{key:"getDraggedItemsLength",value:function(e){return e.items?Array.from(e.items).filter((function(e){return"file"===e.kind})).length:e.files.length}},{key:"emitDragOver",value:function(e){if(!this.uiActive){var t=this.props.onDragEnter;this.uiActive=!0,this.fireAnalyticsEvent("draggedInto",e.length),t&&t(e)}}},{key:"emitDragLeave",value:function(e){var t=this;this.uiActive&&(this.uiActive=!1,window.setTimeout((function(){if(!t.uiActive){var n=t.props.onDragLeave;t.fireAnalyticsEvent("draggedOut",e.length),n&&n(e)}}),50))}},{key:"fireAnalyticsEvent",value:function(e,t){var n=this.props.createAnalyticsEvent;n&&n({eventType:"ui",actionSubject:"dropzone",action:e,attributes:{fileCount:t}}).fire(x.a)}},{key:"render",value:function(){return null}}]),n}(M.a),_=Object(P.a)(Object(A.a)(F),{filterFeatureFlags:["folderUploads","newCardExperience"]})(Object(E.a)()(L))},2449:function(e,t,n){"use strict";n.r(t),n.d(t,"getFilesFromClipboard",(function(){return P})),n.d(t,"ClipboardBase",(function(){return S})),n.d(t,"Clipboard",(function(){return D}));var r=n(4),i=n.n(r),o=n(12),a=n.n(o),c=n(13),u=n.n(c),s=n(6),l=n.n(s),f=n(9),p=n.n(f),d=n(10),v=n.n(d),h=n(1),m=n.n(h),y=n(2026),g=n(1261),b=n(3028),O=n(2256),w=n(2320),E=n(2244),j=function(e){return e<10?"0".concat(e):"".concat(e)};function x(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l()(e);if(t){var i=l()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u()(this,n)}}var P=function(e){return Array.from(e).map((function(e){if(0===e.type.indexOf("image/")){var t=function(e,t){var n=e.lastIndexOf("."),r=n>0,i=r?e.substring(0,n):e,o=r?e.substring(n):"",a=new Date(t),c="".concat(a.getUTCFullYear()).concat(j(a.getUTCMonth()+1)).concat(j(a.getUTCDate())),u="".concat(j(a.getUTCHours())).concat(j(a.getUTCMinutes())).concat(j(a.getUTCSeconds()));return"".concat(i,"-").concat(c,"-").concat(u).concat(o)}(e.name,e.lastModified);return new File([e],t,{type:e.type})}return e}))},C="clipboard",k=function(){function e(t,n){p()(this,e),this.uploadService=t,this.createAnalyticsEvent=n}return v()(e,[{key:"activate",value:function(){this.deactivate(),document.addEventListener("paste",e.handleEvent),e.instances.push(this)}},{key:"deactivate",value:function(){var t=e.instances.indexOf(this);t>-1?e.instances.splice(t,1):document.removeEventListener("paste",e.handleEvent)}},{key:"onFilesPasted",value:function(e){this.uploadService.addFilesWithSource(e),this.fireAnalyticsEvent(e)}},{key:"fireAnalyticsEvent",value:function(e){if(this.createAnalyticsEvent){var t={eventType:"ui",action:"pasted",actionSubject:"clipboard",attributes:{fileCount:e.length,fileAttributes:e.map((function(e){var t=e.file,n=t.type,r=t.size;return{fileSource:e.source,fileMimetype:n,fileSize:r}}))}};this.createAnalyticsEvent(t).fire(g.a)}}}],[{key:"latestInstance",get:function(){return e.instances[e.instances.length-1]}}]),e}();m()(k,"instances",[]),m()(k,"handleEvent",(function(e){var t=k.latestInstance;if(t){var n=e.clipboardData;if(n&&n.files){var r=1===n.types.length?w.a.PastedScreenshot:w.a.PastedFile,i=P(n.files).map((function(e){return{file:e,source:r}}));i.length>0&&t.onFilesPasted.call(t,i)}}}));var S=function(e){a()(n,e);var t=x(n);function n(e){var r;return p()(this,n),r=t.call(this,e,C),m()(i()(r),"clipboard",new k(r.uploadService,r.props.createAnalyticsEvent)),r}return v()(n,[{key:"componentDidMount",value:function(){this.clipboard.activate()}},{key:"componentWillUnmount",value:function(){this.clipboard.deactivate()}},{key:"render",value:function(){return null}}]),n}(O.a);m()(S,"defaultProps",{config:{uploadParams:{}}});var D=Object(b.a)(Object(E.a)(C),{filterFeatureFlags:["folderUploads","newCardExperience"]})(Object(y.a)()(S))},2751:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(0)),i=o(n(43));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e){return r.default.createElement(i.default,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><g fill="currentColor" fill-rule="evenodd"><path d="M11.208 9.32L9.29 11.253a1 1 0 000 1.409.982.982 0 001.397 0l1.29-1.301 1.336 1.347a.982.982 0 001.397.001 1.002 1.002 0 00.001-1.408l-1.965-1.98a1.08 1.08 0 00-1.538-.001z"/><path d="M11 10.007l.001 9.986c0 .557.448 1.008 1 1.007.553 0 1-.45 1-1.007L13 10.006C13 9.451 12.552 9 12 9s-1.001.451-1 1.007z"/><path d="M7.938 5.481a4.8 4.8 0 00-.777-.063C4.356 5.419 2 7.62 2 10.499 2 13.408 4.385 16 7.1 16h2.881v-1.993H7.1c-1.657 0-3.115-1.663-3.115-3.508 0-1.778 1.469-3.087 3.104-3.087h.012c.389 0 .686.051.97.15l.17.063c.605.248.875-.246.875-.246l.15-.267c.73-1.347 2.201-2.096 3.716-2.119a4.14 4.14 0 014.069 3.644l.046.34s.071.525.665.525c.013 0 .012.005.023.005h.254c1.136 0 1.976.959 1.976 2.158 0 1.207-.987 2.342-2.07 2.342h-3.964V16h3.964C20.105 16 22 13.955 22 11.665c0-1.999-1.312-3.663-3.138-4.074-.707-2.707-3.053-4.552-5.886-4.591-1.975.021-3.901.901-5.038 2.481z"/></g></svg>'},e))};a.displayName="UploadIcon";var c=a;t.default=c},2752:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(0)),i=o(n(43));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e){return r.default.createElement(i.default,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path d="M5 5a1 1 0 00-1 1v1h16V6a1 1 0 00-1-1H5zm11.15 15H7.845a1 1 0 01-.986-.835L5 8h14l-1.864 11.166a.999.999 0 01-.986.834M9 4.5a.5.5 0 01.491-.5h5.018a.5.5 0 01.491.5V5H9v-.5z" fill="currentColor" fill-rule="evenodd"/></svg>'},e))};a.displayName="TrashIcon";var c=a;t.default=c},2753:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(0)),i=o(n(43));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e){return r.default.createElement(i.default,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path d="M11.221 9.322l-2.929 2.955a1.009 1.009 0 000 1.419.986.986 0 001.405 0l2.298-2.317 2.307 2.327a.989.989 0 001.407 0 1.01 1.01 0 000-1.419l-2.94-2.965A1.106 1.106 0 0011.991 9c-.279 0-.557.107-.77.322z" fill="currentColor" fill-rule="evenodd"/></svg>'},e))};a.displayName="ChevronUpIcon";var c=a;t.default=c},2754:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(0)),i=o(n(43));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e){return r.default.createElement(i.default,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><g fill="currentColor" fill-rule="evenodd"><path d="M8 6.003v2.995a1 1 0 102 0V5.102C10 4.494 9.507 4 8.9 4H5a1 1 0 000 2.003h3z" fill-rule="nonzero"/><path d="M9.428 18.018C7.351 16.989 6 14.807 6 12.37c0-2.266 1.167-4.319 3.02-5.425.48-.286.646-.922.371-1.421a.979.979 0 00-1.364-.386C5.557 6.611 4 9.35 4 12.37c0 3.248 1.802 6.158 4.57 7.529.498.247 1.095.026 1.332-.493.237-.52.025-1.141-.474-1.388z" fill-rule="nonzero"/><path d="M14 15.002v3.896c0 .608.493 1.102 1.1 1.102H19a1 1 0 000-2.003h-3v-2.995a1 1 0 10-2 0z"/><path d="M14.097 4.596c-.237.52-.025 1.14.474 1.387 2.077 1.029 3.428 3.21 3.428 5.647 0 2.266-1.167 4.32-3.021 5.425a1.063 1.063 0 00-.37 1.42c.274.5.885.673 1.364.387 2.47-1.473 4.027-4.212 4.027-7.232 0-3.248-1.802-6.158-4.57-7.528A.957.957 0 0015.002 4a1 1 0 00-.905.596z"/></g></svg>'},e))};a.displayName="RefreshIcon";var c=a;t.default=c},2755:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(0)),i=o(n(43));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e){return r.default.createElement(i.default,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path d="M11.701 16.7a5.002 5.002 0 110-10.003 5.002 5.002 0 010 10.004m8.368-3.117a1.995 1.995 0 01-1.346-1.885c0-.876.563-1.613 1.345-1.885a.48.48 0 00.315-.574 8.947 8.947 0 00-.836-1.993.477.477 0 00-.598-.195 2.04 2.04 0 01-1.29.08 1.988 1.988 0 01-1.404-1.395 2.04 2.04 0 01.076-1.297.478.478 0 00-.196-.597 8.98 8.98 0 00-1.975-.826.479.479 0 00-.574.314 1.995 1.995 0 01-1.885 1.346 1.994 1.994 0 01-1.884-1.345.482.482 0 00-.575-.315c-.708.2-1.379.485-2.004.842a.47.47 0 00-.198.582A2.002 2.002 0 014.445 7.06a.478.478 0 00-.595.196 8.946 8.946 0 00-.833 1.994.48.48 0 00.308.572 1.995 1.995 0 011.323 1.877c0 .867-.552 1.599-1.324 1.877a.479.479 0 00-.308.57 8.99 8.99 0 00.723 1.79.477.477 0 00.624.194c.595-.273 1.343-.264 2.104.238.117.077.225.185.302.3.527.8.512 1.58.198 2.188a.473.473 0 00.168.628 8.946 8.946 0 002.11.897.474.474 0 00.57-.313 1.995 1.995 0 011.886-1.353c.878 0 1.618.567 1.887 1.353a.475.475 0 00.57.313 8.964 8.964 0 002.084-.883.473.473 0 00.167-.631c-.318-.608-.337-1.393.191-2.195.077-.116.185-.225.302-.302.772-.511 1.527-.513 2.125-.23a.477.477 0 00.628-.19 8.925 8.925 0 00.728-1.793.478.478 0 00-.314-.573" fill="currentColor" fill-rule="evenodd"/></svg>'},e))};a.displayName="SettingsIcon";var c=a;t.default=c},2756:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(0)),i=o(n(43));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e){return r.default.createElement(i.default,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path d="M12.2 6h7.81C21.108 6 22 6.893 22 7.992v11.016c0 1.1-.898 1.992-1.99 1.992H3.99A1.992 1.992 0 012 19.008V5.006C2 3.898 2.896 3 3.997 3h5.006c1.103 0 2.327.826 2.742 1.862L12.2 6z" fill="currentColor" fill-rule="evenodd"/></svg>'},e))};a.displayName="FolderFilledIcon";var c=a;t.default=c},2757:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(0)),i=o(n(43));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e){return r.default.createElement(i.default,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><g fill-rule="evenodd"><rect fill="currentColor" x="4" y="4" width="16" height="16" rx="2"/><rect fill="inherit" x="7" y="8" width="4" height="2" rx="1"/><rect fill="inherit" x="7" y="11" width="4" height="2" rx="1"/><rect fill="inherit" x="13" y="11" width="4" height="2" rx="1"/><rect fill="inherit" x="7" y="14" width="4" height="2" rx="1"/><rect fill="inherit" x="13" y="14" width="4" height="2" rx="1"/><rect fill="inherit" x="13" y="8" width="4" height="2" rx="1"/></g></svg>'},e))};a.displayName="MediaServicesSpreadsheetIcon";var c=a;t.default=c},2758:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(0)),i=o(n(43));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e){return r.default.createElement(i.default,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><g fill-rule="evenodd"><rect fill="currentColor" x="4" y="4" width="16" height="16" rx="2"/><rect fill="inherit" x="8" y="12" width="2" height="3" rx="1"/><rect fill="inherit" x="11" y="10" width="2" height="5" rx="1"/><rect fill="inherit" x="14" y="8" width="2" height="7" rx="1"/></g></svg>'},e))};a.displayName="MediaServicesPresentationIcon";var c=a;t.default=c},2759:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(0)),i=o(n(43));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e){return r.default.createElement(i.default,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><g fill-rule="evenodd"><rect fill="currentColor" x="4" y="4" width="16" height="16" rx="2"/><rect fill="inherit" x="7" y="8" width="10" height="2" rx="1"/><path d="M16.187 16h-3.373c-.45 0-.814-.222-.814-.497v-4.006c0-.275.364-.497.814-.497h3.373c.45 0 .813.222.813.497v4.006c0 .275-.364.497-.813.497" fill="inherit"/><rect fill="inherit" x="7" y="11" width="4" height="2" rx="1"/><rect fill="inherit" x="7" y="14" width="4" height="2" rx="1"/></g></svg>'},e))};a.displayName="MediaServicesPdfIcon";var c=a;t.default=c},2761:function(e,t,n){"use strict";var r=n(830).compose;t.__esModule=!0,t.composeWithDevTools=function(){if(0!==arguments.length)return"object"===typeof arguments[0]?r:r.apply(null,arguments)},t.devToolsEnhancer=function(){return function(e){return e}}},2762:function(e,t){e.exports=function(e){var t,n=e.scope,r=e.window,i=e.windowForEventListening||window,o={},a=[],c={},u=!1,s="__ready__",l=function(e){var t;try{t=JSON.parse(e.data)}catch(a){return}if(t.postis&&t.scope===n){var r=o[t.method];if(r)for(var i=0;i<r.length;i++)r[i].call(null,t.params);else c[t.method]=c[t.method]||[],c[t.method].push(t.params)}};i.addEventListener("message",l,!1);var f={listen:function(e,t){o[e]=o[e]||[],o[e].push(t);var n=c[e];if(n)for(var r=o[e],i=0;i<r.length;i++)for(var a=0;a<n.length;a++)r[i].call(null,n[a]);delete c[e]},send:function(e){var t=e.method;(u||e.method===s)&&r&&"function"===typeof r.postMessage?r.postMessage(JSON.stringify({postis:!0,scope:n,method:t,params:e.params}),"*"):a.push(e)},ready:function(e){u?e():setTimeout((function(){f.ready(e)}),50)},destroy:function(e){clearInterval(t),u=!1,i&&"function"===typeof i.removeEventListener&&i.removeEventListener("message",l),e&&e()}},p=+new Date+Math.random()+"";return t=setInterval((function(){f.send({method:s,params:p})}),50),f.listen(s,(function(e){if(e===p){clearInterval(t),u=!0;for(var n=0;n<a.length;n++)f.send(a[n]);a=[]}else f.send({method:s,params:e})})),f}},2763:function(e,t,n){"use strict";var r=n(2764);function i(e){this.message=e}i.prototype=new Error,i.prototype.name="InvalidTokenError",e.exports=function(e,t){if("string"!==typeof e)throw new i("Invalid token specified");var n=!0===(t=t||{}).header?0:1;try{return JSON.parse(r(e.split(".")[n]))}catch(o){throw new i("Invalid token specified: "+o.message)}},e.exports.InvalidTokenError=i},2764:function(e,t,n){var r=n(2765);e.exports=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(r(e).replace(/(.)/g,(function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(t)}catch(n){return r(t)}}},2765:function(e,t){function n(e){this.message=e}n.prototype=new Error,n.prototype.name="InvalidCharacterError",e.exports="undefined"!==typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new n("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,i,o=0,a=0,c="";i=t.charAt(a++);~i&&(r=o%4?64*r+i:i,o++%4)?c+=String.fromCharCode(255&r>>(-2*o&6)):0)i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(i);return c}},3039:function(e,t,n){"use strict";n.r(t),n.d(t,"PopupImpl",(function(){return dd}));var r={};n.r(r),n.d(r,"default",(function(){return Vi}));var i=n(15),o=n.n(i),a=n(23),c=n.n(a),u=n(1),s=n.n(u),l=n(9),f=n.n(l),p=n(10),d=n.n(p),v=n(4),h=n.n(v),m=n(12),y=n.n(m),g=n(13),b=n.n(g),O=n(6),w=n.n(O),E=n(638),j=n(0),x=n.n(j),P=n(60),C=n(250),k=n(231),S=n(26),D=n.n(S),I=D.a.shape({trySubscribe:D.a.func.isRequired,tryUnsubscribe:D.a.func.isRequired,notifyNestedSubs:D.a.func.isRequired,isSubscribed:D.a.func.isRequired}),R=D.a.shape({subscribe:D.a.func.isRequired,dispatch:D.a.func.isRequired,getState:D.a.func.isRequired});x.a.forwardRef;var M=function(e){var t;void 0===e&&(e="store");var n=e+"Subscription",r=function(t){Object(k.a)(i,t);var r=i.prototype;function i(n,r){var i;return(i=t.call(this,n,r)||this)[e]=n.store,i}return r.getChildContext=function(){var t;return(t={})[e]=this[e],t[n]=null,t},r.render=function(){return j.Children.only(this.props.children)},i}(j.Component);return r.propTypes={store:R.isRequired,children:D.a.element.isRequired},r.childContextTypes=((t={})[e]=R.isRequired,t[n]=I,t),r}(),A=n(464),T=n(25),N=n(289),F=n(380),L=n.n(F),_=n(484),U=n.n(_),z=n(384),B=null,H={notify:function(){}};var G=function(){function e(e,t,n){this.store=e,this.parentSub=t,this.onStateChange=n,this.unsubscribe=null,this.listeners=H}var t=e.prototype;return t.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},t.notifyNestedSubs=function(){this.listeners.notify()},t.isSubscribed=function(){return Boolean(this.unsubscribe)},t.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.onStateChange):this.store.subscribe(this.onStateChange),this.listeners=function(){var e=[],t=[];return{clear:function(){t=B,e=B},notify:function(){for(var n=e=t,r=0;r<n.length;r++)n[r]()},get:function(){return t},subscribe:function(n){var r=!0;return t===e&&(t=e.slice()),t.push(n),function(){r&&e!==B&&(r=!1,t===e&&(t=e.slice()),t.splice(t.indexOf(n),1))}}}}())},t.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=H)},e}(),W="undefined"!==typeof x.a.forwardRef,V=0,q={};function K(){}function Y(e,t){var n,r;void 0===t&&(t={});var i=t,o=i.getDisplayName,a=void 0===o?function(e){return"ConnectAdvanced("+e+")"}:o,c=i.methodName,u=void 0===c?"connectAdvanced":c,s=i.renderCountProp,l=void 0===s?void 0:s,f=i.shouldHandleStateChanges,p=void 0===f||f,d=i.storeKey,v=void 0===d?"store":d,h=i.withRef,m=void 0!==h&&h,y=Object(N.a)(i,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef"]),g=v+"Subscription",b=V++,O=((n={})[v]=R,n[g]=I,n),w=((r={})[g]=I,r);return function(t){U()(Object(z.isValidElementType)(t),"You must pass a component to the function returned by "+u+". Instead received "+JSON.stringify(t));var n=t.displayName||t.name||"Component",r=a(n),i=Object(T.a)({},y,{getDisplayName:a,methodName:u,renderCountProp:l,shouldHandleStateChanges:p,storeKey:v,withRef:m,displayName:r,wrappedComponentName:n,WrappedComponent:t}),o=function(n){function o(e,t){var i;return(i=n.call(this,e,t)||this).version=b,i.state={},i.renderCount=0,i.store=e[v]||t[v],i.propsMode=Boolean(e[v]),i.setWrappedInstance=i.setWrappedInstance.bind(Object(A.a)(Object(A.a)(i))),U()(i.store,'Could not find "'+v+'" in either the context or props of "'+r+'". Either wrap the root component in a <Provider>, or explicitly pass "'+v+'" as a prop to "'+r+'".'),i.initSelector(),i.initSubscription(),i}Object(k.a)(o,n);var a=o.prototype;return a.getChildContext=function(){var e,t=this.propsMode?null:this.subscription;return(e={})[g]=t||this.context[g],e},a.componentDidMount=function(){p&&(this.subscription.trySubscribe(),this.selector.run(this.props),this.selector.shouldComponentUpdate&&this.forceUpdate())},a.componentWillReceiveProps=function(e){this.selector.run(e)},a.shouldComponentUpdate=function(){return this.selector.shouldComponentUpdate},a.componentWillUnmount=function(){this.subscription&&this.subscription.tryUnsubscribe(),this.subscription=null,this.notifyNestedSubs=K,this.store=null,this.selector.run=K,this.selector.shouldComponentUpdate=!1},a.getWrappedInstance=function(){return U()(m,"To access the wrapped instance, you need to specify { withRef: true } in the options argument of the "+u+"() call."),this.wrappedInstance},a.setWrappedInstance=function(e){this.wrappedInstance=e},a.initSelector=function(){var t=e(this.store.dispatch,i);this.selector=function(e,t){var n={run:function(r){try{var i=e(t.getState(),r);(i!==n.props||n.error)&&(n.shouldComponentUpdate=!0,n.props=i,n.error=null)}catch(o){n.shouldComponentUpdate=!0,n.error=o}}};return n}(t,this.store),this.selector.run(this.props)},a.initSubscription=function(){if(p){var e=(this.propsMode?this.props:this.context)[g];this.subscription=new G(this.store,e,this.onStateChange.bind(this)),this.notifyNestedSubs=this.subscription.notifyNestedSubs.bind(this.subscription)}},a.onStateChange=function(){this.selector.run(this.props),this.selector.shouldComponentUpdate?(this.componentDidUpdate=this.notifyNestedSubsOnComponentDidUpdate,this.setState(q)):this.notifyNestedSubs()},a.notifyNestedSubsOnComponentDidUpdate=function(){this.componentDidUpdate=void 0,this.notifyNestedSubs()},a.isSubscribed=function(){return Boolean(this.subscription)&&this.subscription.isSubscribed()},a.addExtraProps=function(e){if(!m&&!l&&(!this.propsMode||!this.subscription))return e;var t=Object(T.a)({},e);return m&&(t.ref=this.setWrappedInstance),l&&(t[l]=this.renderCount++),this.propsMode&&this.subscription&&(t[g]=this.subscription),t},a.render=function(){var e=this.selector;if(e.shouldComponentUpdate=!1,e.error)throw e.error;return Object(j.createElement)(t,this.addExtraProps(e.props))},o}(j.Component);return W&&(o.prototype.UNSAFE_componentWillReceiveProps=o.prototype.componentWillReceiveProps,delete o.prototype.componentWillReceiveProps),o.WrappedComponent=t,o.displayName=r,o.childContextTypes=w,o.contextTypes=O,o.propTypes=O,L()(o,t)}}var Z=Object.prototype.hasOwnProperty;function J(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function Q(e,t){if(J(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!Z.call(t,n[i])||!J(e[n[i]],t[n[i]]))return!1;return!0}var X=n(830);function $(e){return function(t,n){var r=e(t,n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function ee(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function te(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=ee(e);var i=r(t,n);return"function"===typeof i&&(r.mapToProps=i,r.dependsOnOwnProps=ee(i),i=r(t,n)),i},r}}var ne=[function(e){return"function"===typeof e?te(e):void 0},function(e){return e?void 0:$((function(e){return{dispatch:e}}))},function(e){return e&&"object"===typeof e?$((function(t){return Object(X.bindActionCreators)(e,t)})):void 0}];var re=[function(e){return"function"===typeof e?te(e):void 0},function(e){return e?void 0:$((function(){return{}}))}];function ie(e,t,n){return Object(T.a)({},n,e,t)}var oe=[function(e){return"function"===typeof e?function(e){return function(t,n){n.displayName;var r,i=n.pure,o=n.areMergedPropsEqual,a=!1;return function(t,n,c){var u=e(t,n,c);return a?i&&o(u,r)||(r=u):(a=!0,r=u),r}}}(e):void 0},function(e){return e?void 0:function(){return ie}}];function ae(e,t,n,r){return function(i,o){return n(e(i,o),t(r,o),o)}}function ce(e,t,n,r,i){var o,a,c,u,s,l=i.areStatesEqual,f=i.areOwnPropsEqual,p=i.areStatePropsEqual,d=!1;function v(i,d){var v=!f(d,a),h=!l(i,o);return o=i,a=d,v&&h?(c=e(o,a),t.dependsOnOwnProps&&(u=t(r,a)),s=n(c,u,a)):v?(e.dependsOnOwnProps&&(c=e(o,a)),t.dependsOnOwnProps&&(u=t(r,a)),s=n(c,u,a)):h?function(){var t=e(o,a),r=!p(t,c);return c=t,r&&(s=n(c,u,a)),s}():s}return function(i,l){return d?v(i,l):(c=e(o=i,a=l),u=t(r,a),s=n(c,u,a),d=!0,s)}}function ue(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,i=t.initMergeProps,o=Object(N.a)(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),a=n(e,o),c=r(e,o),u=i(e,o);return(o.pure?ce:ae)(a,c,u,e,o)}function se(e,t,n){for(var r=t.length-1;r>=0;r--){var i=t[r](e);if(i)return i}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function le(e,t){return e===t}var fe=function(e){var t=void 0===e?{}:e,n=t.connectHOC,r=void 0===n?Y:n,i=t.mapStateToPropsFactories,o=void 0===i?re:i,a=t.mapDispatchToPropsFactories,c=void 0===a?ne:a,u=t.mergePropsFactories,s=void 0===u?oe:u,l=t.selectorFactory,f=void 0===l?ue:l;return function(e,t,n,i){void 0===i&&(i={});var a=i,u=a.pure,l=void 0===u||u,p=a.areStatesEqual,d=void 0===p?le:p,v=a.areOwnPropsEqual,h=void 0===v?Q:v,m=a.areStatePropsEqual,y=void 0===m?Q:m,g=a.areMergedPropsEqual,b=void 0===g?Q:g,O=Object(N.a)(a,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),w=se(e,o,"mapStateToProps"),E=se(t,c,"mapDispatchToProps"),j=se(n,s,"mergeProps");return r(f,Object(T.a)({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:w,initMapDispatchToProps:E,initMergeProps:j,pure:l,areStatesEqual:d,areOwnPropsEqual:h,areStatePropsEqual:y,areMergedPropsEqual:b},O))}}(),pe=n(1206),de=n(2197),ve=n(278),he=n(28),me=n.n(he),ye=n(27),ge=n(2014),be=n(48),Oe=n.n(be),we=n(8),Ee=n.n(we),je=n(7),xe=n(2215);function Pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ke(){var e=Ee()(["\n  box-sizing: border-box;\n  display: flex;\n  justify-content: flex-end;\n\n  height: 80px;\n  padding: 26px 15px 23px 18px;\n"]);return ke=function(){return e},e}var Se=je.c.div(ke()),De=function(e){return x.a.createElement(xe.a,me()({},e,{theme:function(e,t){var n=e(t),r=n.buttonStyles,i=Oe()(n,["buttonStyles"]);return Ce({buttonStyles:Ce(Ce({},r),{},{marginRight:"5px"})},i)}}))},Ie=function(e){return x.a.createElement(xe.a,e)},Re="CHANGE_ACCOUNT";function Me(e){return e.type===Re}function Ae(e,t){return{type:Re,serviceName:e,accountId:t}}var Te="CHANGE_CLOUD_ACCOUNT_FOLDER";function Ne(e,t,n){return{type:Te,serviceName:e,accountId:t,path:n}}function Fe(e){return e.type===Te}var Le="SERVICE_CHANGE";function _e(e){return e.type===Le}function Ue(e){return{type:Le,serviceName:e}}var ze="DESELECT_ITEM";var Be="EDITOR_CLOSE";function He(e){return e.type===Be}var Ge="EDITOR_SHOW_ERROR";function We(e,t){return{type:Ge,error:{message:e,retryHandler:t}}}var Ve="FETCH_NEXT_CLOUD_FILES_PAGE";function qe(e){return e.type===Ve}function Ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ze="FILE_CLICK";function Je(e,t,n){return{type:Ze,file:Ye(Ye({},e),{},{accountId:n,serviceName:t})}}var Qe="FILE_LIST_UPDATE";function Xe(e,t,n,r,i,o){return{type:Qe,accountId:e,path:t,items:n,currentCursor:i,nextCursor:o,serviceName:r}}var $e="HIDE_POPUP";function et(e){return e.type===$e}function tt(){return{type:$e}}var nt="RESET_VIEW";function rt(e){return e.type===nt}function it(){return{type:nt}}var ot="AUTH_START";function at(e){return{type:ot,serviceName:e}}var ct="START_IMPORT";function ut(e){return e.type===ct}var st="ACCOUNT_UNLINK_CLOUD_REQUEST";function lt(e){return{type:st,account:e}}var ft="ACCOUNT_CLOUD_UNLINK";var pt="GET_FILES_IN_RECENTS",dt=function(e){return e.type===pt},vt="GET_FILES_IN_RECENTS_FULLFILLED";var ht="GET_FILES_IN_RECENTS_FAILED";var mt="GET_FORGE_PLUGINS",yt="GET_FORGE_PLUGINS_FULLFILLED";var gt="GET_FORGE_PLUGINS_FAILED";var bt="SERVICE_LIST_UPDATE";function Ot(e){return{type:bt,accounts:e}}var wt="FAILURE_ERROR";var Et="SEARCH_GIPHY",jt="SEARCH_GIPHY_FULFILLED",xt="SEARCH_GIPHY_FAILED";function Pt(e){return e.type===Et}function Ct(e,t){return{type:Et,query:e,shouldAppendResults:t}}function kt(e,t,n){return{type:jt,imageCardModels:e,totalResultCount:t,shouldAppendResults:n}}var St="SAVE_COLLECTION_ITEMS_SUBSCRIPTION";function Dt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b()(this,n)}}var It=function(e){y()(n,e);var t=Dt(n);function n(){return f()(this,n),t.apply(this,arguments)}return d()(n,[{key:"renderCancelButton",value:function(){var e=this.props,t=e.canCancel,n=e.onCancel;return x.a.createElement(Ie,{testId:"media-picker-cancel-button",appearance:"subtle",onClick:n,isDisabled:!t},x.a.createElement(ye.a,ge.a.cancel))}},{key:"renderInsertButton",value:function(){var e=this.props,t=e.selectedItems,n=e.canInsert,r=e.onInsert,i=t.length;if(0===i)return null;return x.a.createElement(De,{testId:"media-picker-insert-button",appearance:"primary",onClick:function(){return r(t)},isDisabled:!n,autoFocus:!0},x.a.createElement(ye.a,me()({},ge.a.insert_files,{values:{0:i}})))}},{key:"render",value:function(){return x.a.createElement(Se,null,this.renderInsertButton(),this.renderCancelButton())}}]),n}(j.Component),Rt=fe((function(e){var t=e.isUploading,n=e.isCancelling,r=t||n;return{selectedItems:e.selectedItems,canInsert:!r,canCancel:!r}}),(function(e){return{onInsert:function(){return e({type:ct})},onCancel:function(){e(it()),e(tt())}}}))(It),Mt=n(24),At=n.n(Mt),Tt=n(2378),Nt=n.n(Tt),Ft=n(2379),Lt=n.n(Ft),_t=n(3);function Ut(){var e=Ee()(["\n  font-size: 14px;\n  position: relative;\n  margin-left: 10px;\n  top: -1px;\n  display: inline-block;\n  text-transform: capitalize;\n  width: 160px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n"]);return Ut=function(){return e},e}function zt(){var e=Ee()(["\n  display: flex;\n  align-items: center;\n"]);return zt=function(){return e},e}function Bt(){var e=Ee()(["\n  color: ",";\n  padding: 6px 25px;\n  list-style-type: none;\n  opacity: 1;\n  display: flex;\n  align-items: center;\n\n  ",";\n  &:hover {\n    ",";\n  }\n"]);return Bt=function(){return e},e}var Ht=je.c.li(Bt(),(function(e){return e.isActive?_t.B400:_t.N500}),(function(e){return e.isActive?"":"cursor: pointer"}),(function(e){return e.isActive?"":"background-color: #E5E8EC"})),Gt=je.c.div(zt()),Wt=je.c.div(Ut());function Vt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b()(this,n)}}var qt=function(e){y()(n,e);var t=Vt(n);function n(){var e;f()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),s()(h()(e),"onClick",(function(){return e.props.onChangeService(e.props.serviceName)})),e}return d()(n,[{key:"render",value:function(){var e=this.props,t=e.serviceFullName,n=e.serviceName,r=e.isActive,i=e.children;return x.a.createElement(Ht,{"data-testid":"media-picker-".concat(n,"-menu-item"),isActive:r,onClick:this.onClick},x.a.createElement(Gt,null,i),x.a.createElement(Wt,null,t))}}]),n}(j.Component),Kt=fe(null,(function(e){return{onChangeService:function(t){return e(Ue(t))}}}))(qt);function Yt(){var e=Ee()(["\n  fill: ",";\n"]);return Yt=function(){return e},e}function Zt(){var e=Ee()(["\n  width: 22px;\n  height: 22px;\n"]);return Zt=function(){return e},e}function Jt(){var e=Ee()(["\n  width: 100%;\n  border-top: 1px solid rgba(9, 30, 66, 0.06);\n  height: 0;\n"]);return Jt=function(){return e},e}function Qt(){var e=Ee()(["\n  width: 100%;\n  list-style-type: none;\n  margin: 9px 0 10px 0;\n  box-sizing: border-box;\n  padding: 0 25px 0 25px;\n  position: relative;\n  cursor: default;\n"]);return Qt=function(){return e},e}function Xt(){var e=Ee()(['\n  padding: 0;\n  float: left;\n  width: 100%;\n  margin: 17px 0 0 0 !important; /* We need important here due to default "ul" style overrides */\n']);return Xt=function(){return e},e}function $t(){var e=Ee()(["\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n  position: relative;\n  background-color: #eceef1;\n  z-index: 60;\n"]);return $t=function(){return e},e}var en=je.c.div($t()),tn=je.c.ul(Xt()),nn=je.c.li(Qt()),rn=je.c.div(Jt()),on=je.c.svg(Zt()),an=je.c.g(Yt(),(function(e){return e.active?"#0061C5":"#42526E"}));function cn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b()(this,n)}}var un=function(e){y()(n,e);var t=cn(n);function n(){return f()(this,n),t.apply(this,arguments)}return d()(n,[{key:"render",value:function(){var e=this.props.active;return x.a.createElement(on,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 27 35"},x.a.createElement(an,{active:e,"fill-rule":"evenodd","clip-rule":"evenodd"},x.a.createElement("path",{className:"logo-green",d:"M0 3h4v29H0z"}),x.a.createElement("path",{className:"logo-purple",d:"M24 11h4v21h-4z"}),x.a.createElement("path",{className:"logo-blue",d:"M0 31h28v4H0z"}),x.a.createElement("path",{className:"logo-yellow",d:"M0 0h16v4H0z"}),x.a.createElement("path",{className:"logo-red",d:"M24 8V4h-4V0h-4v12h12V8"}),x.a.createElement("path",{className:"logo-shadow",d:"M24 16v-4h4M16 0v4h-4"})))}}]),n}(j.Component);function sn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b()(this,n)}}var ln=function(e){y()(n,e);var t=sn(n);function n(){return f()(this,n),t.apply(this,arguments)}return d()(n,[{key:"render",value:function(){var e=this.props,t=e.isActive,n=e.onChangeService;return x.a.createElement(qt,{serviceName:"giphy",serviceFullName:"GIPHY",isActive:t,onChangeService:n},x.a.createElement(un,{active:t}))}}]),n}(j.Component),fn=fe(null,(function(e){return{onChangeService:function(){e(Ue("giphy")),e(Ct("",!1))}}}))(ln),pn=n(2751),dn=n.n(pn);function vn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b()(this,n)}}var hn=function(e){y()(n,e);var t=vn(n);function n(){var e;f()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),s()(h()(e),"renderBuiltInPlugins",(function(){var t=e.props,n=t.selected;return t.useForgePlugins?[]:[x.a.createElement(fn,{key:"giphy",isActive:"giphy"===n}),x.a.createElement(Kt,{key:"dropbox",serviceName:"dropbox",serviceFullName:"Dropbox",isActive:"dropbox"===n},x.a.createElement(Nt.a,{label:"dropbox"})),x.a.createElement(Kt,{key:"google",serviceName:"google",serviceFullName:"Google Drive",isActive:"google"===n},x.a.createElement(Lt.a,{label:"google"}))]})),s()(h()(e),"renderCustomPluginItems",(function(){var t=e.props,n=t.selected,r=t.plugins;return(void 0===r?[]:r).map((function(e){var t=e.name,r=e.icon;return x.a.createElement(Kt,{key:t,serviceName:t,serviceFullName:t,isActive:n===t},r)}))})),s()(h()(e),"getCloudPickingSidebarItems",(function(){return[x.a.createElement(nn,{key:"seperator"},x.a.createElement(rn,null))].concat(At()(e.renderBuiltInPlugins()),At()(e.renderCustomPluginItems()))})),e}return d()(n,[{key:"render",value:function(){var e=this.props.selected;return x.a.createElement(en,null,x.a.createElement(tn,null,x.a.createElement(Kt,{serviceName:"upload",serviceFullName:x.a.createElement(ye.a,ge.a.upload),isActive:"upload"===e},x.a.createElement(dn.a,{label:"upload"})),this.getCloudPickingSidebarItems()))}}]),n}(j.Component),mn=fe((function(e){return{selected:e.view.service.name,plugins:e.plugins}}))(hn),yn=n(2192),gn=n(429),bn=n(1266),On=n(31),wn=n(837),En=n(556),jn=n(1114),xn=function(e,t,n){var r,i="entering"===t?"0%":"100%",o="entering"===t?"100%":"0%",a="inout"===n||"in"===n&&"entering"===t||"out"===n&&"exiting"===t;return r={},s()(r,i,{transform:{top:"translate3d(0, -100%, 0)",right:"translate3d(100%, 0, 0)",bottom:"translate3d(0, 100%, 0)",left:"translate3d(-100%, 0, 0)"}[e],opacity:a?0:1}),s()(r,o,{transform:"none",opacity:1}),r},Pn=function(e){var t=e.children,n=e.enterFrom,r=e.exitTo,i=e.fade,o=void 0===i?"none":i,a=e.duration,c=void 0===a?En.b:a,u=e.animationTimingFunction,s=void 0===u?function(e){return"entering"===e?wn.c:wn.a}:u,l=Oe()(e,["children","enterFrom","exitTo","fade","duration","animationTimingFunction"]);return x.a.createElement(jn.a,me()({duration:c,enteringAnimation:xn(n,"entering",o),exitingAnimation:xn(r||n,"exiting",o),animationTimingFunction:s},l),t)},Cn=n(1118),kn=n(2205),Sn=n(17);function Dn(){var e=Ee()(["\n                border: 0;\n                clip: rect(1px, 1px, 1px, 1px);\n                height: 1px;\n                overflow: hidden;\n                padding: 0;\n                position: absolute;\n                white-space: nowrap;\n                width: 1px;\n              "]);return Dn=function(){return e},e}function In(){var e=Ee()(["\n            bottom: ","px;\n            left: ","px;\n            position: fixed;\n            z-index: ",";\n            @media (max-width: 560px) {\n              bottom: 0;\n              left: 0;\n            }\n          "]);return In=function(){return e},e}function Rn(){var e=Ee()(["\n                    ","\n                    ","\n                  "]);return Rn=function(){return e},e}var Mn=Object(Sn.h)(),An=50*Mn,Tn=6*Mn,Nn=10*Mn;function Fn(){}var Ln=Object(j.createContext)({onDismissed:function(){},dismissAllowed:function(){return!1}});var _n="\n  bottom: 0;\n  position: absolute;\n  width: ".concat(An,"px;\n  transition: transform ").concat(400,"ms ease-in-out;\n\n  @media (max-width: 560px) {\n    width: 100vw;\n  }\n\n  &:first-of-type {\n    transition: none;\n    transform: translate(0,0);\n  }\n\n  &:nth-of-type(n + 2) {\n    animation-duration: 0ms;\n    transform: translateX(0) translateY(100%) translateY(").concat(2*Mn,"px);\n  }\n\n  /* Layer the 'primary' flag above the 'secondary' flag */\n  &:nth-of-type(1) {\n    z-index: 5;\n  }\n  &:nth-of-type(2) {\n    z-index: 4;\n  }\n\n  &:nth-of-type(n + 4) {\n    visibility: hidden;\n  }\n"),Un=function(e){var t=e.id,n=e.label,r=void 0===n?"Flag notifications":n,i=e.labelTag,o=void 0===i?"h2":i,a=e.children,c=e.onDismissed,u=void 0===c?Fn:c,s=Array.isArray(a)?a.length>0:Boolean(a),l=null;s&&a&&(l=Array.isArray(a)?a[0].props.id:a.props.id);var f={onDismissed:u,dismissAllowed:function(e){return e===l}};return Object(On.e)(Ln.Provider,{value:f},Object(On.e)(kn.a,{zIndex:Sn.i.flag()},Object(On.e)("div",{id:t,css:Object(On.d)(In(),Tn,Nn,Sn.i.flag())},s?Object(On.e)(o,{css:Object(On.d)(Dn())},r):null,Object(On.e)(Cn.a,{appear:!1},!!a&&j.Children.map(a,(function(e,t){var n=0===t,r=e.props.id;return Object(On.e)(Pn,{key:r,enterFrom:"left",fade:"inout",duration:400,animationTimingFunction:function(){return wn.a}},(function(t){return Object(On.e)("div",me()({},t,{css:Object(On.d)(Rn(),_n,n?"\n                    && + * {\n                     transform: translate(0, 0);\n                     transition-duration: ".concat(200,"ms\n                   }"):"")}),e)}))}))))))},zn=n(29),Bn=n.n(zn),Hn=n(145),Gn=n.n(Hn),Wn=n(2753),Vn=n.n(Wn),qn=n(2228),Kn=n.n(qn),Yn=n(405),Zn=n(2018),Jn="normal",Qn={error:{light:_t.R400,dark:_t.R300},info:{light:_t.N500,dark:_t.N500},normal:{light:_t.N0,dark:_t.DN50},success:{light:_t.G400,dark:_t.G300},warning:{light:_t.Y200,dark:_t.Y300}},Xn=function(e,t){return Qn[e][t]},$n=_t.N60A,er={error:{light:_t.N0,dark:_t.DN40},info:{light:_t.N0,dark:_t.DN600},normal:{light:_t.N500,dark:_t.DN600},success:{light:_t.N0,dark:_t.DN40},warning:{light:_t.N700,dark:_t.DN40}},tr=function(e,t){return er[e][t]},nr=_t.N50A,rr={error:{light:_t.N40,dark:_t.N40},info:{light:_t.N40,dark:_t.N40},normal:{light:_t.B100,dark:_t.B100},success:{light:_t.N40,dark:_t.N40},warning:{light:_t.N200,dark:_t.N200}},ir=function(e,t){return rr[e][t]},or="rgba(255, 255, 255, 0.08)",ar={success:{light:or,dark:_t.N30A},info:{light:or,dark:or},error:{light:or,dark:_t.N30A},warning:{light:_t.N30A,dark:_t.N30A},normal:{light:"none",dark:"none"}},cr={success:{light:_t.N0,dark:_t.DN40},info:{light:_t.N0,dark:_t.DN600},error:{light:_t.N0,dark:_t.DN600},warning:{light:_t.N700,dark:_t.DN40},normal:{light:_t.B400,dark:_t.B100}},ur=function(e,t){return ar[e][t]},sr=function(e,t){return cr[e][t]},lr=n(2176);function fr(){var e=Ee()(["\n        max-height: ","px;\n        transition: max-height 0.3s;\n        display: flex;\n        flex: 1 1 100%;\n        flex-direction: column;\n        justify-content: center;\n        min-width: 0;\n        padding: 0 0 0 ","px;\n      "]);return fr=function(){return e},e}var pr=5*Object(Sn.h)(),dr=function(e){var t=e.children,n=e.isExpanded,r=e.testId;return Object(On.e)("div",{"aria-hidden":!n,css:Object(On.d)(fr(),n?150:0,pr),"data-testid":r&&"".concat(r,"-expander")},Object(On.e)(Cn.a,{appear:!0},n&&Object(On.e)(lr.a,null,(function(e){return Object(On.e)("div",e,t)}))))};function vr(){var e=Ee()(["\n            &&,\n            a&& {\n              margin-left: ","px;\n              font-weight: 500;\n              padding: 0 ","px !important;\n              background: ",";\n              color: "," !important;\n            }\n            &&:focus,\n            a&&:focus {\n              box-shadow: 0 0 0 2px ",";\n            }\n            &&:hover,\n            &&:active,\n            a&&:hover,\n            a&&:active {\n              text-decoration: underline;\n            }\n          "]);return vr=function(){return e},e}function hr(){var e=Ee()(["\n              text-align: center;\n              display: inline-block;\n              width: ","px;\n            "]);return hr=function(){return e},e}function mr(){var e=Ee()(["\n        display: flex;\n        flex-wrap: wrap;\n        padding-top: ","px;\n        transform: ",";\n        align-items: center;\n      "]);return mr=function(){return e},e}var yr=Object(Sn.h)(),gr=2*yr,br=yr/4,Or=function(e){var t=e.appearance,n=void 0===t?Jn:t,r=e.actions,i=void 0===r?[]:r,o=e.linkComponent,a=e.mode,c=e.testId;if(!i.length)return null;var u=n!==Jn;return Object(On.e)("div",{css:Object(On.d)(mr(),yr,n===Jn?"translateX(-".concat(br,"px)"):0),"data-testid":c&&"".concat(c,"-actions")},i.map((function(e,t){return[t&&!u?Object(On.e)("div",{css:Object(On.d)(hr(),gr),key:t+.5},"\xb7"):"",Object(On.e)(xe.a,{onClick:e.onClick,href:e.href,target:e.target,appearance:u?"default":"link",component:o,spacing:"compact",testId:e.testId,key:t,css:Object(On.d)(vr(),t&&u?yr:0,"normal"===n?0:yr,ur(n,a),sr(n,a),ir(n,a))},e.content)]})))},wr=function(e){var t=e.currentTarget,n=t===document.activeElement;requestAnimationFrame((function(){n&&t!==document.activeElement&&document.body.contains(t)?t.focus():!n&&document.activeElement&&document.activeElement instanceof HTMLElement&&document.activeElement.blur()}))};function Er(){var e=Ee()(["\n                    color: ",";\n                    word-wrap: break-word;\n                    overflow: auto;\n                    max-height: 100px; /* height is defined as 5 lines maximum by design */\n                  "]);return Er=function(){return e},e}function jr(){var e=Ee()(["\n                  color: ",";\n                  font-weight: 600;\n                  flex: 1;\n                  overflow: hidden;\n                  text-overflow: ellipsis;\n                  white-space: nowrap;\n                  padding: 0 0 0 ","px;\n                "]);return jr=function(){return e},e}function xr(){var e=Ee()(["\n                display: flex;\n                align-items: center;\n                height: ","px;\n              "]);return xr=function(){return e},e}function Pr(){var e=Ee()(["\n              background-color: ",";\n              border-radius: ","px;\n              box-sizing: border-box;\n              box-shadow: ",";\n              color: ",";\n              padding: ","px;\n              transition: background-color 200ms;\n              width: 100%;\n              z-index: ",";\n\n              &:focus {\n                outline: none;\n                box-shadow: 0 0 0 2px ",";\n              }\n            "]);return Pr=function(){return e},e}function Cr(){var e=Ee()(["\n            appearance: none;\n            background: none;\n            border: none;\n            border-radius: ","px;\n            color: ",";\n            cursor: pointer;\n            flex: 0 0 auto;\n            line-height: 1;\n            margin-left: ","px;\n            padding: 0;\n            white-space: nowrap;\n            &:focus {\n              outline: none;\n              box-shadow: 0 0 0 2px ",";\n            }\n          "]);return Cr=function(){return e},e}function kr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kr(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Dr(){}var Ir={componentName:"flag",packageName:"@atlaskit/flag",packageVersion:"14.2.2"},Rr=Object(Sn.h)(),Mr=2*Rr,Ar=4*Rr,Tr=function(e){var t=e.actions,n=void 0===t?[]:t,r=e.appearance,i=void 0===r?Jn:r,o=e.icon,a=e.title,c=e.description,u=e.linkComponent,s=e.onMouseOver,l=e.onFocus,f=void 0===l?Dr:l,p=e.onMouseOut,d=e.onBlur,v=void 0===d?Dr:d,h=e.onDismissed,m=void 0===h?Dr:h,y=e.testId,g=e.id,b=e.analyticsContext,O=Object(j.useContext)(Ln),w=O.onDismissed,E=(0,O.dismissAllowed)(g),x=Object(j.useCallback)((function(e,t){m(e,t),w(e,t)}),[m,w]),P=Object(j.useState)(!1),C=Bn()(P,2),k=C[0],S=C[1],D=Object(Zn.a)(Sr({fn:x,action:"dismissed",analyticsData:b},Ir)),I=i!==Jn,R=Object(j.useCallback)((function(e){var t=e.mode;if(!I&&!E)return null;if(I&&!c&&!n.length)return null;var r=Kn.a,o="Dismiss flag",a=function(){E&&D(g)},u="small",s=y&&"".concat(y,"-dismiss");return I&&(r=k?Vn.a:Gn.a,o="Toggle flag body",a=function(){return S(!k)},u="large",s=y&&"".concat(y,"-toggle")),Object(On.e)("button",{css:Object(On.d)(Cr(),Object(Sn.c)(),tr(i,t),Rr,ir(i,t)),"aria-expanded":k,onClick:a,"data-testid":s,type:"button"},Object(On.e)(r,{label:o,size:u}))}),[n.length,i,c,g,I,E,k,D,y]);Object(j.useEffect)((function(){I&&k&&!c&&!n.length&&S(!1)}),[n.length,c,I,k]);var M={onMouseOver:s,onFocus:Object(Zn.a)(Sr({fn:f,action:"focused",analyticsData:b},Ir)),onMouseOut:p,onBlur:Object(Zn.a)(Sr({fn:v,action:"blurred",analyticsData:b},Ir))},A=R,T="0 20px 32px -8px ".concat(nr);return I||(T="0 0 1px ".concat($n,", ").concat(T)),Object(On.e)(Yn.a.Consumer,null,(function(e){var t=e.mode,r=tr(i,t);return Object(On.e)("div",me()({css:Object(On.d)(Pr(),Xn(i,t),Object(Sn.c)(),T,r,Mr,Sn.i.flag(),ir(i,t)),role:"alert",tabIndex:0,onMouseDown:wr,"data-testid":y},M),Object(On.e)("div",{css:Object(On.d)(xr(),Ar)},o,Object(On.e)("span",{css:Object(On.d)(jr(),r,Mr)},a),Object(On.e)(A,{mode:t})),Object(On.e)(dr,{isExpanded:!I||k,testId:y},c&&Object(On.e)("div",{css:Object(On.d)(Er(),r),"data-testid":y&&"".concat(y,"-description")},c),Object(On.e)(Or,{actions:n,appearance:i,linkComponent:u,testId:y,mode:t})))}))},Nr=n(1106),Fr=n.n(Nr),Lr=n(2752),_r=n.n(Lr),Ur=n(496),zr=n.n(Ur),Br=n(498),Hr=n.n(Br);function Gr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b()(this,n)}}var Wr,Vr=function(e){y()(n,e);var t=Gr(n);function n(e){var r;return f()(this,n),r=t.call(this,e),s()(h()(r),"scrollHeight",0),s()(h()(r),"checkThreshold",(function(){var e=r.div.current;if(null!==e){var t=r.props.threshold||0,n=e.scrollTop+e.offsetHeight,i=Math.min(t,.1*e.scrollHeight);n>r.scrollHeight&&n>e.scrollHeight-i&&(r.scrollHeight=e.scrollHeight,r.props.onThresholdReached&&r.props.onThresholdReached())}})),s()(h()(r),"checkThresholdDebounce",Hr()(r.checkThreshold,r.props.delay,{leading:!0,trailing:!0})),r.div=x.a.createRef(),r}return d()(n,[{key:"componentDidMount",value:function(){this.checkThresholdDebounce()}},{key:"componentDidUpdate",value:function(){this.checkThresholdDebounce()}},{key:"render",value:function(){var e=this.props,t=e.width,n=e.height,r=e.children;return x.a.createElement("div",{ref:this.div,style:{width:t,height:n,overflowX:"hidden",overflowY:"auto",msOverflowStyle:"scrollbar",display:"inline-block"},onScroll:this.checkThresholdDebounce},r)}}]),n}(j.Component);s()(Vr,"defaultProps",{width:"100%",delay:500,threshold:100});var qr=function(e){if(void 0!==Wr&&!e)return Wr;var t=document.createElement("canvas"),n=t.getContext("webgl")||t.getContext("experimental-webgl");return Wr=!!n},Kr="START_FILE_BROWSER";function Yr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b()(this,n)}}var Zr=function(e){y()(n,e);var t=Yr(n);function n(){var e;f()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),s()(h()(e),"onUploadClick",(function(){var t=e.props,n=t.browserRef;(0,t.onClick)(),n&&n.current&&n.current.browse()})),e}return d()(n,[{key:"render",value:function(){return x.a.createElement(xe.a,{testId:"media-picker-upload-button",appearance:"default",onClick:this.onUploadClick},x.a.createElement(ye.a,ge.a.upload_file))}}]),n}(x.a.Component),Jr=fe(null,(function(e){return{onClick:function(){return e({type:Kr})}}}))(Zr),Qr=function(e){return"".concat("https://aui-cdn.atlassian.com/media","/").concat(e)},Xr=Qr("border-icon.png"),$r=Qr("files-icon.png");function ei(){var e=Ee()(["\n  height: 60px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-bottom: 10px;\n"]);return ei=function(){return e},e}function ti(){var e=Ee()(["\n  box-sizing: border-box;\n  width: 100%;\n  height: 100%;\n  background-color: white;\n  padding: 24px 24px 2px 24px;\n"]);return ti=function(){return e},e}function ni(){var e=Ee()(["\n  margin: 6px 0;\n  /* 9px to fix IE both edge and IE11 */\n  margin-right: 9px;\n  outline: none;\n\n  /* Cards are displayed in rows of 4, line up last card with edge of dropzone border */\n  &:nth-child(4n) {\n    margin-right: 0;\n  }\n"]);return ni=function(){return e},e}function ri(){var e=Ee()(["\n  display: flex;\n  flex-wrap: wrap;\n"]);return ri=function(){return e},e}function ii(){var e=Ee()(["\n  padding: 25px 10px 5px 0;\n  font-size: 20px;\n  color: #071d43;\n"]);return ii=function(){return e},e}function oi(){var e=Ee()(["\n  /* Hardcoded width to avoid difference in how it looks depending on\n   mac scroll bar setting. See https://product-fabric.atlassian.net/browse/EM-168\n   for more details */\n  width: 668px;\n  box-sizing: border-box;\n  border: 2px dashed #cfd4db;\n  border-image-source: url('","');\n  border-image-slice: 2;\n  border-image-repeat: round;\n  border-radius: 3px;\n  ","\n"]);return oi=function(){return e},e}function ai(){var e=Ee()(["\n  display: block;\n  float: left;\n  position: relative;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n"]);return ai=function(){return e},e}function ci(){var e=Ee()(["\n  margin-left: 10px;\n  margin-top: 14px;\n  text-align: center;\n"]);return ci=function(){return e},e}function ui(){var e=Ee()(["\n  display: block;\n  margin-left: 10px;\n  white-space: nowrap;\n  margin-top: 15px;\n  color: #6c798f;\n"]);return ui=function(){return e},e}function si(){var e=Ee()(["\n  float: left;\n"]);return si=function(){return e},e}function li(){var e=Ee()(["\n  float: left;\n  width: 115px;\n"]);return li=function(){return e},e}function fi(){var e=Ee()(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-height: 60px;\n  height: calc(100% - 211px);\n"]);return fi=function(){return e},e}var pi=je.c.div(fi()),di=je.c.img(li()),vi=je.c.div(si()),hi=je.c.div(ui()),mi=je.c.div(ci()),yi=je.c.div(ai()),gi=je.c.div(oi(),Xr,(function(e){return e.isEmpty?"height: calc(100% - 4px);":"height: 211px;"}));gi.displayName="DropzoneContainer";var bi=je.c.div(ii()),Oi=je.c.div(ri());Oi.displayName="CardsWrapper";var wi=je.c.div(ni());wi.displayName="CardWrapper";var Ei=je.c.div(ti()),ji=je.c.div(ei()),xi=n(218);function Pi(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b()(this,n)}}var Ci=function(e){y()(n,e);var t=Pi(n);function n(){return f()(this,n),t.apply(this,arguments)}return d()(n,[{key:"render",value:function(){var e=this.props,t=e.isEmpty,n=e.browserRef,r=Object(xi.a)("folderUploads",this.props.featureFlags)?ge.a.drag_and_drop_your_files_and_folders:ge.a.drag_and_drop_your_files;return x.a.createElement(gi,{isEmpty:t},x.a.createElement(yi,null,x.a.createElement(di,{src:$r}),x.a.createElement(vi,null,x.a.createElement(hi,null,x.a.createElement(ye.a,r)),x.a.createElement(mi,null,x.a.createElement(Jr,{browserRef:n})))))}}]),n}(j.Component),ki="EDITOR_SHOW_IMAGE";function Si(e){return e.type===ki}function Di(e,t){return{type:ki,imageUrl:e,originalFile:t}}var Ii="EDIT_REMOTE_IMAGE";var Ri="Oops! We couldn't retrieve the image",Mi="Delete",Ai="REMOVE_FILES_FROM_RECENTS",Ti=function(e){return e.type===Ai};function Ni(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ni(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ni(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Li(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b()(this,n)}}var _i=function(e){return{label:Mi,handler:e,icon:x.a.createElement(_r.a,{label:Mi,size:"medium"})}},Ui={width:160,height:108},zi=function(e){y()(n,e);var t=Li(n);function n(){var e;f()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i)),s()(h()(e),"mounted",!1),s()(h()(e),"state",{hasPopupBeenVisible:!1,isWebGLWarningFlagVisible:!1,shouldDismissWebGLWarningFlag:!1,isLoadingNextPage:!1}),s()(h()(e),"renderDeleteConfirmation",(function(){var t=e.state.deletionCandidate,n=e.props.removeFileFromRecents,r=function(){e.setState({deletionCandidate:void 0})};if(!t)return null;var i=t.id,o=t.occurrenceKey,a=[{text:"Delete permanently",onClick:function(){n(i,o),r()}},{text:"Cancel",onClick:function(){r()}}];return x.a.createElement(pe.b,null,x.a.createElement(de.a,{width:"small",appearance:"danger",heading:"Delete forever?",actions:a,onClose:r},"This file is about to be permanently deleted. Once you delete, it's gone for good."))})),s()(h()(e),"onThresholdReachedListener",(function(){e.state.isLoadingNextPage||e.setState({isLoadingNextPage:!0},c()(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=e.props.mediaClient,t.next=4,n.collection.loadNextPage(ve.c);case 4:return t.prev=4,e.mounted&&e.setState({isLoadingNextPage:!1}),t.finish(4);case 7:case"end":return t.stop()}}),t,null,[[0,,4,7]])}))))})),s()(h()(e),"renderLoadingView",(function(){return x.a.createElement(pi,null,x.a.createElement(bn.a,{size:"large"}))})),s()(h()(e),"renderLoadingNextPageView",(function(){var t=e.state.isLoadingNextPage;return x.a.createElement(ji,null,t&&x.a.createElement(bn.a,null))})),s()(h()(e),"renderRecentsView",(function(t){var n=e.state.isWebGLWarningFlagVisible;return x.a.createElement("div",null,x.a.createElement(bi,null,x.a.createElement(ye.a,ge.a.recent_uploads)),x.a.createElement(Oi,null,t),e.renderLoadingNextPageView(),n&&e.renderWebGLWarningFlag())})),s()(h()(e),"renderWebGLWarningFlag",(function(){var t=e.props.intl.formatMessage;return x.a.createElement(Un,{onDismissed:e.onFlagDismissed},x.a.createElement(Tr,{description:t(ge.a.webgl_warning_description),icon:x.a.createElement(zr.a,{label:"info"}),id:"webgl-warning-flag",title:t(ge.a.unable_to_annotate_image),actions:[{content:t(ge.a.learn_more),onClick:e.onLearnMoreClicked}]}))})),s()(h()(e),"onFlagDismissed",(function(){e.setState({isWebGLWarningFlagVisible:!1})})),s()(h()(e),"onLearnMoreClicked",(function(){e.setState({shouldDismissWebGLWarningFlag:!0}),e.onFlagDismissed(),window.open("https://get.webgl.org/")})),e}return d()(n,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e=this.props,t=e.isLoading,n=e.browserRef,r=e.featureFlags,i=this.renderCards(),o=!t&&0===i.length,a=null;t?a=this.renderLoadingView():o||(a=this.renderRecentsView(i));var c=this.renderDeleteConfirmation();return x.a.createElement(Vr,{"data-testid":"media-picker-recents-infinite-scroll",height:"100%",onThresholdReached:this.onThresholdReachedListener},x.a.createElement(Ei,null,x.a.createElement(Ci,{isEmpty:o,browserRef:n,featureFlags:r}),a,c))}},{key:"onAnnotateActionClick",value:function(e){var t=this;return function(){qr()?e():t.showWebGLWarningFlag()}}},{key:"renderCards",value:function(){var e=this.recentFilesCards();return this.uploadingFilesCards().concat(e).map((function(e){var t=e.key,n=e.card;return x.a.createElement(wi,{tabIndex:0,key:t},n)}))}},{key:"uploadingFilesCards",value:function(){var e=this,t=this.props,n=t.uploads,r=t.onFileClick,i=t.mediaClient,a=t.featureFlags,u=Object.keys(n);u.sort((function(e,t){return n[t].index-n[e].index}));var s=this.props.selectedItems.filter((function(e){return"upload"===e.serviceName})).map((function(e){return e.id}));return u.map((function(t){var n=e.props.uploads[t].file,u=Object(gn.a)(n.metadata.mimeType),l=Fi(Fi({},n.metadata),{},{mimeType:u}),f=l.id,p=l.size,d=l.name,v=l.occurrenceKey,h=s.indexOf(f)>-1,m={id:f,mimeType:u,name:d,size:p,occurrenceKey:v,date:0},y=[_i(c()(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({deletionCandidate:{id:f,occurrenceKey:v}});case 1:case"end":return t.stop()}}),t)}))))],g={id:f,mediaItemType:"file",collectionName:ve.c};return{isUploading:!0,key:f,card:x.a.createElement(yn.a,{mediaClientConfig:i.config,identifier:g,dimensions:Ui,selectable:!0,selected:h,onClick:function(){return r(m,"upload")},actions:y,testId:"media-picker-uploading-media-card",featureFlags:a})}}))}},{key:"recentFilesCards",value:function(){var e=this,t=this.props,n=t.mediaClient,r=t.recents,i=t.recentsCollection,o=t.selectedItems,a=t.onFileClick,c=t.onEditRemoteImage,u=t.intl.formatMessage,s=t.featureFlags,l=r.items,f=o.filter((function(e){return"recent_files"===e.serviceName})).map((function(e){return e.id})),p=function(e){var t=e.mediaItemDetails;if(t){var n=t.id;a({id:n,date:0,name:t.name||"",mimeType:t.mimeType||"",size:t.size||0,createdAt:t.createdAt||0},"recent_files")}},d=function(t){if(t&&"file"===t.type){var n=t.details,r=n.id,o=n.name;qr()?c({id:r,name:o||""},i):e.showWebGLWarningFlag()}};return l.map((function(t){var r,o=t.id,a=t.occurrenceKey,c=t.details,l=f.indexOf(o)>-1,v=[_i((function(){e.setState({deletionCandidate:{id:o,occurrenceKey:a}})}))];"image"===c.mediaType&&v.unshift((r=d,{label:u(ge.a.annotate),handler:r,icon:x.a.createElement(Fr.a,{label:"Annotate",size:"medium"})}));var h={id:o,mediaItemType:"file",collectionName:i};return{key:"".concat(a,"-").concat(o),card:x.a.createElement(yn.a,{mediaClientConfig:n.config,identifier:h,dimensions:Ui,selectable:!0,selected:l,onClick:p,actions:v,testId:"media-picker-recent-media-card",featureFlags:s})}}))}},{key:"showWebGLWarningFlag",value:function(){this.setState({isWebGLWarningFlagVisible:!0})}}]),n}(j.Component),Bi=fe((function(e){return{isLoading:e.view.isLoading,recents:e.recents,uploads:e.uploads,selectedItems:e.selectedItems}}),(function(e){return{onFileClick:function(t,n){return e(Je(t,n))},onEditorShowImage:function(t,n){return e(Di(n,t))},onEditRemoteImage:function(t,n){return e(function(e,t){return{type:Ii,item:e,collectionName:t}}(t,n))},removeFileFromRecents:function(t,n){return e(function(e,t){return{type:Ai,id:e,occurrenceKey:t}}(t,n))}}}))(Object(ye.e)(zi)),Hi=n(2210),Gi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.create(null);function n(e,n){return t[e]=t[e]||[],t[e].push(n),this}function r(e,t){return t._once=!0,n(e,t),this}function i(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n?t[e].splice(t[e].indexOf(n),1):delete t[e],this}function o(e){for(var n=this,r=arguments.length,o=Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];var c=t[e]&&t[e].slice();return c&&c.forEach((function(t){t._once&&i(e,t),t.apply(n,o)})),this}return Gi({},e,{on:n,once:r,off:i,emit:o})},Vi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=void 0,n=void 0,r=void 0,i=void 0,o=void 0,a=void 0,c=void 0,u=void 0,s=void 0,l=void 0,f=void 0,p=void 0,d=void 0,v=0===e.packed.indexOf("data-")?e.packed:"data-"+e.packed,h=e.sizes.slice().reverse(),m=!1!==e.position,y=e.container.nodeType?e.container:document.querySelector(e.container),g={all:function(){return j(y.children)},new:function(){return j(y.children).filter((function(e){return!e.hasAttribute(""+v)}))}},b=[C,k,S],O=[D,I,R,M],w=Wi({pack:N,update:F,resize:L});return w;function E(e){e.forEach((function(e){return e()}))}function j(e){arguments.length>1&&void 0!==arguments[1]||document;return Array.prototype.slice.call(e)}function x(e){return Array.apply(null,Array(e)).map((function(){return 0}))}function P(){return h.map((function(e){return e.mq&&window.matchMedia("(min-width: "+e.mq+")").matches})).indexOf(!0)}function C(){r=P()}function k(){i=-1===r?h[h.length-1]:h[r]}function S(){a=x(i.columns)}function D(){f=g[t?"new":"all"]()}function I(){0!==f.length&&(p=f.map((function(e){return e.clientWidth})),d=f.map((function(e){return e.clientHeight})))}function R(){f.forEach((function(e,t){o=a.indexOf(Math.min.apply(Math,a)),e.style.position="absolute",c=a[o]+"px",u=o*p[t]+o*i.gutter+"px",m?(e.style.top=c,e.style.left=u):e.style.transform="translate3d("+u+", "+c+", 0)",e.setAttribute(v,""),s=p[t],l=d[t],s&&l&&(a[o]+=l+i.gutter)}))}function M(){y.style.position="relative",y.style.width=i.columns*s+(i.columns-1)*i.gutter+"px",y.style.height=Math.max.apply(Math,a)-i.gutter+"px"}function A(){n||(window.requestAnimationFrame(T),n=!0)}function T(){r!==P()&&(N(),w.emit("resize",i)),n=!1}function N(){return t=!1,E(b.concat(O)),w.emit("pack")}function F(){return t=!0,E(O),w.emit("update")}function L(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=e?"addEventListener":"removeEventListener";return window[t]("resize",A),w}};function qi(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b()(this,n)}}var Ki=function(e){y()(n,e);var t=qi(n);function n(){return f()(this,n),t.apply(this,arguments)}return d()(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.id,n=e.packed,i=void 0===n?"data-packed":n,o=e.sizes,a=void 0===o?[{columns:3,gutter:10}]:o,c=("function"===typeof r?r:Vi)({container:"#".concat(t),packed:i,sizes:a});c.resize(!0),this.setState({instance:c})}},{key:"componentDidUpdate",value:function(e){var t=e.children,n=this.props.children,r=this.state.instance;if(0!==t.length||0!==n.length)return r.pack()}},{key:"componentWillUnmount",value:function(){this.state.instance.resize(!1)}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.children;return x.a.createElement("div",{id:t},n)}}]),n}(j.Component);s()(Ki,"defaultProps",{packed:"data-packed",sizes:[{columns:3,gutter:10}]});var Yi=function(e){var t=e.width,n=e.height,r=e.containerWidth,i=e.gapSize,o=e.numberOfColumns,a=Math.floor((r-i*(o-1))/o);return{width:a,height:Math.round(a/t*n)}};function Zi(){var e=Ee()(["\n  color: ",";\n  font-size: 14px;\n  margin-top: 5px;\n"]);return Zi=function(){return e},e}function Ji(){var e=Ee()(["\n  font-size: 14px;\n  font-weight: bold;\n  margin-bottom: 5px;\n"]);return Ji=function(){return e},e}function Qi(){var e=Ee()(["\n  width: 200px;\n"]);return Qi=function(){return e},e}function Xi(){var e=Ee()(["\n  width: 92px;\n"]);return Xi=function(){return e},e}function $i(){var e=Ee()(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-top: 50px;\n\n  /* Required to allow end users to select text in the error message */\n  cursor: auto;\n  user-select: text;\n"]);return $i=function(){return e},e}function eo(){var e=Ee()(["\n  display: flex;\n  justify-content: center;\n  margin-top: 20px;\n"]);return eo=function(){return e},e}function to(){var e=Ee()(["\n  color: #091e42;\n  font-size: 20px;\n  margin-top: 15px;\n"]);return to=function(){return e},e}function no(){var e=Ee()(["\n  "," margin-top: 5px;\n"]);return no=function(){return e},e}var ro=je.c.div(no(),(function(e){var t=e.width;return"width: ".concat(t,"px;")})),io=je.c.div(to()),oo=je.c.div(eo()),ao=je.c.div($i()),co=je.c.div(Xi()),uo=je.c.img(Qi()),so=je.c.p(Ji()),lo=je.c.p(Zi(),_t.N300),fo=n(2255);function po(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b()(this,n)}}var vo=function(e){y()(n,e);var t=po(n);function n(){return f()(this,n),t.apply(this,arguments)}return d()(n,[{key:"render",value:function(){return x.a.createElement(ao,null,x.a.createElement(co,null,fo.a),x.a.createElement(so,null,x.a.createElement(ye.a,ge.a.cant_retrieve_files)),x.a.createElement(lo,null,x.a.createElement(ye.a,ge.a.check_your_network)),x.a.createElement(xe.a,{onClick:this.props.action},x.a.createElement(ye.a,ge.a.try_again)))}}]),n}(x.a.Component);function ho(){var e=Ee()(["\n  text-align: center;\n  font-size: 16px;\n  color: ",";\n  margin: 0;\n  margin-left: 8px;\n"]);return ho=function(){return e},e}function mo(){var e=Ee()(["\n  display: flex;\n  align-items: center;\n  margin-bottom: 24px;\n"]);return mo=function(){return e},e}function yo(){var e=Ee()(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  min-height: 480px;\n"]);return yo=function(){return e},e}function go(){var e=Ee()(["\n  height: 100%;\n  overflow-y: scroll;\n  padding: 0 28px;\n"]);return go=function(){return e},e}function bo(){var e=Ee()(["\n  height: 24px;\n  width: 24px;\n"]);return bo=function(){return e},e}function Oo(){var e=Ee()(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 28px;\n\n  label {\n    display: none;\n  }\n\n  > div {\n    flex: initial;\n  }\n"]);return Oo=function(){return e},e}function wo(){var e=Ee()(["\n  overflow: auto;\n  height: 100%;\n"]);return wo=function(){return e},e}var Eo=je.c.div(wo()),jo=je.c.div(Oo()),xo=je.c.img(bo()),Po=je.c.div(go()),Co=je.c.div(yo()),ko=je.c.div(mo()),So=je.c.p(ho(),_t.N100);function Do(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Io(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Do(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Do(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ro(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b()(this,n)}}var Mo=function(e){y()(n,e);var t=Ro(n);function n(e){var r;return f()(this,n),r=t.call(this,e),s()(h()(r),"getContent",(function(){var e=r.props,t=e.hasError,n=e.isLoading,i=e.cardModels;return t?r.renderError():n||0!==i.length?r.renderSearchResults():r.renderEmptyState()})),s()(h()(r),"renderError",(function(){return x.a.createElement(vo,{action:r.handleRetryButtonClick})})),s()(h()(r),"renderEmptyState",(function(){var e=r.state.query;return x.a.createElement(ao,null,x.a.createElement(uo,{src:"https://media1.giphy.com/media/10YK5Hh53nC3dK/200w.gif"}),x.a.createElement(so,null,x.a.createElement(ye.a,ge.a.no_gifs_found)),x.a.createElement(lo,null,x.a.createElement(ye.a,me()({},ge.a.no_gifs_found_suggestion,{values:{query:e}}))))})),s()(h()(r),"renderSearchResults",(function(){var e=r.props,t=e.isLoading,n=e.cardModels,i=e.totalResultCount,o=void 0===i||n.length<i-1,a=(t||o)&&r.renderLoadMoreButton();return x.a.createElement("div",null,r.renderMasonaryLayout(r.props.cardModels),a)})),s()(h()(r),"renderMasonaryLayout",(function(e){if(0===e.length)return null;var t=e.map((function(e,t){var n=e.dataURI,i=e.metadata,o=e.dimensions,a=r.props.selectedItems.some((function(e){return e.id===i.id&&"giphy"===e.serviceName})),c=Yi(Io(Io({},o),{},{gapSize:5,containerWidth:677,numberOfColumns:4})),u={mediaItemType:"external-image",dataURI:n,name:i.name};return x.a.createElement(ro,{key:"".concat(t,"-metadata.id"),width:c.width},x.a.createElement(yn.a,{identifier:u,mediaClientConfig:{},dimensions:c,selectable:!0,selected:a,onClick:r.createClickHandler(e)}))}));return x.a.createElement(Ki,{id:"mediapicker-gif-layout",sizes:[{columns:4,gutter:5}]},t)})),s()(h()(r),"renderLoadMoreButton",(function(){var e=r.props.isLoading,t=e?x.a.createElement(bn.a,null):void 0;return x.a.createElement(oo,null,x.a.createElement(xe.a,{onClick:r.handleLoadMoreButtonClick,isDisabled:e,iconAfter:t},x.a.createElement(ye.a,ge.a.load_more_gifs)))})),s()(h()(r),"createSearchChangeHandler",(function(){var e=r.props.onSearchQueryChange,t=Hr()(e,1e3);return function(e){var n=e.currentTarget.value;r.setState({query:n}),t(n)}})),s()(h()(r),"createClickHandler",(function(e){return function(){(0,r.props.onCardClick)(e)}})),s()(h()(r),"handleLoadMoreButtonClick",(function(){(0,r.props.onLoadMoreButtonClick)(r.state.query,!0)})),s()(h()(r),"handleRetryButtonClick",(function(){(0,r.props.onSearchQueryChange)(r.state.query)})),r.state={query:""},r.searchChangeHandler=r.createSearchChangeHandler(),r}return d()(n,[{key:"componentDidUpdate",value:function(e){e.onSearchQueryChange!==this.props.onSearchQueryChange&&this.createSearchChangeHandler()}},{key:"render",value:function(){var e=this.props.intl.formatMessage,t=this.state.query;return x.a.createElement(Po,{id:"mediapicker-giphy-container"},x.a.createElement(io,null,"GIPHY"),x.a.createElement(Hi.a,{placeholder:e(ge.a.search_all_gifs),onChange:this.searchChangeHandler,value:t}),this.getContent())}}]),n}(j.Component),Ao=fe((function(e){return{hasError:e.view.hasError,isLoading:e.view.isLoading,cardModels:e.giphy.imageCardModels,totalResultCount:e.giphy.totalResultCount,selectedItems:e.selectedItems}}),(function(e){return{onSearchQueryChange:function(t){return e(Ct(t,!1))},onLoadMoreButtonClick:function(t,n){return e(Ct(t,n))},onCardClick:function(t){var n=t.metadata,r=n.id,i=n.name,o=n.size;e(Je({mimeType:"image/gif",id:r||"",name:i||"",size:o||0,date:Date.now()},"giphy"))}}}))(Object(ye.e)(Mo)),To=n(2380),No=n.n(To),Fo=n(2381),Lo=n.n(Fo),_o=n(829),Uo=n.n(_o),zo=n(2207),Bo=n(2178),Ho=n(2201),Go=n(2754),Wo=n.n(Go),Vo=n(2755),qo=n.n(Vo);function Ko(){var e=Ee()(["\n  /* TODO: remove this when the ak-dropdown-menu package supports custom item types */\n  span[role='presentation'] > span > span:first-child {\n    display: none;\n  }\n"]);return Ko=function(){return e},e}function Yo(){var e=Ee()(["\n  color: ",";\n  cursor: ",";\n  font-size: ",";\n"]);return Yo=function(){return e},e}function Zo(){var e=Ee()(["\n  color: ",";\n  display: ",";\n  margin: 0 4px;\n  text-decoration: none;\n"]);return Zo=function(){return e},e}function Jo(){var e=Ee()(["\n  &:hover {\n    text-decoration: ",";\n  }\n"]);return Jo=function(){return e},e}function Qo(){var e=Ee()(["\n  text-overflow: ellipsis;\n  white-space: nowrap;\n"]);return Qo=function(){return e},e}function Xo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xo(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ea(){var e=Ee()(["\n  height: 30px;\n  display: flex;\n"]);return ea=function(){return e},e}function ta(){var e=Ee()([""]);return ta=function(){return e},e}function na(){var e=Ee()(["\n  display: flex;\n  justify-content: space-between;\n\n  /* Ensure header has height */\n  min-height: 60px;\n  padding: 15px 13px;\n  border-radius: 3px;\n  box-sizing: border-box;\n  background-color: ",";\n"]);return na=function(){return e},e}var ra=je.c.div(na(),_t.N0);ra.displayName="FolderViewerNavigation";var ia=je.c.div(ta()),oa=je.c.div(ea()),aa=function(e){return x.a.createElement(xe.a,me()({},e,{theme:function(e,t){var n=e(t),r=n.buttonStyles,i=Oe()(n,["buttonStyles"]);return $o({buttonStyles:$o($o({},r),{},{marginRight:"5px"})},i)}}))},ca=je.c.div(Qo()),ua=je.c.span(Jo(),(function(e){return e.isLast?"none":"underline"})),sa=je.c.span(Zo(),_t.N500,(function(e){return e.isLast?"none":"inline"})),la=je.c.span(Yo(),(function(e){return e.isLast?_t.N900:_t.N500}),(function(e){return e.isLast?"default":"pointer"}),(function(e){return e.isLast?"20px":"14px"})),fa=function(e){return x.a.createElement(xe.a,e)},pa=je.c.div(Ko());function da(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b()(this,n)}}var va={dropbox:"Dropbox",google:"Google Drive"},ha=function(e){y()(n,e);var t=da(n);function n(){var e;f()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),s()(h()(e),"state",{dropdownOpen:!1,availableAccounts:[]}),s()(h()(e),"mounted",!1),s()(h()(e),"onRefreshButtonClick",(function(){var t=e.props,n=t.service,r=t.path;(0,t.onChangePath)(n.name,n.accountId,r)})),s()(h()(e),"onChangeAccountHandler",(function(t,n){return function(){(0,e.props.onChangeAccount)(t,n)}})),s()(h()(e),"onUnlinkAccountHandler",(function(t,n){return function(){(0,e.props.onUnlinkAccount)(t,n)}})),s()(h()(e),"onStartAuthHandler",(function(t){return function(){(0,e.props.onStartAuth)(t)}})),s()(h()(e),"handleOpenChange",(function(t){e.setState({dropdownOpen:t.isOpen})})),e}return d()(n,[{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"componentDidMount",value:function(){var e=c()(o.a.mark((function e(){var t,n,r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.mounted=!0,t=this.props,n=t.accounts,r=t.service,e.next=4,n;case 4:e.t0=function(e){return e.type===r.name},i=e.sent.filter(e.t0),this.mounted&&this.setState({availableAccounts:i});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=c()(o.a.mark((function e(t){var n,r,i,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,r=n.accounts,i=n.service,t.service===i){e.next=7;break}return e.next=4,r;case 4:e.t0=function(e){return e.type===i.name},a=e.sent.filter(e.t0),this.mounted&&this.setState({availableAccounts:a});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.service,n=e.path,r=this.generateBreadcrumbs(t,n),i=this.getAccountsDropdown();return x.a.createElement(ra,null,r,x.a.createElement(ia,null,x.a.createElement(oa,null,x.a.createElement(aa,{onClick:this.onRefreshButtonClick,iconBefore:x.a.createElement(Wo.a,{label:"refresh"})}),i)))}},{key:"getAccountButton",value:function(){var e=this.state.dropdownOpen;return x.a.createElement(fa,{isSelected:e,iconBefore:x.a.createElement(qo.a,{label:"account settings"})})}},{key:"getAccountsDropdownItems",value:function(){var e=this,t=this.props,n=t.service,r=t.intl.formatMessage,i=this.state.availableAccounts.map((function(t){var r=t.id,i=t.displayName,o=t.type;return x.a.createElement(zo.a,{key:r,onClick:e.onChangeAccountHandler(o,r)},r===n.accountId?x.a.createElement("b",null,i):i)})),o=[x.a.createElement(zo.a,{key:"add",onClick:this.onStartAuthHandler(n.name)},x.a.createElement(ye.a,ge.a.add_account)),x.a.createElement(zo.a,{key:"unlink",onClick:this.onUnlinkAccountHandler(n.name,n.accountId)},x.a.createElement(ye.a,ge.a.unlink_account))];return[x.a.createElement(Bo.a,{key:"accounts",title:r(ge.a.accounts)},i),x.a.createElement(Bo.a,{key:"actions",title:r(ge.a.actions)},o)]}},{key:"getAccountsDropdown",value:function(){var e=this.getAccountsDropdownItems();return x.a.createElement(pa,null,x.a.createElement(Ho.a,{onOpenChange:this.handleOpenChange,trigger:this.getAccountButton(),position:"bottom right"},e))}},{key:"generateBreadcrumbs",value:function(e,t){var n=this,r=[{id:"",name:va[e.name]||e.name}].concat(t),i=r.slice(-2).map((function(e){var t=r.indexOf(e);return r.slice(0,t+1)})).map((function(t,r,i){var o=r===i.length-1;return n.renderBreadcrumb(e,t,o)}));return x.a.createElement(ca,null,i)}},{key:"renderBreadcrumb",value:function(e,t,n){var r=this.props.onChangePath;if(0===t.length)return null;var i=t[t.length-1];return x.a.createElement(la,{key:i.id,onClick:function(){return r(e.name,e.accountId,t.slice(1))},isLast:n},x.a.createElement(ua,{title:i.name,isLast:n},i.name),x.a.createElement(sa,{isLast:n},"/"))}}]),n}(j.Component),ma=fe((function(e){var t=e.accounts,n=e.view;return{accounts:t,path:n.path,service:n.service}}),(function(e){return{onChangeAccount:function(t,n){return e(Ae(t,n))},onChangePath:function(t,n,r){return e(Ne(t,n,At()(r)))},onStartAuth:function(t){return e(at(t))},onUnlinkAccount:function(t,n){return e(lt({id:n,name:t}))}}}))(Object(ye.e)(ha));function ya(){var e=Ee()(["\n  display: flex;\n  justify-content: center;\n\n  margin-top: 10px;\n"]);return ya=function(){return e},e}function ga(){var e=Ee()(["\n  color: "," !important;\n  right: 23px;\n  top: 12px;\n"]);return ga=function(){return e},e}function ba(){var e=Ee()(["\n  color: ",";\n  min-width: 70px;\n  text-align: right;\n  padding: 0 0 0 10px;\n"]);return ba=function(){return e},e}function Oa(){var e=Ee()(["\n  color: ",";\n  text-align: right;\n  padding: 0 10px 0 10px;\n"]);return Oa=function(){return e},e}function wa(){var e=Ee()(["\n  padding-left: 17px;\n  vertical-align: middle;\n  overflow: hidden;\n  text-overflow: ellipsis;\n\n  ",";\n"]);return wa=function(){return e},e}function Ea(){var e=Ee()(["\n  /* vertically center icon */\n  display: flex;\n  align-items: center;\n\n  width: 32px;\n  height: 32px;\n"]);return Ea=function(){return e},e}function ja(){var e=Ee()(["\n  display: flex;\n  align-items: center;\n"]);return ja=function(){return e},e}function xa(){var e=Ee()(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  box-sizing: border-box;\n\n  width: 100%;\n  height: 48px;\n\n  margin-top: 0;\n  padding: 8px 28px 8px 28px;\n\n  cursor: pointer;\n\n  "," &:hover {\n    ",";\n  }\n"]);return xa=function(){return e},e}function Pa(){var e=Ee()(["\n  /* Take up all of the available space between header and footer */\n  flex: 1;\n\n  /* Ensure navigation header is pinned to top */\n  overflow: auto;\n\n  list-style: none;\n\n  /* Override default list styles */\n  margin-top: 0;\n  padding-left: 0;\n"]);return Pa=function(){return e},e}function Ca(){var e=Ee()(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  /* Take up all of the available space between header and footer */\n  flex: 1;\n"]);return Ca=function(){return e},e}function ka(){var e=Ee()(["\n  display: flex;\n  flex-direction: column;\n\n  height: 100%;\n"]);return ka=function(){return e},e}var Sa=je.c.div(ka()),Da=je.c.div(Ca()),Ia=je.c.ul(Pa()),Ra=je.c.li(xa(),(function(e){return e.isSelected?"background-color: ".concat(_t.B200,";"):"background-color: white;"}),(function(e){var t=e.isSelected;return"background-color: ".concat(t?_t.B200:_t.N30,";")}));Ra.displayName="FolderViewerRow";var Ma=je.c.div(ja()),Aa=je.c.div(Ea()),Ta=je.c.div(wa(),(function(e){return e.isSelected?"color: white;":"color: ".concat(_t.N900)})),Na=je.c.div(Oa(),_t.N90),Fa=je.c.div(ba(),_t.N90),La=je.c.div(ga(),_t.B400),_a=je.c.div(ya()),Ua=n(2756),za=n.n(Ua),Ba=n(2317),Ha=n.n(Ba),Ga=n(838),Wa=n.n(Ga),Va=n(2268),qa=n.n(Va),Ka=n(2757),Ya=n.n(Ka),Za=n(2758),Ja=n.n(Za),Qa=n(2318),Xa=n.n(Qa),$a=n(2759),ec=n.n($a),tc=n(839),nc=n.n(tc),rc=n(2319),ic=n.n(rc);function oc(){var e=Ee()(["\n  ",";\n"]);return oc=function(){return e},e}var ac=je.c.div(oc(),(function(e){var t=e.color;return"color: ".concat(t,";")}));var cc=x.a.createElement(ac,{color:_t.B75},x.a.createElement(za.a,{label:"folder"})),uc=function(e){return function(e){return["application/vnd.atlassian.mediapicker.folder","application/vnd.google-apps.folder"].indexOf(e)>-1}(e)?cc:function(e){return 0===e.indexOf("image/")}(e)?x.a.createElement(ac,{color:_t.Y200},x.a.createElement(Ha.a,{label:"image"})):function(e){return 0===e.indexOf("video/")}(e)?x.a.createElement(ac,{color:_t.R300},x.a.createElement(Wa.a,{label:"video"})):function(e){return 0===e.indexOf("audio/")}(e)?x.a.createElement(ac,{color:_t.P200},x.a.createElement(qa.a,{label:"audio"})):function(e){return["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel","application/vnd.google-apps.spreadsheet","application/x-iwork-keynote-sffnumbers"].indexOf(e)>-1}(e)?x.a.createElement(ac,{color:_t.G300},x.a.createElement(Ya.a,{label:"spreadsheet"})):function(e){return["application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.ms-powerpoint","application/vnd.google-apps.presentation","application/x-iwork-keynote-sffkey"].indexOf(e)>-1}(e)?x.a.createElement(ac,{color:_t.Y400},x.a.createElement(Ja.a,{label:"presentation"})):function(e){return["application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword","application/x-iwork-pages-sffpages"].indexOf(e)>-1}(e)?x.a.createElement(ac,{color:_t.B200},x.a.createElement(Xa.a,{label:"document"})):function(e){return"application/pdf"===e}(e)?x.a.createElement(ac,{color:_t.R400},x.a.createElement(ec.a,{label:"pdf document"})):function(e){return["application/zip","application/x-7z-compressed","application/x-bzip","application/x-bzip2"].indexOf(e)>-1}(e)?x.a.createElement(ac,{color:_t.N200},x.a.createElement(nc.a,{label:"zip"})):x.a.createElement(ac,{color:_t.N70},x.a.createElement(ic.a,{label:"unknown"}))};function sc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lc(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b()(this,n)}}var fc=function(e){if(!e)return"";var t=(new Date).toDateString(),n=new Date(e),r=n.toDateString();return No()(n,t===r?"H:MM TT":"d mmm yyyy")},pc=x.a.createElement(La,null,x.a.createElement(Uo.a,{label:"check"})),dc=function(e){y()(n,e);var t=lc(n);function n(){var e;f()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),s()(h()(e),"renderContents",(function(){return e.isPageInitialLoading?x.a.createElement(Da,null,x.a.createElement(bn.a,{size:"large"})):e.renderFolderContent(e.props.items)})),s()(h()(e),"renderServiceFolder",(function(t,n){return x.a.createElement(Ra,{onClick:e.itemClicked(t),key:t.id},x.a.createElement(Ma,null,x.a.createElement(Aa,null,n),x.a.createElement(Ta,null,t.name)))})),s()(h()(e),"renderServiceFile",(function(t,n,r){var i=r?pc:e.renderFileCreateDateAndSize(t);return x.a.createElement(Ra,{isSelected:r,onClick:e.itemClicked(t),key:t.id},x.a.createElement(Ma,null,x.a.createElement(Aa,null,n),x.a.createElement(Ta,{isSelected:r},t.name)),i)})),s()(h()(e),"renderFileCreateDateAndSize",(function(e){var t=e.date,n=e.size;return x.a.createElement(Ma,null,x.a.createElement(Na,null,fc(t)),x.a.createElement(Fa,null,Lo()(n)))})),s()(h()(e),"onLoadMoreButtonClick",(function(){var t=e.props,n=t.service,r=t.path,i=t.nextCursor,o=t.isLoading,a=t.onLoadMoreClick;o||a(n.name,n.accountId,r,i||"")})),e}return d()(n,[{key:"render",value:function(){return x.a.createElement(Sa,null,x.a.createElement(ma,null),this.renderContents())}},{key:"renderFolderContent",value:function(e){var t=this;if(!e)return null;var n=e.filter((function(e){return-1===e.mimeType.indexOf("application/vnd.google-apps.")})).map((function(e){var n=uc(e.mimeType),r=t.props.selectedItems.map((function(e){return e.id})).indexOf(e.id)>-1;return function(e){return"application/vnd.atlassian.mediapicker.folder"!==e.mimeType}(e)?t.renderServiceFile(e,n,r):t.renderServiceFolder(e,n)}));return x.a.createElement(Ia,null,[n,this.renderLoadMoreButton()])}},{key:"renderLoadMoreButton",value:function(){var e=this.props,t=e.nextCursor,n=e.isLoading;if(t||this.isPageMoreLoading){var r=n?"Loading...":"Load more";return x.a.createElement(_a,{key:"load-more-button-wrapper"},x.a.createElement(xe.a,{className:"moreBtn",onClick:this.onLoadMoreButtonClick,isDisabled:n},r))}return null}},{key:"itemClicked",value:function(e){var t=this;return function(){var n=t.props,r=n.service,i=n.onFolderClick,o=n.onFileClick;if(function(e){return"application/vnd.atlassian.mediapicker.folder"===e.mimeType}(e)){var a=t.props.path.slice();a.push({id:e.id,name:e.name}),i(r.name,r.accountId,a)}else{var c=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sc(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);o(r.name,r.accountId,c)}}}},{key:"isPageInitialLoading",get:function(){return this.props.isLoading&&!this.props.currentCursor}},{key:"isPageMoreLoading",get:function(){return this.props.isLoading&&this.props.currentCursor}}]),n}(j.Component),vc=fe((function(e){var t=e.view,n=e.selectedItems;return{path:t.path,service:t.service,items:t.items,selectedItems:n,isLoading:t.isLoading,currentCursor:t.currentCursor,nextCursor:t.nextCursor}}),(function(e){return{onFolderClick:function(t,n,r){return e(Ne(t,n,r))},onFileClick:function(t,n,r){return e(Je(r,t,n))},onLoadMoreClick:function(t,n,r,i){return e(function(e,t,n,r){return{type:Ve,serviceName:e,accountId:t,path:n,nextCursor:r}}(t,n,r,i))}}}))(dc);function hc(){var e=Ee()(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n"]);return hc=function(){return e},e}function mc(){var e=Ee()(["\n  text-align: center;\n  font-size: 16px;\n  color: ",";\n"]);return mc=function(){return e},e}function yc(){var e=Ee()(["\n  margin-top: 18px;\n  color: ",";\n  opacity: 0.7;\n  font-size: 12px;\n  text-align: center;\n"]);return yc=function(){return e},e}function gc(){var e=Ee()(["\n  text-align: center;\n"]);return gc=function(){return e},e}function bc(){var e=Ee()(["\n  color: ",";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  > span {\n    width: 120px;\n    height: 120px;\n\n    svg {\n      width: 100%;\n      height: 100%;\n    }\n  }\n"]);return bc=function(){return e},e}var Oc=je.c.div(bc(),_t.N30),wc=je.c.div(gc()),Ec=je.c.div(yc(),_t.N500),jc=je.c.div(mc(),_t.N100),xc=je.c.div(hc());function Pc(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b()(this,n)}}var Cc={dropbox:{name:"Dropbox",icon:x.a.createElement(Nt.a,{label:"dropbox",size:"xlarge"})},google:{name:"Google Drive",icon:x.a.createElement(Lt.a,{label:"drive",size:"xlarge"})}},kc=function(e){y()(n,e);var t=Pc(n);function n(){var e;f()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),s()(h()(e),"onClick",(function(){return e.props.onStartAuth(e.props.service.name)})),e}return d()(n,[{key:"render",value:function(){var e=this.props.service,t=Cc[e.name];if(!t)return null;var n=t.name,r=t.icon;return x.a.createElement(xc,null,x.a.createElement(jc,null,x.a.createElement(ye.a,me()({},ge.a.upload_file_from,{values:{name:n}}))),x.a.createElement(Oc,null,r),x.a.createElement(wc,null,x.a.createElement(xe.a,{appearance:"primary",className:"connectBtn",onClick:this.onClick},x.a.createElement(ye.a,me()({},ge.a.connect_to,{values:{name:n}})))),x.a.createElement(Ec,null,x.a.createElement(ye.a,me()({},ge.a.connect_account_description,{values:{name:n}}))))}}]),n}(j.Component),Sc=fe((function(e){return{service:e.view.service}}),(function(e){return{onStartAuth:function(t){return e(at(t))}}}))(kc);function Dc(){var e=Ee()(["\n  height: 100%;\n  width: 100%;\n  overflow-y: scroll;\n"]);return Dc=function(){return e},e}var Ic=je.c.div(Dc());function Rc(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b()(this,n)}}var Mc=function(e){y()(n,e);var t=Rc(n);function n(){var e;f()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),s()(h()(e),"renderError",(function(){return x.a.createElement(ao,{id:"browser-container"},x.a.createElement(vo,{action:e.reloadService}))})),s()(h()(e),"reloadService",(function(){var t=e.props;(0,t.reloadService)(t.service)})),e}return d()(n,[{key:"render",value:function(){var e=this.props,t=e.service,n=e.hasError?this.renderError():t.accountId?x.a.createElement(vc,null):x.a.createElement(Sc,null);return x.a.createElement(Ic,null,n)}}]),n}(j.Component),Ac=fe((function(e){var t=e.view;return{service:t.service,hasError:t.hasError}}),(function(e){return{reloadService:function(t){return e(Ue(t.name))}}}))(Mc);function Tc(){var e=Ee()([""]);return Tc=function(){return e},e}function Nc(){var e=Ee()(["\n  width: 70px;\n  height: 70px;\n"]);return Nc=function(){return e},e}function Fc(){var e=Ee()(["\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100vw;\n  height: 100vh;\n  z-index: 101;\n"]);return Fc=function(){return e},e}function Lc(){var e=Ee()(["\n  margin-top: 10px;\n  font-size: 16px;\n  color: #165ecc;\n"]);return Lc=function(){return e},e}function _c(){var e=Ee()(["\n  animation: "," 0.5s;\n"]);return _c=function(){return e},e}function Uc(){var e=Ee()(["\n  from {\n    opacity: 0;\n    transform: translate(0, 30px);\n  }\n"]);return Uc=function(){return e},e}function zc(){var e=Ee()(["\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background: rgba(255, 255, 255, 0.9);\n  left: 0;\n  top: 0;\n  display: ",";\n  text-align: center;\n  z-index: 100;\n  align-items: center;\n  justify-content: center;\n"]);return zc=function(){return e},e}var Bc=je.c.div(zc(),(function(e){return e.isActive?"flex":"none"})),Hc=Object(je.e)(Uc()),Gc=je.c.div(_c(),Hc),Wc=je.c.div(Lc()),Vc=je.c.div(Fc()),qc=je.c.svg(Nc()),Kc=je.c.g(Tc());function Yc(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b()(this,n)}}var Zc=function(e){y()(n,e);var t=Yc(n);function n(){return f()(this,n),t.apply(this,arguments)}return d()(n,[{key:"render",value:function(){return x.a.createElement(qc,{viewBox:"0 0 24 24",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},x.a.createElement(Kc,{id:"Symbols",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},x.a.createElement(Kc,{id:"Upload-cloud-active",fill:"#165ECC"},x.a.createElement("path",{d:"M13,13.769312 L15.4995642,13.769312 C15.7692032,13.769312 15.8594741,13.5936547 15.6861267,13.3769704 L12.1240983,8.92443488 C12.0565453,8.83999358 11.9444393,8.83876288 11.8759017,8.92443488 L8.31387329,13.3769704 C8.14236212,13.5913594 8.22405275,13.769312 8.50043583,13.769312 L11,13.769312 L11,16.7978014 C11,16.9132156 11.0891309,17 11.1990795,17 L12.8009205,17 C12.9140625,17 13,16.9094726 13,16.7978014 L13,13.769312 Z M6,20 C3.23857625,20 1,17.7614237 1,15 C1,12.580468 2.71857515,10.5623307 5.00162508,10.0996885 C5.00054449,10.0665918 5,10.0333595 5,10 C5,8.34314575 6.34314575,7 8,7 C8.4650862,7 8.90545376,7.10583308 9.2983335,7.29473006 C9.99550814,5.37293414 11.8374211,4 14,4 C16.7614237,4 19,6.23857625 19,9 C19,9.37003761 18.9598026,9.73068663 18.8835364,10.0778186 C21.2235498,10.4950422 23,12.540065 23,15 C23,17.7614237 20.7614237,20 18,20 L6,20 Z",id:"Combined-Shape"}))))}}]),n}(j.Component);function Jc(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b()(this,n)}}var Qc=function(e){y()(n,e);var t=Jc(n);function n(){return f()(this,n),t.apply(this,arguments)}return d()(n,[{key:"render",value:function(){var e=this.props.isActive;return x.a.createElement(Bc,{isActive:e},x.a.createElement(Gc,null,x.a.createElement(Zc,null),x.a.createElement(Wc,null,x.a.createElement(ye.a,ge.a.drop_your_files))),x.a.createElement(Vc,null))}}]),n}(j.Component),Xc=n(2035);function $c(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b()(this,n)}}var eu=function(e){y()(r,e);var t=$c(r);function r(){var e;f()(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),s()(h()(e),"state",{EditorView:r.EditorView}),e}return d()(r,[{key:"UNSAFE_componentWillMount",value:function(){var e=c()(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.EditorView){e.next=11;break}return e.prev=1,e.next=4,n.e(12).then(n.bind(null,2975));case 4:t=e.sent,r.EditorView=t.default,this.setState({EditorView:t.default}),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:case"end":return e.stop()}}),e,this,[[1,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.EditorView?x.a.createElement(this.state.EditorView,this.props):x.a.createElement(Xc.a,{blankedColor:"none",invertSpinnerColor:!1})}}]),r}(x.a.PureComponent);s()(eu,"displayName","AsyncEditorView");var tu=function(){function e(t){var n=this;f()(this,e),this.escHandler=t,this.keyDownListener=function(e){return n.onKeyDown(e)},window.addEventListener("keydown",this.keyDownListener),window.focus()}return d()(e,[{key:"teardown",value:function(){window.removeEventListener("keydown",this.keyDownListener)}},{key:"onKeyDown",value:function(e){"Escape"!==e.key&&27!==e.which||this.escHandler()}}]),e}();function nu(){var e=Ee()(["\n  position: fixed;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background-color: ",";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 200;\n  overflow: hidden;\n"]);return nu=function(){return e},e}var ru=je.c.div(nu(),_t.N700A);function iu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ou(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iu(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function au(){var e=Ee()(["\n  color: ",";\n  margin-top: 4px;\n  margin-bottom: 20px;\n  width: 256px;\n  text-align: center;\n"]);return au=function(){return e},e}function cu(){var e=Ee()(["\n  color: ",";\n  margin-top: 16px;\n  margin-bottom: 4px;\n  width: 256px;\n  text-align: center;\n  font-weight: bold;\n"]);return cu=function(){return e},e}function uu(){var e=Ee()(["\n  width: 92px;\n"]);return uu=function(){return e},e}function su(){var e=Ee()(["\n  width: 290px;\n  padding: 16px;\n  background-color: ",";\n  border-radius: 4px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n"]);return su=function(){return e},e}var lu=je.c.div(su(),_t.N0),fu=je.c.div(uu()),pu=je.c.div(cu(),_t.N900),du=je.c.div(au(),_t.N70),vu=function(e){return x.a.createElement(xe.a,me()({},e,{theme:function(e,t){var n=e(t),r=n.buttonStyles,i=Oe()(n,["buttonStyles"]);return ou({buttonStyles:ou(ou({},r),{},{display:"inline-flex",width:"84px",margin:"2px",justifyContent:"center"})},i)}}))};function hu(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b()(this,n)}}var mu=function(e){y()(n,e);var t=hu(n);function n(){return f()(this,n),t.apply(this,arguments)}return d()(n,[{key:"componentDidMount",value:function(){this.escHelper=new tu(this.props.onCancel)}},{key:"componentWillUnmount",value:function(){this.escHelper&&this.escHelper.teardown()}},{key:"render",value:function(){return x.a.createElement(ru,null,x.a.createElement(lu,null,x.a.createElement(fu,null,fo.a),x.a.createElement(pu,null,this.props.message),x.a.createElement(du,null,this.renderHint()),this.renderTryAgainButton(),this.renderCancelButton()))}},{key:"renderHint",value:function(){var e=this.props,t=e.onRetry,n=e.intl.formatMessage;return t?x.a.createElement("span",null,n(ge.a.error_hint_retry)):x.a.createElement("span",null,n(ge.a.error_hint_critical))}},{key:"renderTryAgainButton",value:function(){var e=this.props,t=e.onRetry,n=e.intl.formatMessage;return t?x.a.createElement(vu,{appearance:"primary",onClick:t},n(ge.a.try_again)):null}},{key:"renderCancelButton",value:function(){var e=this.props,t=e.onCancel,n=e.onRetry,r=e.intl.formatMessage,i=n?ge.a.cancel:ge.a.close;return x.a.createElement(vu,{appearance:"subtle",onClick:t},r(i))}}]),n}(j.Component),yu=Object(ye.e)(mu);function gu(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b()(this,n)}}var bu=function(e){y()(n,e);var t=gu(n);function n(){return f()(this,n),t.apply(this,arguments)}return d()(n,[{key:"componentDidMount",value:function(){this.escHelper=new tu(this.props.onCancel)}},{key:"componentWillUnmount",value:function(){this.escHelper&&this.escHelper.teardown()}},{key:"render",value:function(){return x.a.createElement(ru,null,x.a.createElement(bn.a,{size:"large",appearance:"invert"}))}}]),n}(j.Component);function Ou(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b()(this,n)}}var wu=function(e){y()(n,e);var t=Ou(n);function n(){var e;f()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),s()(h()(e),"renderContent",(function(t){var n=t.imageUrl,r=t.originalFile,i=t.error;return i?e.renderError(i):n&&r?x.a.createElement(ru,null,x.a.createElement(eu,{imageUrl:n,onSave:e.onEditorSave(r),onCancel:e.onCancel,onError:e.onEditorError})):x.a.createElement(bu,{onCancel:e.onCancel})})),s()(h()(e),"onEditorError",(function(t,n){e.props.onShowEditorError({message:t,retryHandler:n})})),s()(h()(e),"onEditorSave",(function(t){return function(n){var r=e.props,i=r.localUploader,o=r.onDeselectFile,a=r.onCloseEditor,c=t.name,u=e.urltoFile(n,c);i.addFiles([u]),o(t.id),a("Save")}})),s()(h()(e),"onCancel",(function(){e.props.onCloseEditor("Close")})),s()(h()(e),"urltoFile",(function(e,t){var n=e.split(","),r=n[0].match(/:(.*?);/);if(!r||r.length<2)throw new Error("Failed to retrieve file from data URL");for(var i=r[1],o=atob(n[1]),a=o.length,c=new Uint8Array(a);a--;)c[a]=o.charCodeAt(a);var u=new Blob([c],{type:i});return u.name=t,u})),e}return d()(n,[{key:"render",value:function(){var e=this.props.editorData;return e?this.renderContent(e):null}},{key:"renderError",value:function(e){var t=e.message,n=e.retryHandler;return x.a.createElement(yu,{message:t,onRetry:n,onCancel:this.onCancel})}}]),n}(j.Component),Eu=fe((function(e){return{editorData:e.editorData}}),(function(e){return{onShowEditorError:function(t){var n=t.message,r=t.retryHandler;return e(We(n,r))},onCloseEditor:function(t){return e(function(e){return{type:Be,selection:e}}(t))},onDeselectFile:function(t){return e(function(e){return{type:ze,id:e}}(t))}}}))(wu),ju="START_APP";function xu(e){return e.type===ju}var Pu="FILE_UPLOADS_START";var Cu="FILE_UPLOAD_ERROR";var ku="DROPZONE_DROP_IN";var Su="DROPZONE_DRAG_OUT";function Du(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b()(this,n)}}var Iu=function(e){y()(n,e);var t=Du(n);function n(){var e;f()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),s()(h()(e),"createDefaultI18nProvider",(function(){return new ye.c({locale:"en"}).getChildContext().intl})),e}return d()(n,[{key:"getChildContext",value:function(){var e=this.props,t=e.store,n=e.proxyReactContext;return{store:t,getAtlaskitAnalyticsEventHandlers:n&&n.getAtlaskitAnalyticsEventHandlers?n.getAtlaskitAnalyticsEventHandlers:function(){return[]},intl:n&&n.intl||this.createDefaultI18nProvider()}}},{key:"render",value:function(){return this.props.children}}]),n}(j.Component);function Ru(){var e=Ee()(["\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n\n  /* Height of the Popup should never change */\n  height: calc(100vh - 200px);\n\n  background-color: white;\n  min-height: ",";\n"]);return Ru=function(){return e},e}function Mu(){var e=Ee()(["\n  width: 235px;\n  min-width: 235px;\n  background-color: ",";\n  min-height: ",";\n"]);return Mu=function(){return e},e}function Au(){var e=Ee()(["\n  display: flex;\n  cursor: default;\n  user-select: none;\n  font-family: ",";\n  border-radius: 3px;\n  position: relative;\n\n  /* Ensure that the modal has a static size */\n  width: 968px;\n"]);return Au=function(){return e},e}s()(Iu,"childContextTypes",{store:function(){},getAtlaskitAnalyticsEventHandlers:function(){},intl:ye.f});var Tu="498px",Nu=je.c.div(Au(),Object(Sn.e)()),Fu=je.c.div(Mu(),_t.N30,Tu),Lu=je.c.div(Ru(),Tu),_u=n(2449),Uu=n(2446),zu=n(2383),Bu=n(2342),Hu=n(2447);function Gu(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b()(this,n)}}var Wu=function(e){y()(n,e);var t=Gu(n);function n(e,r){var i;f()(this,n),i=t.call(this),s()(h()(i),"addFiles",(function(e){return i.uploadService.addFiles(e)})),s()(h()(i),"onFilesAdded",(function(e){var t=e.files;i.emitUploadsStart(t)})),s()(h()(i),"onFilePreviewUpdate",(function(e){var t=e.file,n=e.preview;i.emitUploadPreviewUpdate(t,n)})),s()(h()(i),"onFileConverting",(function(e){var t=e.file;i.emitUploadEnd(t)})),s()(h()(i),"onUploadError",(function(e){var t=e.fileId,n=e.error;i.emitUploadError(t,n)}));var o=r.uploadParams;i.mediaClient=e;var a=r.shouldCopyFileToRecents,c=void 0===a||a;return i.uploadService=new Hu.a(i.mediaClient,o,c),i.config=r,i.uploadService.on("files-added",i.onFilesAdded),i.uploadService.on("file-preview-update",i.onFilePreviewUpdate),i.uploadService.on("file-converting",i.onFileConverting),i.uploadService.on("file-upload-error",i.onUploadError),i}return d()(n,[{key:"cancel",value:function(e){this.uploadService.cancel(e)}},{key:"setUploadParams",value:function(e){this.uploadService.setUploadParams(e)}}]),n}(Bu.a);function Vu(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b()(this,n)}}var qu=function(e){y()(n,e);var t=Vu(n);function n(e){var r;f()(this,n),r=t.call(this,e),s()(h()(r),"browserRef",x.a.createRef()),s()(h()(r),"dropzoneRef",x.a.createRef()),s()(h()(r),"onDragLeave",(function(e){(0,r.props.onDropzoneDragOut)(e.length),r.setDropzoneActive(!1)})),s()(h()(r),"onDragEnter",(function(){r.setDropzoneActive(!0)})),s()(h()(r),"onDrop",(function(e){var t=r.props,n=t.onDropzoneDropIn,i=t.onUploadsStart;n(e.files.length),i(e)})),s()(h()(r),"setDropzoneActive",(function(e){r.setState({isDropzoneActive:e})})),s()(h()(r),"renderClipboard",(function(){var e=r.props,t=e.onUploadError,n=e.tenantUploadParams,i=e.featureFlags,o={uploadParams:n,shouldCopyFileToRecents:!1,featureFlags:i};return x.a.createElement(_u.Clipboard,{mediaClient:r.componentMediaClient,config:o,featureFlags:i,onUploadsStart:r.onDrop,onError:t})})),s()(h()(r),"renderBrowser",(function(){var e=r.props,t=e.tenantUploadParams,n=e.featureFlags,i=e.onUploadsStart,o=e.onUploadError,a={uploadParams:t,shouldCopyFileToRecents:!1,multiple:!0,featureFlags:n};return x.a.createElement(zu.Browser,{ref:r.browserRef,mediaClient:r.componentMediaClient,config:a,featureFlags:n,onUploadsStart:i,onError:o})})),s()(h()(r),"renderDropzone",(function(){var e=r.props,t=e.onUploadError,n=e.tenantUploadParams,i=e.featureFlags,o={uploadParams:n,shouldCopyFileToRecents:!1,featureFlags:i};return x.a.createElement(Uu.Dropzone,{ref:r.dropzoneRef,mediaClient:r.componentMediaClient,config:o,featureFlags:i,onUploadsStart:r.onDrop,onError:t,onDragEnter:r.onDragEnter,onDragLeave:r.onDragLeave})}));var i=e.onStartApp,o=e.onUploadsStart,a=e.onUploadError,c=e.tenantMediaClient,u=e.userMediaClient,l=e.tenantUploadParams;r.state={isDropzoneActive:!1};var p=new E.a({authProvider:c.config.authProvider,userAuthProvider:u.config.authProvider});return r.componentMediaClient=p,r.localUploader=new Wu(p,{uploadParams:l,shouldCopyFileToRecents:!1}),r.localUploader.on("uploads-start",o),r.localUploader.on("upload-error",a),i({onCancelUpload:function(e){r.browserRef.current&&r.browserRef.current.cancel(e),r.dropzoneRef.current&&r.dropzoneRef.current.cancel(e),r.localUploader.cancel(e)}}),r}return d()(n,[{key:"render",value:function(){var e=this.props,t=e.selectedServiceName,n=e.isVisible,r=e.onClose,i=e.store,o=e.proxyReactContext,a=e.useForgePlugins,c=void 0!==a&&a,u=this.state.isDropzoneActive;return x.a.createElement(pe.b,null,n&&x.a.createElement(M,{store:i},x.a.createElement(de.a,{onClose:r,width:"x-large",isChromeless:!0},x.a.createElement(Iu,{store:i,proxyReactContext:o},x.a.createElement("div",{"data-testid":"media-picker-popup"},x.a.createElement(Nu,null,x.a.createElement(Fu,null,x.a.createElement(mn,{useForgePlugins:c})),x.a.createElement(Lu,null,this.renderCurrentView(t),x.a.createElement(Rt,null)),x.a.createElement(Qc,{isActive:u}),x.a.createElement(Eu,{localUploader:this.localUploader})),this.renderClipboard(),this.renderDropzone(),this.renderBrowser())))))}},{key:"renderCurrentView",value:function(e){var t=this.props,n=t.plugins,r=void 0===n?[]:n,i=t.onFileClick,o=t.selectedItems;if("upload"===e){var a=this.props,c=a.userMediaClient,u=a.featureFlags;return x.a.createElement(Bi,{browserRef:this.browserRef,mediaClient:c,recentsCollection:ve.c,featureFlags:u})}if("giphy"===e)return x.a.createElement(Ao,null);var s=r.find((function(t){return t.name===e}));if(s){var l={fileClick:function(e,t){var n={id:e.id,date:(new Date).getTime(),mimeType:"",name:"",size:0,metadata:e.metadata};i(n,t)}};return s.render(l,o)}return x.a.createElement(Ac,null)}}]),n}(j.Component),Ku=fe((function(e){var t=e.view,n=e.tenantMediaClient,r=e.userMediaClient,i=e.config,o=e.plugins,a=e.selectedItems;return{selectedServiceName:t.service.name,isVisible:t.isVisible,config:i,plugins:o,selectedItems:a,tenantMediaClient:n,userMediaClient:r}}),(function(e){return{onStartApp:function(t){return e(function(e){return{type:ju,payload:e}}(t))},onUploadsStart:function(t){return e(function(e){return{type:Pu,files:e.files}}(t))},onClose:function(){e(it()),e(tt())},onUploadError:function(t){return e(function(e){return{type:Cu,fileId:e.fileId,error:e.error,originalEvent:{name:"upload-error",data:e}}}(t))},onDropzoneDragOut:function(t){return e(function(e){return{type:Su,fileCount:e}}(t))},onDropzoneDropIn:function(t){return e(function(e){return{type:ku,fileCount:e}}(t))},onFileClick:function(t,n){return e(Je(t,n))}}}))(qu),Yu="SHOW_POPUP";function Zu(e){return e.type===Yu}var Ju="CANCEL_UPLOAD";function Qu(e){return{type:Ju,payload:e}}var Xu=n(2761),$u=n(2762),es=n.n($u),ts=n(319),ns=n.n(ts),rs=n(2015),is=n(181);function os(e){return Object(is.isClientBasedAuth)(e)?{"X-Client-Id":e.clientId,Authorization:"Bearer ".concat(e.token)}:{"X-Issuer":e.asapIssuer,Authorization:"Bearer ".concat(e.token)}}function as(e){return Object(is.isClientBasedAuth)(e)?{client:e.clientId,token:e.token}:{issuer:e.asapIssuer,token:e.token}}var cs=n(825);function us(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ss(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?us(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):us(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ls="lBOxhhz1BM62Y3JsK0iQv1pRYyOGUjR8",fs=function(e){return e.json()},ps=function(){function e(){var t=this;f()(this,e),s()(this,"fetchTrendingGifs",(function(e){var n={api_key:ls,rating:"pg",offset:e},r="".concat("https://api.giphy.com/v1/gifs/trending").concat(t.stringifyParams(n));return fetch(r).then(fs).then(t.mapGiphyResponseToViewModel)})),s()(this,"fetchGifsRelevantToSearch",(function(e,n){var r={api_key:ls,rating:"pg",q:e,offset:n},i="".concat("https://api.giphy.com/v1/gifs/search").concat(t.stringifyParams(r));return fetch(i).then(fs).then(t.mapGiphyResponseToViewModel)})),s()(this,"mapGiphyResponseToViewModel",(function(e){var t=e.data,n=e.pagination;return{cardModels:t.map((function(e){var t=e.id,n=e.slug,r=e.images.fixed_width,i=r.size,o=r.url,a=r.width,c=r.height;return{metadata:{id:t,name:n.replace(new RegExp("-".concat(t)),""),mediaType:"image",size:parseInt(i,10)},dataURI:o,dimensions:{width:parseInt(a,10),height:parseInt(c,10)}}})),totalResultCount:n.total_count}}))}return d()(e,[{key:"fetchCloudAccountFolder",value:function(e,t,n,r,i){var o=this;return this.query("".concat(ds(e.baseUrl),"/service/").concat(t,"/").concat(n,"/folder"),"GET",{folderId:r,limit:100,cursor:i},os(e)).then(fs).then((function(e){var n=e.data;return"dropbox"===t?ss(ss({},n),{},{items:o.sortDropboxFiles(n.items)}):n}))}},{key:"getServiceList",value:function(e){return this.query("".concat(ds(e.baseUrl),"/accounts"),"GET",{},os(e)).then(fs).then((function(e){return function(e){return e.reduce((function(e,t){return e.concat(t.accounts.map((function(e){return ss(ss({},e),{},{type:t.type})})))}),new Array)}(e.data)}))}},{key:"unlinkCloudAccount",value:function(e,t){return this.query("".concat(ds(e.baseUrl),"/account/").concat(t),"DELETE",{},os(e)).then((function(){}))}},{key:"stringifyParams",value:function(e){var t=Object.keys(e);if(!t.length)return"";var n=t.map((function(t){var n=e[t];return void 0!==n?"".concat(t,"=").concat(n):void 0})).filter((function(e){return!!e})).join("&");return"?".concat(n)}},{key:"query",value:function(e,t,n,r){var i=new Headers(ss(ss({},r),{},{"Content-Type":"application/json; charset=utf-8"})),o="GET"===t?this.stringifyParams(n):"",a="GET"!==t?JSON.stringify(n):void 0,c="".concat(e).concat(o),u=new Request(c,{method:t,headers:i,body:a});return fetch(u)}},{key:"isFolder",value:function(e){return"application/vnd.atlassian.mediapicker.folder"===e.mimeType}},{key:"sortDropboxFiles",value:function(e){var t=this;return e.sort((function(e,n){var r=t.isFolder(e),i=t.isFolder(n);if(!r&&i)return 1;if(r&&!i)return-1;var o=e.name.toLowerCase(),a=n.name.toLowerCase();return o>a?1:o<a?-1:0}))}}]),e}(),ds=function(e){return"".concat(function(e){var t=cs.parse(e),n=t.protocol,r=t.host;return"".concat(n,"//").concat(r)}(e),"/picker")};function vs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vs(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ms=function(){function e(t){f()(this,e),this.userAuthProvider=t}return d()(e,[{key:"startAuth",value:function(e,t){var n=window.open("","_blank");return this.userAuthProvider().then((function(r){return new Promise((function(i){var o=ns()(),a=as(r),c=Object(rs.d)(hs(hs({},a),{},{redirectUrl:"".concat(e,"?channelId=").concat(o)}));n.location="".concat(ds(r.baseUrl),"/service/").concat(t,"?").concat(c);var u=es()({window:n,scope:o});u.ready((function(){u.listen("auth-callback-received",(function(){u.send({method:"auth-callback-done",params:{}}),u.destroy(),i()}))}))}))})).catch((function(e){throw n&&n.close(),e}))}}]),e}(),ys=function e(t,n,r){var i=this;f()(this,e),s()(this,"teardown",(function(){window.clearTimeout(i.pingTimeoutId),i.ws.close()})),s()(this,"send",(function(e){var t=i.ws;if(t.readyState===t.OPEN)t.send(JSON.stringify(e));else if(t.readyState===t.CONNECTING){t.addEventListener("open",(function n(){t.removeEventListener("open",n),t.send(JSON.stringify(e))}))}})),s()(this,"schedulePing",(function(){var e,t,n=(e=25e3,t=35e3,Math.floor(Math.random()*(e-t+1))+t);window.clearTimeout(i.pingTimeoutId),i.pingTimeoutId=window.setTimeout(i.ping,n)})),s()(this,"ping",(function(){if(i.isWebSocketClosed())return i.teardown(),void i.onConnectionLost();i.sendHeartBeat(),i.schedulePing()})),s()(this,"isWebSocketClosed",(function(){return i.ws.readyState===i.ws.CLOSED})),s()(this,"sendHeartBeat",(function(){i.ws.readyState===i.ws.OPEN&&i.ws.send("")})),s()(this,"setHandler",(function(){i.ws.onmessage=function(e){var t=JSON.parse(e.data);i.onDataReceived(t)}})),this.onDataReceived=n,this.onConnectionLost=r;var o=function(e){var t=cs.parse(e),n=t.protocol,r=t.host;return"".concat("http:"===n?"ws:":"wss:","//").concat(r,"/picker/ws/")}(t.baseUrl),a=as(t);this.ws=new WebSocket("".concat(o,"?").concat(Object(rs.d)(a))),this.setHandler(),this.schedulePing()},gs=function(){function e(t,n,r){var i=this;f()(this,e),s()(this,"retriesRemaining",10),s()(this,"openWs",(function(){try{window.clearTimeout(i.retryTimeoutId),i.ws=new ys(i.auth,i.wsDataReceived,i.onConnectionLost),i.resetIdleTimeout()}catch(e){--i.retriesRemaining,i.retriesRemaining>0?i.retryTimeoutId=window.setTimeout(i.openWs,1e3):(i.teardown(),i.onConnectionLost())}})),s()(this,"wsDataReceived",(function(e){i.resetIdleTimeout(),i.onDataReceived(e)})),s()(this,"resetIdleTimeout",(function(){window.clearTimeout(i.idleTimeoutId),i.idleTimeoutId=window.setTimeout(i.onIdle,18e4)})),s()(this,"onIdle",(function(){window.clearTimeout(i.idleTimeoutId),i.onConnectionLost()})),this.auth=t,this.onDataReceived=n,this.onConnectionLost=r,this.openWs()}return d()(e,[{key:"teardown",value:function(){this.ws&&(this.ws.teardown(),this.ws=void 0),window.clearTimeout(this.retryTimeoutId),window.clearTimeout(this.idleTimeoutId),this.retriesRemaining=0}},{key:"send",value:function(e){if(!this.ws)throw new Error("WebSocket connection has been closed");this.ws.send(e)}}]),e}(),bs=function(){function e(t){var n=this;f()(this,e),s()(this,"activities",[]),s()(this,"onActivityCompleted",(function(e){var t=n.activities.indexOf(e);-1!==t&&n.activities.splice(t,1),0===n.activities.length&&n.wsConnection&&n.closeConnection()})),s()(this,"onWebSocketDataReceived",(function(e){n.activities.forEach((function(t){t.processWebSocketData(e)}))})),s()(this,"onConnectionLost",(function(){n.closeConnection()})),this.auth=t}return d()(e,[{key:"openConnection",value:function(e){e.on("Completed",this.onActivityCompleted),this.activities.push(e),this.wsConnection||(this.wsConnection=new gs(this.auth,this.onWebSocketDataReceived,this.onConnectionLost))}},{key:"send",value:function(e){if(!this.wsConnection)throw new Error("WebSocket connection has been closed");this.wsConnection.send(e)}},{key:"closeConnection",value:function(){var e=this;this.activities.forEach((function(t){t.off("Completed",e.onActivityCompleted),t.connectionLost()})),this.activities=[],this.wsConnection&&(this.wsConnection.teardown(),this.wsConnection=void 0)}}]),e}(),Os=function(){function e(){f()(this,e),s()(this,"connectionHolders",{})}return d()(e,[{key:"getWsConnectionHolder",value:function(t){var n=e.mapAuthToTag(t),r=this.connectionHolders[n];return r||this.createAndRemember(t,n)}},{key:"createAndRemember",value:function(e,t){var n=new bs(e);return this.connectionHolders[t]=n,n}}],[{key:"mapAuthToTag",value:function(e){return Object(is.isClientBasedAuth)(e)?"".concat(e.clientId,"-").concat(e.token):"".concat(e.asapIssuer,"-").concat(e.token)}}]),e}();function ws(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Es(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ws(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ws(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var js="UPDATE_POPUP_URLS";function xs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ps(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xs(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Cs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ks(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cs(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ss(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ds(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ss(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ss(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Is(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Is(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Is(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ms(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function As(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ms(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ms(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ts(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ns(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ts(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ts(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ls(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fs(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Us(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_s(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zs(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Hs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hs(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ws(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ws(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ws(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ks(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qs(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ys(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Js="EDITOR_SHOW_LOADING";function Qs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qs(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function el(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$s(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tl(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var rl="REMOTE_UPLOAD_START";function il(e){return{type:rl,tenantFileId:e}}function ol(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function al(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ol(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ol(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ul(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cl(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ll(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sl(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fl(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dl(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ml(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hl(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yl(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ol(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bl(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wl=function(e,t){if(e&&e.length>0){var n=t.filter((function(t){return!e.some((function(e){return e.name===t.name}))}));return e.concat(n)}return t},El="GET_CONNECTED_REMOTE_ACCOUNTS",jl="GET_CONNECTED_REMOTE_ACCOUNTS_FAILED";function xl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xl(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Cl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var kl=function(e){return function(t,n){return e.reduce((function(e,t){return t(e,n)}),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cl(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t))}}([function(e,t){if(function(e){return e.type===Ze}(t)){var n=t.file,r=e.selectedItems,i=e.config.singleSelect,o=void 0!==i&&i,a=r.some((function(e){return e.id===n.id}));return Es(Es({},e),{},a?{selectedItems:r.filter((function(e){return e.id!==n.id}))}:o?{selectedItems:[n]}:{selectedItems:[].concat(At()(r),[n])})}return e},function(e,t){return t.type===Qe&&(n=t.path,r=e.view.path,Array.isArray(n)&&Array.isArray(r)&&n.length===r.length&&n.reduce((function(e,t,n){return e&&t.id===r[n].id}),!0)&&t.accountId===e.view.service.accountId&&e.view.currentCursor===t.currentCursor)?ks(ks({},e),{},{view:ks(ks({},e.view),{},{items:t.items,isLoading:!1,currentCursor:t.currentCursor,nextCursor:t.nextCursor})}):e;var n,r},function(e,t){if(Fe(t)){var n=Ns(Ns({},e.view),{isLoading:!0,path:t.path,currentCursor:void 0,nextCursor:void 0});return Ns(Ns({},e),{view:n})}return e},function(e,t){return qe(t)?Ls(Ls({},e),{},{view:Ls(Ls({},e.view),{},{isLoading:!0,currentCursor:t.nextCursor,nextCursor:void 0})}):e},function(e,t){return t.type===bt?Ds(Ds({},e),{},{accounts:t.accounts,view:Ds(Ds({},e.view),{},{isLoading:!1,hasError:!1})}):e},function(e,t){if(Me(t)){var n=t.accountId,r=t.serviceName,i="upload"!==r&&e.view.isLoading;return Rs(Rs({},e),{},{view:Rs(Rs({},e.view),{},{isLoading:i,service:{accountId:n,name:r},path:[],items:[]})})}return e},function(e,t){if("SERVICE_CONNECT"===t.type){var n=Object.assign({},e.view,{connect:{name:t.serviceName},path:!1});return Object.assign({},e,{view:n})}return e},function(e,t){if(t.type===ft){var n=e.accounts.then((function(e){return e.slice().filter((function(e){return e.id!==t.account.id}))}));return As(As({},e),{},{accounts:n})}return e},function(e,t){return dt(t)?Us(Us({},e),{},{view:Us(Us({},e.view),{},{service:{name:"upload",accountId:""},path:[],hasError:!1})}):e},function(e,t){if(function(e){return e.type===vt}(t)){var n=t.items;return Us(Us({},e),{},{view:Us(Us({},e.view),{},{isLoading:!1}),recents:{items:n}})}return e},function(e,t){return function(e){return e.type===ht}(t)?Us(Us({},e),{},{view:Us(Us({},e.view),{},{hasError:!0,isLoading:!1})}):e},function(e,t){return e},function(e,t){if(function(e){return e.type===yt}(t)){var n=t.items;return Ol(Ol({},e),{},{plugins:wl(e.plugins,n)})}return e},function(e,t){return function(e){return e.type===gt}(t)?Ol(Ol({},e),{},{view:Ol(Ol({},e.view),{},{hasError:!0,isLoading:!1})}):e},function(e,t){if(function(e){return e.type===js}(t)){var n=t.urls;return Ps(Ps({},e),n)}return e},function(e,t){if(function(e){return e.type===Pu}(t)){var n=e.uploads,r=e.selectedItems,i=e.lastUploadIndex,o=t.files,a={},c=i;o.forEach((function(e){var t=e.id,n=e.name,r=e.type,i=e.size,o=e.occurrenceKey;a[t]={file:{metadata:{id:t,name:n,mimeType:r,size:i,occurrenceKey:o}},timeStarted:Date.now(),index:c++}}));var u=o.map((function(e){var t=e.id,n=e.name,r=e.type,i=e.size;return{date:0,id:t,occurrenceKey:e.occurrenceKey,mimeType:r,name:n,parentId:"",size:i,serviceName:"upload"}}));return Bs(Bs({},e),{},{uploads:Bs(Bs({},n),a),selectedItems:[].concat(At()(r),At()(u)),lastUploadIndex:c})}return e},function(e,t){if(!Ti(t))return e;var n=e.selectedItems.filter((function(e){return e.id!==t.id})),r=Object.keys(e.uploads).filter((function(n){return e.uploads[n].file.metadata.id!==t.id})).reduce((function(t,n){return gl(gl({},t),{},s()({},n,e.uploads[n]))}),{});return gl(gl({},e),{},{selectedItems:n,uploads:r})},function(e,t){return rt(t)?Gs(Gs({},e),{},{selectedItems:[],uploads:{}}):e},function(e,t){return He(t)?Vs(Vs({},e),{},{editorData:void 0}):e},function(e,t){if(function(e){return e.type===Ge}(t)){var n=e.editorData,r=t.error;return Ks(Ks({},e),{},{editorData:Ks(Ks({},n),{},{error:r})})}return e},function(e,t){if(Si(t)){var n=e.editorData,r=t.imageUrl,i=t.originalFile||n&&n.originalFile;return Zs(Zs({},e),{},{editorData:{imageUrl:r,originalFile:i}})}return e},function(e,t){return t.type===Js?Xs(Xs({},e),{},{editorData:{originalFile:t.originalFile}}):e},function(e,t){if(function(e){return e.type===ze}(t)){var n=e.selectedItems;if(n)return el(el({},e),{},{selectedItems:n.filter((function(e){return e.id!==t.id}))})}return e},function(e,t){var n=nl(nl({},e),{},{view:nl({},e.view)}),r=!1;return n.view.isUploading=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return!!ut(t)||!rt(t)&&e}(e.view.isUploading,t),n.view.isUploading!==e.view.isUploading&&(r=!0),n.view.isCancelling=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return!!et(t)||!rt(t)&&e}(e.view.isCancelling,t),n.view.isCancelling!==e.view.isCancelling&&(r=!0),r?n:e},function(e,t){if(t.type===rl){var n=t.tenantFileId,r=al({},e.remoteUploads);return r[n]={timeStarted:Date.now()},al(al({},e),{},{remoteUploads:r})}return e},function(e,t){if(Pt(t)){var n=t.shouldAppendResults?e.giphy:{imageCardModels:[]};return ul(ul({},e),{},{view:ul(ul({},e.view),{},{isLoading:!0,hasError:!1}),giphy:n})}return e},function(e,t){if(function(e){return e.type===jt}(t)){var n=e.giphy.imageCardModels,r=t.imageCardModels,i=t.shouldAppendResults,o=t.totalResultCount,a=i?[].concat(At()(n),At()(r)):r;return ul(ul({},e),{},{view:ul(ul({},e.view),{},{isLoading:!1}),giphy:{imageCardModels:a,totalResultCount:o}})}return e},function(e,t){return function(e){return e.type===xt}(t)?ul(ul({},e),{},{view:ul(ul({},e.view),{},{isLoading:!1,hasError:!0}),giphy:{imageCardModels:[],totalResultCount:void 0}}):e},function(e,t){return Zu(t)?ll(ll({},e),{},{view:ll(ll({},e.view),{},{isVisible:!0})}):e},function(e,t){return et(t)?pl(pl({},e),{},{view:pl(pl({},e.view),{},{isVisible:!1})}):e},function(e,t){return function(e){return e.type===jl}(t)?Pl(Pl({},e),{},{view:Pl(Pl({},e.view),{},{isLoading:!1,hasError:!0})}):e},function(e,t){return xu(t)?vl(vl({},e),{},{onCancelUpload:t.payload.onCancelUpload}):e},function(e,t){return t.type===St?ml(ml({},e),{},{collectionItemsSubscription:t.subscription}):e}]),Sl={uploads:{},remoteUploads:{},recents:{items:[]},view:{isVisible:!1,service:{name:"upload",accountId:""},hasError:!1,isLoading:!0,path:[],items:[],isUploading:!1,isCancelling:!1},accounts:Promise.resolve([]),selectedItems:[],isUploading:!1,isCancelling:!1,lastUploadIndex:0,giphy:{imageCardModels:[],totalResultCount:void 0},onCancelUpload:function(){throw new Error("onCancelUpload has not been set yet.")}},Dl=(C.canUseDOM&&window.VERSION,{redirectUrl:"https://api.media.atlassian.com/picker/static/link-account-handler.html"}),Il=function(e){return function(t){return function(n){if(Me(n)){var r=n.serviceName,i=n.accountId;(function(e){return"google"===e||"dropbox"===e})(r)&&""!==i&&e.dispatch(Ne(r,i,[]))}return t(n)}}},Rl=["google","dropbox"],Ml=function(e){return function(t){return function(){var n=c()(o.a.mark((function n(r){var i,a,c,u;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!_e(r)){n.next=10;break}return i=r.serviceName,a=e.getState().view.service.accountId,-1!==Rl.indexOf(i)&&e.dispatch({type:El}),n.next=6,e.getState().accounts;case 6:n.t0=function(e){return e.type===r.serviceName},c=n.sent.find(n.t0),u=a||(c?c.id:""),e.dispatch(Ae(i,u));case 10:return n.abrupt("return",t(r));case 11:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}},Al=function(){return function(e){return function(t){return function(n){if(xu(n)){var r=e.getState().redirectUrl;e.dispatch({type:js,urls:{redirectUrl:r}})}return t(n)}}}},Tl=function(e){return function(t){return function(n){return function(r){if(function(e){return e.type===El}(r)){var i=t.getState().userMediaClient.config.authProvider().then((function(t){return e.getServiceList(t)})).catch((function(){return t.dispatch({type:jl}),[]}));t.dispatch(Ot(i))}return n(r)}}}},Nl=function(e){var t=e.getState(),n=t.userMediaClient,r=t.collectionItemsSubscription;r&&r.unsubscribe();var i=n.collection.getItems(ve.c).subscribe({next:function(t){e.dispatch(function(e){return{type:vt,items:e}}(t))},error:function(){e.dispatch({type:ht})}});e.dispatch(function(e){return{type:St,subscription:e}}(i))};function Fl(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Ll(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ll(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw o}}}}function Ll(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _l=[/^https:\/\/([^\.]*\.)*atl-paas\.net/,/^https:\/\/([^\.]*\.)*atlassian\.net/,/^https:\/\/([^\.]*\.)*jira-dev\.com/,/^https:\/\/([^\.]*\.)*jira\.com/,/^https:\/\/bitbucket\.org/],Ul=function(e){return!!e.message},zl=function(){function e(){var t=this;f()(this,e),s()(this,"getProviders",c()(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetch("providers",{type:"search"});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))),s()(this,"fetch",function(){var e=c()(o.a.mark((function e(n,r){var i,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t.getApiEndpoint(),"/").concat(n),{method:"POST",credentials:"include",body:JSON.stringify(r),headers:{"content-type":"application/json"}});case 2:if((i=e.sent).ok){e.next=12;break}return e.t0=Error,e.next=7,i.text();case 7:if(e.t1=e.sent,e.t1){e.next=10;break}e.t1=i.statusText;case 10:throw e.t2=e.t1,new e.t0(e.t2);case 12:return e.next=14,i.json();case 14:if(a=e.sent,!Ul(a)){e.next=17;break}throw new Error(a.message);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}return d()(e,[{key:"getApiEndpoint",value:function(){var e,t=Fl(_l);try{for(t.s();!(e=t.n()).done;){if(e.value.test(window.location.origin))return"".concat(window.location.origin,"/gateway/api/object-resolver")}}catch(n){t.e(n)}finally{t.f()}return"https://api-private.stg.atlassian.com/object-resolver"}},{key:"invokeProvider",value:function(){var e=c()(o.a.mark((function e(t,n){var r,i,a,c,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.query,i=void 0===r?"":r,a=n.folderId,c={key:t,search:{query:i,context:a?{id:a}:void 0}},e.next=5,this.fetch("invoke/search",c);case 5:return u=e.sent,e.abrupt("return",u);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),Bl={meta:{visibility:"other",access:"not_found",auth:[]},data:void 0};function Hl(){var e=Ee()(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: calc(100vh - 300px);\n"]);return Hl=function(){return e},e}var Gl=je.c.div(Hl());function Wl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wl(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ql(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b()(this,n)}}var Kl=function(e){y()(n,e);var t=ql(n);function n(){var e;f()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),s()(h()(e),"renderLoading",(function(){return x.a.createElement(Gl,null,x.a.createElement(bn.a,null))})),s()(h()(e),"renderSearchResults",(function(){var t=e.props.items;return x.a.createElement("div",null,e.renderMasonaryLayout(t))})),s()(h()(e),"renderMasonaryLayout",(function(t){if(0===t.length)return null;var n=e.props,r=n.pluginName,i=n.selectedItems,o=t.map((function(t,n){var o=t.dimensions,a=t.dataURI,c=t.name,u=t.id,s=i.some((function(e){return e.id===u&&e.serviceName===r})),l=Yi(Vl(Vl({},o),{},{gapSize:5,containerWidth:677,numberOfColumns:4})),f={dataURI:a,name:c,mediaItemType:"external-image"};return x.a.createElement(ro,{key:"".concat(n,"-metadata.id"),width:l.width},x.a.createElement(yn.a,{mediaClientConfig:{},identifier:f,dimensions:l,selectable:!0,selected:s,onClick:e.createClickHandler(t)}))}));return x.a.createElement(Ki,{id:"mediapicker-bricks-layout",sizes:[{columns:4,gutter:5}]},o)})),s()(h()(e),"createClickHandler",(function(t){return function(){(0,e.props.onFileClick)(t.id)}})),e}return d()(n,[{key:"render",value:function(){return 0===this.props.items.length?this.renderLoading():this.renderSearchResults()}}]),n}(j.Component),Yl=n(1115);function Zl(){var e=Ee()(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-around;\n  height: 300px;\n"]);return Zl=function(){return e},e}function Jl(){var e=Ee()(["\n  text-align: center;\n  font-size: 16px;\n  color: ",";\n"]);return Jl=function(){return e},e}function Ql(){var e=Ee()(["\n  margin-top: 18px;\n  color: ",";\n  opacity: 0.7;\n  font-size: 12px;\n  text-align: center;\n"]);return Ql=function(){return e},e}function Xl(){var e=Ee()(["\n  text-align: center;\n"]);return Xl=function(){return e},e}function $l(){var e=Ee()(["\n  width: 120px;\n  height: 120px;\n"]);return $l=function(){return e},e}var ef=je.c.img($l()),tf=je.c.div(Xl()),nf=je.c.div(Ql(),_t.N500),rf=je.c.div(Jl(),_t.N100),of=je.c.div(Zl()),af=function(e){var t=e.iconUrl,n=e.auth,r=e.name,i=e.onAuthSucceeded,o=e.onAuthFailed,a=n[0].url,c=Object(j.useCallback)((function(){Object(Yl.a)(a).then(i).catch(o)}),[a,o,i]);return x.a.createElement(of,null,x.a.createElement(rf,null,x.a.createElement(ye.a,me()({},ge.a.upload_file_from,{values:{name:r}}))),x.a.createElement(ef,{src:t}),x.a.createElement(tf,null,x.a.createElement(xe.a,{appearance:"primary",className:"connectBtn",onClick:c},x.a.createElement(ye.a,me()({},ge.a.connect_to,{values:{name:r}})))),x.a.createElement(nf,null,x.a.createElement(ye.a,me()({},ge.a.connect_account_description,{values:{name:r}}))))};function cf(){var e=Ee()(["\n  display: flex;\n  justify-content: center;\n\n  margin-top: 10px;\n"]);return cf=function(){return e},e}function uf(){var e=Ee()(["\n  color: "," !important;\n  right: 23px;\n  top: 12px;\n"]);return uf=function(){return e},e}function sf(){var e=Ee()(["\n  color: ",";\n  min-width: 70px;\n  text-align: right;\n  padding: 0 0 0 10px;\n"]);return sf=function(){return e},e}function lf(){var e=Ee()(["\n  color: ",";\n  text-align: right;\n  padding: 0 10px 0 10px;\n"]);return lf=function(){return e},e}function ff(){var e=Ee()(["\n  padding-left: 17px;\n  vertical-align: middle;\n  overflow: hidden;\n  text-overflow: ellipsis;\n\n  ",";\n"]);return ff=function(){return e},e}function pf(){var e=Ee()(["\n  /* vertically center icon */\n  display: flex;\n  align-items: center;\n\n  width: 32px;\n  height: 32px;\n"]);return pf=function(){return e},e}function df(){var e=Ee()(["\n  display: flex;\n  align-items: center;\n"]);return df=function(){return e},e}function vf(){var e=Ee()(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  box-sizing: border-box;\n\n  width: 100%;\n  height: 48px;\n\n  margin-top: 0;\n  padding: 8px 28px 8px 28px;\n\n  cursor: pointer;\n\n  "," &:hover {\n    ",";\n  }\n"]);return vf=function(){return e},e}function hf(){var e=Ee()(["\n  /* Take up all of the available space between header and footer */\n  flex: 1;\n\n  /* Ensure navigation header is pinned to top */\n  overflow: auto;\n\n  list-style: none;\n\n  /* Override default list styles */\n  margin-top: 0;\n  padding-left: 0;\n"]);return hf=function(){return e},e}function mf(){var e=Ee()(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  /* Take up all of the available space between header and footer */\n  flex: 1;\n"]);return mf=function(){return e},e}function yf(){var e=Ee()(["\n  display: flex;\n  flex-direction: column;\n\n  height: 100%;\n"]);return yf=function(){return e},e}je.c.div(yf()),je.c.div(mf());var gf=je.c.ul(hf()),bf=je.c.li(vf(),(function(e){return e.isSelected?"background-color: ".concat(_t.B200,";"):"background-color: white;"}),(function(e){var t=e.isSelected;return"background-color: ".concat(t?_t.B200:_t.N30,";")}));bf.displayName="FolderViewerRow";var Of=je.c.div(df()),wf=je.c.div(pf()),Ef=je.c.div(ff(),(function(e){return e.isSelected?"color: white;":"color: ".concat(_t.N900)})),jf=je.c.div(lf(),_t.N90),xf=je.c.div(sf(),_t.N90),Pf=je.c.div(uf(),_t.B400),Cf=(je.c.div(cf()),function e(t){var n=t.image;if(n)return"string"===typeof n?n:"Image"===n["@type"]?e(n):"Link"===n["@type"]?n.href:void 0}),kf=function e(t){if(t)return"string"===typeof t?t:Array.isArray(t)?e(t[0]):t.href},Sf=x.a.createElement(Pf,null,x.a.createElement(Uo.a,{label:"check"})),Df=function(e){var t=e.isSelected,n=e.file,r=e.icon,i=e.onClick,o=kf(n.url),a=n["schema:dateCreated"],c=n["atlassian:fileSize"]&&Lo()(n["atlassian:fileSize"]);return x.a.createElement(bf,{isSelected:t,onClick:function(){o&&i(o)},key:o},x.a.createElement(Of,null,x.a.createElement(wf,null,r),x.a.createElement(Ef,{isSelected:t},n.name)),t?Sf:x.a.createElement(Of,null,x.a.createElement(jf,null,function(e){if(!e)return"";var t=(new Date).toDateString(),n=new Date(e),r=n.toDateString();return No()(n,t===r?"H:MM TT":"d mmm yyyy")}(a)),x.a.createElement(xf,null,c)))},If=function(e){var t=e.folder,n=e.icon,r=e.onClick,i=kf(t.url);return x.a.createElement(bf,{onClick:function(){return i&&r(i)},key:i},x.a.createElement(Of,null,x.a.createElement(wf,null,n),x.a.createElement(Ef,null,t.name)))},Rf=function(e){var t=e.items.data,n=e.selectedItems,r=e.onFolderClick,i=e.onFileClick;if(!t||0===t.items.length)return null;var o=At()(t.items);return x.a.createElement(gf,null,o.map((function(e,t){var o=uc(e["schema:fileFormat"]||""),a=kf(e.url),c=n.map((function(e){return e.id})),u=!!a&&c.indexOf(a)>-1,s=e["@id"]||t;return"Collection"===e["@type"]?x.a.createElement(If,{key:s,folder:e,icon:cc,onClick:r}):x.a.createElement(Df,{key:s,isSelected:u,file:e,icon:o,onClick:i})})))},Mf=function(e){var t,n=e.items,r=e.iconUrl,i=e.pluginName,o=e.onAuthSucceeded,a=e.onAuthFailed,c=e.onFileClick,u=e.onFolderClick,s=e.selectedItems;return n?"unauthorized"===(t=n.meta).access&&"restricted"===t.visibility?x.a.createElement(af,{auth:n.meta.auth||[],iconUrl:r,name:i,onAuthSucceeded:o,onAuthFailed:a}):x.a.createElement(Rf,{selectedItems:s,items:n,onFolderClick:u,onFileClick:c}):x.a.createElement(Gl,null)},Af=function(e){var t=e.view,n=e.items,r=e.iconUrl,i=e.onUpdateItems,o=e.selectedItems,a=e.onFileClick,c=e.name,u={selectedItems:o,onFileClick:a,onFolderClick:a,pluginName:c};if("bricks"===t){if(!n.data)return null;var s=n.data.items.map((function(e){var t=kf(e.url)||"",n=e.image&&"string"!==typeof e.image&&"Link"===e.image["@type"]&&e.image.href||"";return{id:t,dimensions:{width:e.image&&"string"!==typeof e.image&&"Link"===e.image["@type"]&&e.image.width||0,height:e.image&&"string"!==typeof e.image&&"Link"===e.image["@type"]&&e.image.height||0},dataURI:n,name:c}}));return x.a.createElement(Kl,me()({items:s},u))}return"folder"===t?x.a.createElement(Mf,me()({items:n,iconUrl:r,onAuthSucceeded:i,onAuthFailed:function(e){return console.error(e)}},u)):null},Tf=Object(ye.e)((function(e){var t=e.name,n=e.loading,r=e.error,i=e.totalImages,o=e.onQueryChange,a=e.query,c=e.intl.formatMessage,u=!n&&!r&&"number"===typeof i;return x.a.createElement(jo,null,x.a.createElement("h3",null,t),!r&&u&&x.a.createElement(Hi.a,{placeholder:c(ge.a.search),onChange:o,value:a,width:420}))})),Nf=function(){return x.a.createElement(Gl,null,x.a.createElement(bn.a,{size:"medium"}))},Ff=n(807),Lf=n.n(Ff),_f=function(e){var t=e.onRetry;return x.a.createElement(Co,null,x.a.createElement(ko,null,x.a.createElement(Lf.a,{label:"warning"}),x.a.createElement(So,null,x.a.createElement(ye.a,ge.a.something_went_wrong))),x.a.createElement(xe.a,{onClick:t},x.a.createElement(ye.a,ge.a.retry)))},Uf=n(1070),zf=n.n(Uf),Bf=function(e){return e.iconUrl?x.a.createElement(xo,{src:e.iconUrl}):x.a.createElement(zf.a,{label:"image-icon"})},Hf=function(e){var t=e.extensionOpts,n=t.name,r=t.id,i=t.view,a=t.iconUrl,u=e.actions,s=e.selectedItems,l=Object(j.useMemo)((function(){return new zl}),[]),f=Object(j.useState)(!0),p=Bn()(f,2),d=p[0],v=p[1],h=Object(j.useState)(""),m=Bn()(h,2),y=m[0],g=m[1],b=Object(j.useState)(),O=Bn()(b,2),w=O[0],E=O[1],P=Object(j.useState)(),C=Bn()(P,2),k=C[0],S=C[1],D=Object(j.useState)(Bl),I=Bn()(D,2),R=I[0],M=I[1],A=Object(j.useCallback)(Hr()(function(){var e=c()(o.a.mark((function e(t,n){var i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,S(void 0),v(!0),e.next=5,l.invokeProvider(r,{query:t,folderId:n||y});case 5:i=e.sent,M(i),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),S(e.t0);case 12:return e.prev=12,v(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})));return function(t,n){return e.apply(this,arguments)}}(),1e3),[n,y]),T=Object(j.useCallback)((function(e){E(e.currentTarget.value),A(w)}),[A,w]),N=Object(j.useCallback)((function(e){return function(){var t=R.data&&At()(R.data.items).find((function(t){return t.url===e}));if(t)if("Collection"===t["@type"]){var r=t["@id"]||"";g(r),A(w,r)}else{var i=function(e,t){return"Image"===t["@type"]?{id:e,metadata:{type:"image",src:Cf(t),srcFull:Cf(t)}}:{id:e,metadata:{type:"link",src:kf(t.url)}}}(e,t);u.fileClick(i,n)}}}),[R.data,A,w,u,n]),F=Object(j.useCallback)((function(e){return N(e)()}),[N]);return Object(j.useEffect)((function(){A(w)}),[A,w,r]),x.a.createElement(Eo,null,x.a.createElement(Tf,{name:n,loading:d,error:k,totalImages:R.data&&R.data.items&&At()(R.data.items).length,onQueryChange:T,query:w}),d?x.a.createElement(Nf,null):k?x.a.createElement(_f,{error:k,onRetry:A}):x.a.createElement(Po,null,x.a.createElement(Af,{view:i,items:R,iconUrl:a,selectedItems:s,onUpdateItems:A,onFileClick:F,onFolderClick:F,name:n})))},Gf=function(){return function(e){return function(t){return function(n){return function(e){return e.type===mt}(n)&&Wf(e),t(n)}}}},Wf=function(){var e=c()(o.a.mark((function e(t){var n,r,i,a,c,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new zl,r=t.dispatch,e.prev=2,e.next=5,n.getProviders();case 5:i=e.sent,a=i.providers,c=a.filter((function(e){return!!e.metadata.supportedViews.length})),u=c.map(Vf).sort((function(e,t){return e.name.localeCompare(t.name)})),r({type:yt,items:u}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r({type:gt});case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}(),Vf=function(e){return{name:e.metadata.name,icon:x.a.createElement(Bf,{iconUrl:e.metadata.avatarUrl}),render:function(t,n){return x.a.createElement(Hf,{key:e.key,actions:t,selectedItems:n,extensionOpts:{id:e.key,name:e.metadata.name,view:e.metadata.supportedViews[0],iconUrl:e.metadata.avatarUrl}})}}},qf=n(2241),Kf=n(204),Yf=n(269),Zf=n(817),Jf=n(339),Qf="FINALIZE_UPLOAD";function Xf(e,t,n,r){return{type:Qf,file:e,replaceFileId:t,source:n,overrides:r}}var $f="GET_PREVIEW";function ep(e,t,n){return{type:$f,fileId:e,file:t,collection:n}}var tp="HANDLE_CLOUD_FETCHING_EVENT";function np(e,t,n){return{type:tp,file:e,event:t,payload:n}}var rp=n(500);function ip(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function op(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ip(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ip(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ap=function(){function e(t,n,r){f()(this,e),s()(this,"eventEmitter",new rp.EventEmitter2),this.tenantFileId=t,this.serviceName=n,this.dispatchEvent=r}return d()(e,[{key:"processWebSocketData",value:function(e){if(this.shouldProcessWsData(e)){var t={tenantFileId:e.uploadId,serviceName:this.serviceName};!function(e){return e&&"RemoteUploadStart"===e.type}(e)?!function(e){return"RemoteUploadProgress"===e.type}(e)?!function(e){return"RemoteUploadEnd"===e.type}(e)?!function(e){return function(e){return"Error"===e.type}(e)&&"RemoteUploadFail"===e.error}(e)?function(e){return"NotifyMetadata"===e.type}(e)&&this.dispatchEvent("NotifyMetadata",op({metadata:e.metadata},t)):(this.dispatchEvent("RemoteUploadFail",op({description:e.reason},t)),this.notifyActivityCompleted()):(this.dispatchEvent("RemoteUploadEnd",op({userFileId:e.fileId},t)),this.notifyActivityCompleted()):this.dispatchEvent("RemoteUploadProgress",op({bytes:e.currentAmount,fileSize:e.totalAmount},t)):(this.dispatchEvent("RemoteUploadStart",op({},t)),this.notifyActivityStarted())}}},{key:"connectionLost",value:function(){this.tenantFileId&&this.dispatchEvent("RemoteUploadFail",{tenantFileId:this.tenantFileId,description:"Websocket connection lost",serviceName:this.serviceName})}},{key:"on",value:function(e,t){this.eventEmitter.on(e,t)}},{key:"off",value:function(e,t){this.eventEmitter.off(e,t)}},{key:"shouldProcessWsData",value:function(e){return!!e.uploadId&&!!this.tenantFileId&&e.uploadId===this.tenantFileId}},{key:"notifyActivityStarted",value:function(){this.eventEmitter.emit("Started",this)}},{key:"notifyActivityCompleted",value:function(){this.eventEmitter.emit("Completed",this)}}]),e}();function cp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function up(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cp(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sp(e,t){return up(up({},e),{},{id:t})}var lp="SEND_UPLOAD_EVENT";function fp(e){return{type:lp,payload:e}}var pp=n(828),dp=n(2382);function vp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vp(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var mp=function(e){return-1!==["dropbox","google","giphy"].indexOf(e)},yp=function(e,t,n){var r=e.id,i=e.name,o=e.mimeType,a=e.size,c=e.date,u=e.serviceName,s=e.accountId,l=e.occurrenceKey,f=void 0===l?ns()():l;return{file:{id:r,name:i,size:a,creationDate:c||Date.now(),type:o,occurrenceKey:f},serviceName:u,accountId:s,touchFileDescriptor:{fileId:t,occurrenceKey:f,collection:n}}};function gp(e,t){return function(n){return function(r){return function(i){return ut(i)&&function(e,t,n){Pp.apply(this,arguments)}(e,n,t),r(i)}}}}var bp=function(){var e=c()(o.a.mark((function e(t,n){var r,i,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.getState(),i=r.userMediaClient,e.next=3,i.getImage(n,{collection:ve.c,mode:"fit"},void 0,!0);case 3:return a=e.sent,e.abrupt("return",{value:a,origin:"remote"});case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Op=function(e,t,n,r,i){var o=e.getState().config.featureFlags;if("giphy"===t){var a=e.getState().giphy.imageCardModels.find((function(e){return e.metadata.id===r}));if(a)return Promise.resolve({value:a.dataURI,origin:"remote"})}else if(("upload"===t||"recent_files"===t)&&Object(qf.b)(n,o)&&i&&!Object(Kf.a)(i)){if(Object(Kf.d)(i))return i.preview;if(Object(Kf.c)(i))return bp(e,r)}},wp=function(){var e=c()(o.a.mark((function e(t,n){var r,i,a,c,u,s,l,f,p,d,v,h;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.file,i=n.serviceName,a=n.touchFileDescriptor,c=a.fileId,u=a.occurrenceKey,s=r.id,l=Object(gn.a)(r.type),!(f=Object(Yf.b)().get(s))){e.next=15;break}return e.next=8,Object(Zf.a)(f);case 8:if(p=e.sent,d=Op(t,i,l,s,p),!Object(Kf.a)(p)){e.next=12;break}return e.abrupt("return",hp(hp({},p),{},{id:c}));case 12:return v=hp({},p),Object(Kf.g)(v)||delete v.artifacts,e.abrupt("return",hp(hp({},v),{},{id:c,mediaType:l,preview:d}));case 15:return h=Op(t,i,l,s),e.abrupt("return",{id:c,occurrenceKey:u,status:"processing",mediaType:l,mimeType:r.type,name:r.name,size:r.size,preview:h,representations:{}});case 17:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ep=function(e,t,n){var r=Object(Jf.a)(),i=Object(Yf.b)().get(n);Object(Yf.b)().set(t.id,r),r.next(t),i&&i.subscribe({next:function(e){if(!Object(Kf.e)(e)){var n=Object(Kf.a)(t)?{}:{mediaType:t.mediaType,preview:t.preview};r.next(hp(hp(hp({},e),n),{},{id:t.id}))}},error:function(t){return e.emitUploadError(n,{fileId:n,name:"metadata_fetch_fail",description:t instanceof Error?t.message:t,rawError:t instanceof Error?t:void 0})}})},jp=function(e,t){var n=t.getState(),r=n.tenantMediaClient,i=n.config,o=i.uploadParams&&i.uploadParams.collection;return r.file.touchFiles([e],o)},xp=function(e){var t=e.serviceName;return["recent_files","google","dropbox","upload","giphy"].indexOf(t)>-1};function Pp(){return(Pp=c()(o.a.mark((function e(t,n,r){var i,a,u,s,l,f,p,d,v;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.getState(),a=i.uploads,u=i.selectedItems,s=i.userMediaClient,l=i.config,f=l.uploadParams&&l.uploadParams.collection,n.dispatch(tt()),p=u.filter((function(e){return!xp(e)})),e.next=6,s.config.authProvider();case 6:return d=e.sent,v=u.filter(xp).map((function(e){var t=ns()();return yp(e,t,f)})),t.emitPluginItemsInserted(p),e.next=11,Promise.all(v.map(function(){var e=c()(o.a.mark((function e(r){var i,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wp(n,r);case 2:i=e.sent,a=r.file.id,Ep(t,i,a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 11:t.emitUploadsStart(v.map((function(e){return sp(e.file,e.touchFileDescriptor.fileId)}))),v.forEach(function(){var e=c()(o.a.mark((function e(i){var c,u,s,l,f;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=i.file,u=i.serviceName,s=c.id,e.prev=2,"upload"!==u){e.next=9;break}return l=a[s],e.next=7,Sp(i,n,l);case 7:e.next=18;break;case 9:if("recent_files"!==u){e.next=14;break}return e.next=12,Dp(i,n);case 12:e.next=18;break;case 14:if(!mp(u)){e.next=18;break}return f=r.getWsConnectionHolder(d),e.next=18,Ip(i,n,f);case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(2),t.emitUploadError(i.touchFileDescriptor.fileId,e.t0);case 23:case"end":return e.stop()}}),e,null,[[2,20]])})));return function(t){return e.apply(this,arguments)}}()),n.dispatch(it());case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Cp=function(e){return{id:e.id,creationDate:-1,name:e.name,size:e.size,type:e.mimeType,occurrenceKey:e.occurrenceKey}},kp=function(){var e=c()(o.a.mark((function e(t,n,r){var i,a,u,s,l,f,p;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.touchFileDescriptor.fileId,a=n.getState(),u=a.tenantMediaClient,s=function(e,t){var r={name:"upload-error",data:{fileId:e,error:{fileId:e,description:t instanceof Error?t.message:t,name:"upload_fail",rawError:t instanceof Error?t:void 0}}};n.dispatch(fp({event:r,fileId:e}))},l=function(){var e=c()(o.a.mark((function e(t){var r,a,c,u,s,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.mediaType,a=Cp(t),e.prev=2,!Object(Kf.d)(t)){e.next=9;break}return e.next=6,t.preview;case 6:e.t0=e.sent.value,e.next=10;break;case 9:e.t0=void 0;case 10:if(!((c=e.t0)instanceof Blob)){e.next=17;break}return e.next=14,Object(dp.a)(r,c);case 14:e.t1=e.sent,e.next=18;break;case 17:e.t1={};case 18:u=e.t1,s={name:"upload-preview-update",data:{file:a,preview:u}},n.dispatch(fp({event:s,fileId:i})),e.next=27;break;case 23:e.prev=23,e.t2=e.catch(2),l={name:"upload-preview-update",data:{file:a,preview:{}}},n.dispatch(fp({event:l,fileId:i}));case 27:case"end":return e.stop()}}),e,null,[[2,23]])})));return function(t){return e.apply(this,arguments)}}(),f=function(e){var t=Cp(e),o={id:r.file.metadata.id,collection:ve.c},a=Object(Kf.d)(e)?e.preview:void 0;n.dispatch(Xf(t,i,o,{preview:a}))},e.next=7,u.file.getCurrentState(i);case 7:if(p=e.sent,Object(Kf.a)(p)){e.next=11;break}return e.next=11,l(p);case 11:u.file.getFileState(i).subscribe({next:function(e){if(Object(Kf.a)(e)){var t=e.message;s(i,void 0===t?"":t),this.unsubscribe()}else Object(Kf.g)(e)||(f(e),this.unsubscribe())},error:function(e){return s(i,e)}});case 12:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Sp=function(){var e=c()(o.a.mark((function e(t,n,r){var i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.touchFileDescriptor,e.next=3,jp(i,n);case 3:return e.next=5,kp(t,n,r);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Dp=function(){var e=c()(o.a.mark((function e(t,n){var r,i,a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.file,i=t.touchFileDescriptor,a=i.fileId,c={id:r.id,collection:ve.c},n.dispatch(ep(a,r,ve.c)),e.next=6,jp(i,n);case 6:n.dispatch(Xf(r,a,c));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ip=function(){var e=c()(o.a.mark((function e(t,n,r){var i,a,c,u,s,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.touchFileDescriptor,a=t.serviceName,c=t.accountId,u=t.file,s=i.fileId,(l=new ap(s,a,(function(e,t){if("NotifyMetadata"===e){var r=Object(pp.a)(t.metadata);n.dispatch(fp({event:{name:"upload-preview-update",data:{file:u,preview:r}},fileId:s}))}else{var i=t.tenantFileId,o=hp(hp({},u),{},{id:i,creationDate:Date.now()});n.dispatch(np(o,e,t))}}))).on("Started",(function(){n.dispatch(il(s))})),r.openConnection(l),r.send({type:"fetchFile",params:{serviceName:a,accountId:c,fileId:u.id,fileName:u.name,collection:ve.c,jobId:s}}),e.next=8,jp(i,n);case 8:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Rp=function(e){return function(t){return function(n){return function(r){r.type===st&&t.getState().userMediaClient.config.authProvider().then((function(t){return e.unlinkCloudAccount(t,r.account.id)})).then((function(){var e;t.dispatch((e=r.account,{type:ft,account:e})),t.dispatch(Ue(r.account.name))}));return n(r)}}}},Mp=function(e,t){var n=t.getState().editorData;if(!n)return!1;var r=n.originalFile,i=n.imageUrl;return!!r&&(r.id===e&&!i)},Ap=function(){return function(e){return function(t){return function(n){return n.type===Ii&&function(e,t){var n=t.item,r=t.collectionName,i=e.getState().userMediaClient;e.dispatch(function(e){return{type:Js,originalFile:e}}(n)),i.getImageUrl(n.id,{mode:"full-fit",collection:r}).then((function(t){Mp(n.id,e)&&e.dispatch(Di(t))})).catch((function(){if(Mp(n.id,e)){var r=function(){e.dispatch(t)};e.dispatch(We(Ri,r))}}))}(e,n),t(n)}}}};var Tp=n(818),Np=function(){return function(e){return function(t){return function(n){return function(e){return e.type===Qf}(n)&&function(e,t){var n=t.file,r=t.replaceFileId,i=t.source,o=t.overrides;(function(e){Fp.apply(this,arguments)})({store:e,file:n,replaceFileId:r,source:i,overrides:o})}(e,n),t(n)}}}};function Fp(){return(Fp=c()(o.a.mark((function e(t){var n,r,i,a,c,u,s,l,f,p,d,v,h,m,y,g,b,O,w,E;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.store,r=t.file,i=t.replaceFileId,a=t.source,c=t.overrides,u=n.getState(),s=u.tenantMediaClient,l=u.userMediaClient.config.authProvider,f=u.config,p=a.id,d=a.collection,h=(v=c||{}).preview,m=v.mimeType,y=f.uploadParams&&f.uploadParams.collection,e.prev=5,g={id:p,collection:d,authProvider:l},b={collection:y,replaceFileId:i,occurrenceKey:r.occurrenceKey,authProvider:s.config.authProvider},O={preview:h,mimeType:m},e.next=11,s.file.copyFile(g,b,O);case 11:return w=e.sent,e.next=14,s.file.getCurrentState(w.id);case 14:E=e.sent,s.emit("file-added",E),Tp.a.emit("file-added",E),["processing","processed","failed-processing"].includes(E.status)?n.dispatch(fp({event:{name:"upload-end",data:{file:r}},fileId:i})):"error"===E.status&&n.dispatch(fp({event:{name:"upload-error",data:{fileId:i,error:{name:"object_create_fail",description:"There was an error while uploading a file"}}},fileId:i})),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(5),n.dispatch(fp({event:{name:"upload-error",data:{fileId:i,error:{name:"object_create_fail",description:e.t0.message,rawError:e.t0}}},fileId:i}));case 23:return e.prev=23,n.dispatch(it()),e.finish(23);case 26:case"end":return e.stop()}}),e,null,[[5,20,23,26]])})))).apply(this,arguments)}var Lp=function(){return function(e){return function(t){return function(n){return function(e){return e.type===$f}(n)&&function(e,t){var n=t.file,r=t.collection,i=e.getState(),a=i.config.featureFlags,u=i.userMediaClient;u.file.getFileState(n.id,{collectionName:r}).subscribe({next:function(i){var s=this;return c()(o.a.mark((function c(){var l,f,p,d,v,h,m;return o.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(!Object(Kf.a)(i)){o.next=3;break}return s.unsubscribe(),o.abrupt("return");case 3:if(l=i.mimeType,f=l?Object(gn.a)(l):"unknown",s.unsubscribe(),!Object(qf.b)(f,a)||!Object(Kf.c)(i)){o.next=14;break}return o.next=9,u.getImageMetadata(n.id,{collection:r});case 9:p=o.sent,d=Object(pp.a)(p),_p(e,t,d),o.next=26;break;case 14:if(o.t1=i.preview,!o.t1){o.next=19;break}return o.next=18,i.preview;case 18:o.t1=o.sent;case 19:if(o.t0=o.t1,o.t0){o.next=22;break}o.t0={};case 22:v=o.t0,h=v.value,m={file:h instanceof Blob?h:void 0},_p(e,t,m);case 26:case"end":return o.stop()}}),c)})))()}})}(e,n),t(n)}}}},_p=function(e,t,n){var r=t.fileId,i=t.file;e.dispatch(fp({event:{name:"upload-preview-update",data:{file:i,preview:n}},fileId:r}))};function Up(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Up(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Up(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Bp=function(e){return function(t){return function(n){var r,i=function(){var t=c()(o.a.mark((function t(n,r){var i,a,c,u,s,l,f,p;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=r.tenantFileId,a=r.userFileId,c={id:a,collection:ve.c},u=zp(zp({},n),{},{id:a}),!(s=Object(Yf.b)().get(i))){t.next=10;break}return t.next=7,Object(Zf.a)(s);case 7:t.t0=t.sent,t.next=11;break;case 10:t.t0=void 0;case 11:l=t.t0,f=l&&Object(Kf.d)(l)?l.preview:void 0,p=l&&!Object(Kf.a)(l)?l.mimeType:void 0,e.dispatch(Xf(u,i,c,{preview:f,mimeType:p}));case 15:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return function(e){return e.type===tp}(n)&&(!function(e){return"RemoteUploadProgress"===e.event}(n)?!function(e){return"RemoteUploadEnd"===e.event}(n)?function(e){return"RemoteUploadFail"===e.event}(n)&&(n.file,r=n.payload,e.dispatch(fp({event:{name:"upload-error",data:{fileId:r.tenantFileId,error:{fileId:r.tenantFileId,name:"remote_upload_fail",description:r.description}}},fileId:r.tenantFileId}))):i(n.file,n.payload):(n.file,n.payload)),t(n)}}},Hp=function(){var e=c()(o.a.mark((function e(t,n,r){var i,a,c,u,s,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r.query,a=r.offset,c=r.shouldAppendResults,e.prev=1,!(i.length>0)){e.next=8;break}return e.next=5,t.fetchGifsRelevantToSearch(i,a);case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,t.fetchTrendingGifs(a);case 10:e.t0=e.sent;case 11:u=e.t0,s=u.cardModels,l=u.totalResultCount,n.dispatch(kt(s,l,c)),e.next=20;break;case 17:e.prev=17,e.t1=e.catch(1),n.dispatch({type:xt});case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t,n,r){return e.apply(this,arguments)}}(),Gp=function(e){return function(){return function(t){return function(n){if(function(e){return e.type===lp}(n)){var r=n.payload,i=r.event,o=r.fileId;switch(i.name){case"upload-preview-update":var a=i.data.preview,c=sp(i.data.file,o);e.emitUploadPreviewUpdate(c,a);break;case"upload-end":var u=sp(i.data.file,o);e.emitUploadEnd(u);break;case"upload-error":var s=i.data.error;e.emitUploadError(o,s),function(e,t,n){var r=n&&n.stack||"",i=t||"",o="".concat(e,": ").concat(i," \n ").concat(r);console.error(o)}(s.name,s.description,s.rawError)}}return t(n)}}}},Wp=n(834),Vp=n.n(Wp),qp=n(1253),Kp=n(1261),Yp=function(e){return{fileId:e.id,fileSize:e.size,fileMimetype:e.type}},Zp=function(e){if("number"!==typeof e)return"N/A";if(e<=0)return"Invalid";var t=(new Date).getTime()-e,n=[{timeLimitInMiliseconds:36e5,label:"< 1 hour"},{timeLimitInMiliseconds:864e5,label:"1 hour - 1 day"},{timeLimitInMiliseconds:6048e5,label:"1 day - 1 week"},{timeLimitInMiliseconds:2629746e3,label:"1 week - 1 month"},{timeLimitInMiliseconds:15778476e3,label:"1 month - 6 months"},{timeLimitInMiliseconds:31536e6,label:"6 months - 1 year"}].find((function(e){var n=e.timeLimitInMiliseconds;return t<n}));return n?n.label:"> 1 year"},Jp=[function(e,t){if(function(e){return e.type===tp}(e)){var n=e.event,r=e.payload,i=e.file,o=(t.getState().remoteUploads[r.tenantFileId]||{timeStarted:void 0}).timeStarted,a=void 0!==o?Date.now()-o:-1;return"RemoteUploadStart"===n?[{eventType:"operational",action:"commenced",actionSubject:"mediaUpload",actionSubjectId:"cloudMedia",attributes:{fileAttributes:Yp(i),sourceType:"cloud",serviceName:r.serviceName}}]:"RemoteUploadEnd"===n?[{eventType:"operational",action:"succeeded",actionSubject:"mediaUpload",actionSubjectId:"cloudMedia",attributes:{status:"success",fileAttributes:Yp(i),sourceType:"cloud",serviceName:r.serviceName,uploadDurationMsec:a}}]:"RemoteUploadFail"===n?[{eventType:"operational",action:"failed",actionSubject:"mediaUpload",actionSubjectId:"cloudMedia",attributes:{status:"fail",failReason:"remote_upload_fail",error:r.description,fileAttributes:Yp(i),uploadDurationMsec:a,sourceType:"cloud",serviceName:r.serviceName}}]:[]}},function(e){if(He(e))return[{eventType:"ui",action:"clicked",actionSubject:"button",actionSubjectId:"mediaEditor".concat(e.selection,"Button"),attributes:{}}]},function(e){if(function(e){return e.type===Ii}(e)){var t=e.collectionName,n=e.item,r=(n=void 0===n?{}:n).id;return[{eventType:"ui",action:"clicked",actionSubject:"button",actionSubjectId:"annotateFileButton",attributes:{fileId:void 0===r?void 0:r,collectionName:t}}]}},function(e){if(_e(e))return"upload"===e.serviceName?[{eventType:"ui",action:"clicked",actionSubject:"button",actionSubjectId:"uploadButton",attributes:{}},{eventType:"screen",actionSubject:"recentFilesBrowserModal",name:"recentFilesBrowserModal",attributes:{}}]:[{eventType:"ui",action:"clicked",actionSubject:"button",actionSubjectId:"cloudBrowserButton",attributes:{cloudType:e.serviceName}}]},function(e,t){if(et(e)){var n=t.getState().selectedItems,r=void 0===n?[]:n,i=r.length>0?"insertFilesButton":"cancelButton",o=r.length>0?r.map((function(e){return e.serviceName})):void 0,a=r.length>0?r.map((function(e){return{serviceName:e.serviceName,accountId:e.accountId,fileId:e.id,fileMimetype:e.mimeType,fileSize:e.size,fileAge:"recent_files"===e.serviceName?Zp(e.createdAt):void 0}})):void 0;return[{eventType:"ui",action:"clicked",actionSubject:"button",actionSubjectId:i,attributes:{fileCount:r.length,serviceNames:o,files:a}}]}},function(e){if(function(e){return e.type===ot}(e))return[{eventType:"ui",action:"clicked",actionSubject:"button",actionSubjectId:"linkCloudAccountButton",attributes:{cloudType:e.serviceName}}]},function(e){if(function(e){return e.type===Kr}(e))return[{eventType:"screen",actionSubject:"localFileBrowserModal",name:"localFileBrowserModal",attributes:{}},{eventType:"ui",action:"clicked",actionSubject:"button",actionSubjectId:"localFileBrowserButton",attributes:{}}]},function(e){if(function(e){return e.type===Qe}(e))return[{eventType:"screen",actionSubject:"cloudBrowserModal",name:"cloudBrowserModal",attributes:{cloudType:e.serviceName}}]},function(e){if(Pt(e))return[{eventType:"screen",actionSubject:"cloudBrowserModal",name:"cloudBrowserModal",attributes:{cloudType:"giphy"}}]},function(e){if(Si(e)){var t=e.imageUrl,n=void 0===t?void 0:t,r=e.originalFile;return[{eventType:"screen",actionSubject:"fileEditorModal",name:"fileEditorModal",attributes:{imageUrl:n,originalFile:void 0===r?void 0:r}}]}},function(e){if(Zu(e))return[{eventType:"screen",actionSubject:"mediaPickerModal",name:"mediaPickerModal",attributes:{}},{eventType:"screen",actionSubject:"recentFilesBrowserModal",name:"recentFilesBrowserModal",attributes:{}}]},function(e){if(function(e){return e.type===wt}(e)){var t=e.error,n=e.info,r=void 0===n?void 0:n;return[{eventType:"operational",action:"unhandledError",actionSubject:"error",attributes:{status:"fail",failReason:"unknown",browserInfo:window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:"unknown",error:t instanceof Error?t.message:t,info:r}}]}}],Qp=n(2244);function Xp(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return $p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $p(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw o}}}}function $p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ed=function(e,t,n){var r=Object(Qp.a)("popup"),i=r.packageName,o=r.packageVersion,a=r.componentName,c=r.component;new qp.a({context:[{packageName:i,packageVersion:o,componentName:a,component:c,attributes:{featureFlags:Vp()(n,["newCardExperience","folderUploads"])}}],handlers:e,payload:t}).fire(Kp.a)},td=function(e){return function(t){return function(n){var r=e.getState().config,i=r.featureFlags,o=r.proxyReactContext;return o&&o.getAtlaskitAnalyticsEventHandlers&&function(){var t,r=o.getAtlaskitAnalyticsEventHandlers(),a=Xp(Jp);try{for(a.s();!(t=a.n()).done;){((0,t.value)(n,e)||[]).forEach((function(e){return ed(r,e,i)}))}}catch(c){a.e(c)}finally{a.f()}}(),t(n)}}},nd=function(e){return function(t){return function(n){return Ti(n)&&e.getState().userMediaClient.collection.removeFile(n.userFileId||n.id,ve.c,n.occurrenceKey),t(n)}}};function rd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function id(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rd(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var od=function(e,t,n,r){var i=n.config.authProvider,o=Dl.redirectUrl,a=new ps,c=new Os,u=new ms(i),s=id(id({},Sl),{},{redirectUrl:o,plugins:r.plugins,tenantMediaClient:t,userMediaClient:n,config:r});return Object(X.createStore)(kl,s,Object(Xu.composeWithDevTools)(Object(X.applyMiddleware)(td,Al(),(function(e){return function(t){return function(n){return dt(n)&&Nl(e),t(n)}}}),Gf(),Ml,Il,function(e){return function(t){return function(n){return function(r){if(Fe(r)){var i=t.getState().userMediaClient,o=r.serviceName,a=r.accountId,c=r.path,u=0===c.length?{id:"",name:""}:c[c.length-1];i.config.authProvider().then((function(t){return e.fetchCloudAccountFolder(t,o,a,u.id)})).then((function(e){return t.dispatch(Xe(a,c,e.items,o,void 0,e.cursor))})).catch((function(e){e.response&&401===e.response.status&&t.dispatch(lt({id:a,name:o}))}))}return n(r)}}}}(a),function(e){return function(t){return function(n){return function(r){if(qe(r)){var i=t.getState().userMediaClient,o=r.serviceName,a=r.accountId,c=r.path,u=(c[c.length-1]||{id:""}).id,s=t.getState().view,l=s&&s.nextCursor,f=s&&s.items||[];i.config.authProvider().then((function(t){return e.fetchCloudAccountFolder(t,o,a,u,l)})).then((function(e){return t.dispatch(Xe(a,c,f.concat(e.items),o,l,e.cursor))})).catch((function(e){e.response&&401===e.response.status&&t.dispatch(lt({id:a,name:o}))}))}return n(r)}}}}(a),function(e,t){return function(n){return function(r){return function(i){if(i.type===ot){var o=n.getState(),a=o.redirectUrl,c=o.userMediaClient,u=i.serviceName,s=t.startAuth(a,u).then((function(){return c.config.authProvider()})).then((function(t){return e.getServiceList(t)}));n.dispatch(Ot(s)),s.then((function(e){var t=e.find((function(e){return e.type===u}));t&&n.dispatch(Ae(u,t.id))}))}return r(i)}}}}(a,u),Rp(a),Tl(a),gp(e,c),Ap(),Lp(),Np(),Bp,function(e){return function(t){return function(n){return function(r){if(Pt(r)){var i=r.query,o=r.shouldAppendResults,a=t.getState().giphy.imageCardModels,c=o?a.length+1:void 0;Hp(e,t,{query:i,offset:c,shouldAppendResults:o})}return n(r)}}}}(a),function(e){return function(t){return function(t){return function(n){return et(n)&&e.emitClosed(),t(n)}}}}(e),Gp(e),nd)))},ad={collection:""},cd=n(2763),ud=n.n(cd),sd=function(e){return Object(is.isClientBasedAuth)(e)?e.clientId:ud()(e.token).clientId};function ld(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ld(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ld(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pd(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b()(this,n)}}var dd=function(e){y()(n,e);var t=pd(n);function n(e,r){var i,a=r.container,u=void 0===a?C.canUseDOM?document.body:void 0:a,s=r.uploadParams,l=r.proxyReactContext,p=r.singleSelect,d=r.plugins,v=r.useForgePlugins,m=void 0!==v&&v,y=r.featureFlags;f()(this,n),(i=t.call(this)).tenantMediaClient=e,i.proxyReactContext=l,i.useForgePlugins=m,i.featureFlags=y;var g=function(e,t){var n;return function(){var r=c()(o.a.mark((function r(i){var a,c,u;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(a=t.userAuthProvider)){r.next=3;break}return r.abrupt("return",a(i));case 3:if(r.prev=3,n&&!e.isTokenExpired(n)){r.next=14;break}return c=t.authProvider,r.t0=sd,r.next=9,c(i);case 9:return r.t1=r.sent,u=(0,r.t0)(r.t1),r.next=13,e.fetchToken(u);case 13:n=r.sent;case 14:return r.abrupt("return",{clientId:(o=n).data.clientId,token:o.data.token,baseUrl:o.data.baseUrl});case 17:throw r.prev=17,r.t2=r.catch(3),new Error("Popup media picker Stargate call failed. If you were not intending to use Stargate you should provide userAuthProvider in the context");case 20:case"end":return r.stop()}var o}),r,null,[[3,17]])})));return function(e){return r.apply(this,arguments)}}()}(e.stargate,e.config),O=new E.a({authProvider:g}),w=fd(fd({},ad),s);i.store=od(h()(i),e,O,{proxyReactContext:l,singleSelect:p,uploadParams:w,plugins:d,featureFlags:y}),i.tenantUploadParams=w;var j=i.renderPopup();return j?(i.container=j,u&&u.appendChild(j),i):b()(i)}return d()(n,[{key:"show",value:function(){var e=c()(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=this.store.dispatch)({type:pt}),this.useForgePlugins&&t({type:mt}),t({type:Yu});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancel",value:function(){var e=c()(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.t0=this.store,e.t1=Qu,e.next=6,t;case 6:e.t2=e.sent,e.t3={tenantFileId:e.t2},e.t4=(0,e.t1)(e.t3),e.t0.dispatch.call(e.t0,e.t4);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"teardown",value:function(){var e;if(this.container)try{Object(P.unmountComponentAtNode)(this.container),this.container.remove()}catch(t){(0,this.store.dispatch)({type:wt,error:(e={error:t,info:"`ChildNode#remove()` polyfill is not available in client"}).error,info:e.info})}}},{key:"hide",value:function(){this.store.dispatch(tt())}},{key:"setUploadParams",value:function(e){this.tenantUploadParams=fd(fd({},ad),e)}},{key:"emitClosed",value:function(){this.emit("closed",void 0)}},{key:"renderPopup",value:function(){if(C.canUseDOM){var e=document.createElement("div");return Object(P.render)(x.a.createElement(Ku,{store:this.store,proxyReactContext:this.proxyReactContext,tenantUploadParams:this.tenantUploadParams,useForgePlugins:this.useForgePlugins,featureFlags:this.featureFlags}),e),e}}}]),n}(Bu.a)}}]);