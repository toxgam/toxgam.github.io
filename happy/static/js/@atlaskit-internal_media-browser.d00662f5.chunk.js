/*! For license information please see @atlaskit-internal_media-browser.d00662f5.chunk.js.LICENSE.txt */
(this["webpackJsonphappy-author"]=this["webpackJsonphappy-author"]||[]).push([[73],{2368:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i}));var r={1:"none",2:"rotateY(180deg)",3:"rotate(180deg)",4:"rotate(180deg) rotateY(180deg)",5:"rotate(270deg) rotateY(180deg)",6:"rotate(90deg)",7:"rotate(90deg) rotateY(180deg)",8:"rotate(270deg)"},a=function(e){return e>=5},i=function(e){return r[e]}},2386:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return s}));var r=n(2467),a=n(3117),i=n(2402),o={newCardExperience:!0,captions:!1,timestampOnVideo:!1,observedWidth:!1,mediaInline:!1,folderUploads:!0,mediaUploadApiV2:!0},c=Object(a.b)(o),u=Object(a.a)(o);function l(e){return{packageName:i.a,packageVersion:i.b,componentName:e,component:e}}function s(e){if(e&&Object(r.b)(e))return e.metadata}},2402:function(e){e.exports=JSON.parse('{"a":"@atlaskit/media-picker","b":"63.0.1"}')},2403:function(e,t,n){(function(e){!function(t){"use strict";var n="[object process]"===Object.prototype.toString.call("undefined"!==typeof e?e:0),r="undefined"!==typeof performance&&"undefined"!==typeof performance.now&&"function"===typeof performance.mark&&"function"===typeof performance.measure&&("function"===typeof performance.clearMarks||"function"===typeof performance.clearMeasures),a="undefined"!==typeof PerformanceObserver&&"undefined"!==typeof PerformanceObserver.prototype&&"function"===typeof PerformanceObserver.prototype.constructor,i={},o={},c=function(){return r?performance.now():Date.now()},u=function(e){i[e]=void 0,o[e]&&(o[e]=void 0),r&&(n||performance.clearMeasures(e),performance.clearMarks(e))},l=function(e){if(r){if(n&&a){var t=new PerformanceObserver((function(n){o[e]=n.getEntries().find((function(t){return t.name===e})),t.disconnect()}));t.observe({entryTypes:["measure"]})}performance.mark(e)}i[e]=c()},s=function(e,t){try{var a=i[e];return r?(t||performance.mark(e+"-end"),performance.measure(e,e,t||e+"-end"),n?o[e]?o[e]:a?{duration:c()-a,startTime:a,entryType:"measure",name:e}:{}:performance.getEntriesByName(e).pop()||{}):a?{duration:c()-a,startTime:a,entryType:"measure",name:e}:{}}catch(l){return{}}finally{u(e),u(t||e+"-end")}},f=function(){i={},o={},r&&(n||performance.clearMeasures(),performance.clearMarks())},p=function(e){return!r||n?[]:performance.getEntriesByType(e)||[]},d=function(){return p("navigation").pop()||{}};function m(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function o(e){try{u(r.next(e))}catch(t){i(t)}}function c(e){try{u(r.throw(e))}catch(t){i(t)}}function u(e){e.done?n(e.value):a(e.value).then(o,c)}u((r=r.apply(e,t||[])).next())}))}function v(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return u([e,t])}}function u(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(c){i=[6,c],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}}var h=function(e,t){return m(void 0,void 0,void 0,(function(){var n,r,a;return v(this,(function(i){switch(i.label){case 0:l(t),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,e()];case 2:return n=i.sent(),r=s(t),[2,n?Object.assign({},{data:n,mark:r}):{mark:r}];case 3:throw a=i.sent(),s(t),a;case 4:return[2]}}))}))};t.clear=u,t.clearAll=f,t.end=s,t.getEntriesByType=p,t.getNavigationMarker=d,t.isNodeJSEnv=n,t.isPerformanceObservableSupported=a,t.isUserTimingAPISupported=r,t.profiler=h,t.start=l,Object.defineProperty(t,"__esModule",{value:!0})}(t)}).call(this,n(260))},2424:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r;!function(e){e.PastedFile="pastedFile",e.PastedScreenshot="pastedScreenshot",e.LocalUpload="localUpload"}(r||(r={}))},2455:function(e,t,n){"use strict";n.d(t,"a",(function(){return te}));var r=n(12),a=n.n(r),i=n(26),o=n.n(i),c=n(9),u=n.n(c),l=n(10),s=n.n(l),f=n(5),p=n.n(f),d=n(15),m=n.n(d),v=n(18),h=n.n(v),y=n(7),b=n.n(y),w=n(1),g=n.n(w),O=n(0),k=n(2403),P=n(2521),j=n(2470),F=n(531);function x(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b()(e);if(t){var a=b()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}var E=function(e){m()(n,e);var t=x(n);function n(){return u()(this,n),t.apply(this,arguments)}return s()(n,[{key:"emitPluginItemsInserted",value:function(e){var t=e.map((function(e){return{pluginName:e.serviceName,pluginFile:{id:e.id,metadata:e.metadata}}}));this.emit("plugin-items-inserted",t)}},{key:"emitUploadsStart",value:function(e){this.emit("uploads-start",{files:e})}},{key:"emitUploadPreviewUpdate",value:function(e,t){this.emit("upload-preview-update",{file:e,preview:t})}},{key:"emitUploadEnd",value:function(e){this.emit("upload-end",{file:e})}},{key:"emitUploadError",value:function(e,t){this.emit("upload-error",{fileId:e,error:t})}}]),n}(function(){function e(){u()(this,e),g()(this,"emitter",new F.EventEmitter2({wildcard:!0}))}return s()(e,[{key:"once",value:function(e,t){this.emitter.once(e,t)}},{key:"on",value:function(e,t){this.emitter.on(e,t)}},{key:"onAny",value:function(e){this.emitter.onAny(e)}},{key:"addListener",value:function(e,t){this.emitter.addListener(e,t)}},{key:"off",value:function(e,t){this.emitter.off(e,t)}},{key:"removeListener",value:function(e,t){this.emitter.removeListener(e,t)}},{key:"removeAllListeners",value:function(e){void 0===e?this.emitter.removeAllListeners():this.emitter.removeAllListeners(e)}},{key:"emit",value:function(e,t){return this.emitter.emit(e,t)}}]),e}()),U=n(310),S=n.n(U),R=n(2596),C=n(2467),I=n(2522),M=n(2376),A=n(2391),T=n(2380),D=n(2457);function N(){return(N=o()(a.a.mark((function e(t,n){var r,i,o,c,u,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(T.c)(t);case 2:return r=e.sent,e.next=5,Object(D.a)(r);case 5:if(null!==(i=e.sent)){e.next=10;break}return e.abrupt("return",{file:t});case 10:return o=i.width,c=i.height,u=i.scaleFactor,l={file:t,dimensions:{width:o,height:c},scaleFactor:n||u},e.abrupt("return",l);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var B=n(2424),X=n(2566),Y=function(e){return!e.width&&!e.height};function L(){return(L=o()(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="image"===e.t0||"video"===e.t0?3:9;break;case 3:return e.next=5,Object(X.a)(t,n);case 5:if(r=e.sent,!Y(r)){e.next=8;break}return e.abrupt("return",{file:n,scaleFactor:1});case 8:return e.abrupt("return",{file:n,dimensions:r,scaleFactor:1});case 9:return e.abrupt("return",{file:n});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var W,z=function(){function e(t,n,r){var i=this;u()(this,e),g()(this,"emit",(function(e,t){i.emitter.emit(e,t)})),g()(this,"onFileSuccess",function(){var e=o()(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.mediaFile,i.emit("file-converting",{file:r}),t.cancel=function(){i.releaseCancellableFile(r)};case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),g()(this,"onFileError",(function(e,t,n){if(i.releaseCancellableFile(e),"canceled"!==n){var r=n instanceof Error?n.message:n,a=n instanceof Error?n:void 0;i.emit("file-upload-error",{fileId:e.id,error:{fileId:e.id,name:t,description:r,rawError:a}})}})),this.tenantMediaClient=t,this.tenantUploadParams=n,this.shouldCopyFileToRecents=r,this.emitter=new F.EventEmitter2,this.cancellableFilesUploads={}}return s()(e,[{key:"setUploadParams",value:function(e){this.tenantUploadParams=e}},{key:"createUploadController",value:function(){return new R.a}},{key:"addFiles",value:function(e){this.addFilesWithSource(e.map((function(e){return{file:e,source:B.a.LocalUpload}})))}},{key:"addFile",value:function(e,t){this.addFilesWithSource([{file:e,source:B.a.LocalUpload,replaceFileId:t}])}},{key:"addFilesWithSource",value:function(e){var t=this;if(0!==e.length){var n=Date.now(),r=this.userMediaClient,a=this.tenantMediaClient,i=this.shouldCopyFileToRecents,o=i?a:r,c=i?this.tenantUploadParams.collection:A.f;if(o){for(var u=[],l=0;l<e.length;l++){var s=e[l].replaceFileId;u.push({fileId:s||S()(),occurrenceKey:S()(),collection:c})}var f=o.file.touchFiles(u,c),p=e.map((function(e,r){var a=e.file,l=e.source,s=u[r],p=s.fileId,d=s.occurrenceKey,m=f.then((function(e){var t=e.created.find((function(e){return e.fileId===p}));if(!t)throw new Error("Cant retrieve uploadId from result of touch endpoint call");return t.uploadId})).catch((function(e){if(e instanceof C.a){var t=e;if(t.metadata&&409===t.metadata.statusCode)return o.mediaStore.createUpload(1,c).then((function(e){return e.data[0].id}))}throw e})),v={collection:c,content:a,name:a.name,mimeType:a.type},h={id:p,occurrenceKey:d,deferredUploadId:m},y=t.createUploadController(),b=o.file.upload(v,y,h),w={id:p,name:a.name,size:a.size,creationDate:n,type:a.type,occurrenceKey:d},g={mediaFile:w,file:a,source:l,cancel:function(){y.abort()}},O=t.onFileSuccess.bind(t);return b.subscribe({next:function(e){"processing"===e.status&&(this.unsubscribe(),i&&(o.emit("file-added",e),I.a.emit("file-added",e)),O(g,p))},error:function(e){t.onFileError(w,"upload_fail",e)}}),t.cancellableFilesUploads[p]=g,g})),d=p.map((function(e){return e.mediaFile}));this.emit("files-added",{files:d}),this.emitPreviews(p)}}}},{key:"cancel",value:function(e){var t=this;if(e){var n=this.cancellableFilesUploads[e];n&&n.cancel&&n.cancel()}else Object.keys(this.cancellableFilesUploads).forEach((function(e){var n=t.cancellableFilesUploads[e];n.cancel&&n.cancel()}))}},{key:"on",value:function(e,t){this.emitter.on(e,t)}},{key:"off",value:function(e,t){this.emitter.off(e,t)}},{key:"emitPreviews",value:function(e){var t=this;e.forEach((function(e){var n=e.file,r=e.mediaFile,a=e.source,i=n.type,o=t.getMediaTypeFromFile(n);Object(M.isMimeTypeSupportedByBrowser)(i)?"image"===o?function(e,t){return N.apply(this,arguments)}(n,a===B.a.PastedScreenshot?window.devicePixelRatio:void 0).then((function(e){t.emit("file-preview-update",{file:r,preview:e})})):function(e,t){return L.apply(this,arguments)}(o,n).then((function(e){t.emit("file-preview-update",{file:r,preview:e})})).catch((function(){return t.emit("file-preview-update",{file:r,preview:{}})})):t.emit("file-preview-update",{file:r,preview:{}})}))}},{key:"getMediaTypeFromFile",value:function(e){var t=e.type;return Object(M.getMediaTypeFromMimeType)(t)}},{key:"releaseCancellableFile",value:function(e){delete this.cancellableFilesUploads[e.id]}}]),e}(),H=n(2386),J=n(222),V=n(529),_=n(2431),G=n(2402);function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $=function(e){if(W)return W.getInstance(e)},Q=function(e,t){(function(e,t){if(!W){var n={platform:{component:"media-picker-".concat(t)},type:J.b.Experience,performanceType:J.a.InlineResult,featureFlags:H.b};W=new V.a("media-upload",n)}return W.getInstance(e)})(e,t).start()},Z=function(e,t){var n,r=q(q({},t),{},{packageName:G.a,packageVersion:G.b,mediaEnvironment:Object(_.b)(),mediaRegion:Object(_.c)()});null===(n=$(e))||void 0===n||n.failure({metadata:r})};function ee(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b()(e);if(t){var a=b()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}var te=function(e){m()(n,e);var t=ee(n);function n(e,r){var i;u()(this,n),i=t.call(this,e),g()(p()(i),"uploadComponent",new E),g()(p()(i),"fireCommencedEvent",(function(e){e.files.forEach((function(e){var t=e.id,n=e.size,r=e.type;Object(k.start)("MediaPicker.fireUpload.".concat(t)),i.createAndFireAnalyticsEvent({eventType:"operational",action:"commenced",actionSubject:"mediaUpload",actionSubjectId:"localMedia",attributes:{sourceType:"local",serviceName:"upload",fileAttributes:{fileId:t,fileSize:n,fileMimetype:r}}}),Q(t,i.componentName)}))})),g()(p()(i),"fireUploadSucceeded",(function(e){var t=e.file,n=t.id,r=t.size,a=t.type,o=Object(k.end)("MediaPicker.fireUpload.".concat(n)).duration,c=void 0===o?-1:o;i.createAndFireAnalyticsEvent({eventType:"operational",action:"succeeded",actionSubject:"mediaUpload",actionSubjectId:"localMedia",attributes:{sourceType:"local",serviceName:"upload",status:"success",fileAttributes:{fileId:n,fileSize:r,fileMimetype:a},uploadDurationMsec:c}}),function(e,t){var n;null===(n=$(e))||void 0===n||n.success({metadata:{fileAttributes:t,packageName:G.a,packageVersion:G.b,mediaEnvironment:Object(_.b)(),mediaRegion:Object(_.c)()}})}(n,{fileId:n,fileSize:r,fileMimetype:a})})),g()(p()(i),"fireUploadFailed",function(){var e=o()(a.a.mark((function e(t){var n,r,o,c,u,l,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.fileId,r=t.error,o=r.name,c=r.rawError,u=Object(k.end)("MediaPicker.fireUpload.".concat(n)),l=u.duration,s=void 0===l?-1:l,i.createAndFireAnalyticsEvent({eventType:"operational",action:"failed",actionSubject:"mediaUpload",actionSubjectId:"localMedia",attributes:{sourceType:"local",serviceName:"upload",status:"fail",failReason:o,error:c?Object(P.a)(c):"unknown",request:c?Object(H.d)(c):void 0,fileAttributes:{fileId:n},uploadDurationMsec:s}}),Z(n,{failReason:o,error:c?Object(P.a)(c):"unknown",request:c?Object(H.d)(c):void 0,fileAttributes:{fileId:n},uploadDurationMsec:s});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),g()(p()(i),"createAndFireAnalyticsEvent",(function(e){var t=i.props.createAnalyticsEvent;t&&t(e).fire(j.a)})),g()(p()(i),"cancel",(function(e){i.uploadService.cancel(e)})),g()(p()(i),"onFilesAdded",(function(e){var t=e.files;i.uploadComponent.emitUploadsStart(t)})),g()(p()(i),"onFilePreviewUpdate",(function(e){var t=e.file,n=e.preview;i.uploadComponent.emitUploadPreviewUpdate(t,n)})),g()(p()(i),"onFileConverting",(function(e){var t=e.file;i.uploadComponent.emitUploadEnd(t)})),g()(p()(i),"onUploadError",(function(e){var t=e.fileId,n=e.error;i.uploadComponent.emitUploadError(t,n)})),i.componentName=r;var c=i.props,l=c.mediaClient,s=c.config,f=c.onUploadsStart,d=c.onPreviewUpdate,m=c.onEnd,v=c.onError,h=s.uploadParams,y=s.shouldCopyFileToRecents,b=void 0===y||y;return i.uploadComponent.on("uploads-start",i.fireCommencedEvent),i.uploadComponent.on("upload-end",i.fireUploadSucceeded),i.uploadComponent.on("upload-error",i.fireUploadFailed),f&&i.uploadComponent.on("uploads-start",f),d&&i.uploadComponent.on("upload-preview-update",d),m&&i.uploadComponent.on("upload-end",m),v&&i.uploadComponent.on("upload-error",v),i.uploadService=new z(l,h,b),i.uploadService.on("files-added",i.onFilesAdded),i.uploadService.on("file-preview-update",i.onFilePreviewUpdate),i.uploadService.on("file-converting",i.onFileConverting),i.uploadService.on("file-upload-error",i.onUploadError),i}return s()(n,[{key:"setUploadParams",value:function(e){this.uploadService.setUploadParams(e)}}]),n}(O.Component)},2457:function(e,t,n){"use strict";n.d(t,"a",(function(){return I})),n.d(t,"b",(function(){return D}));var r,a,i=n(12),o=n.n(i),c=n(26),u=n.n(c);!function(e){e.JPEG="image/jpeg",e.PNG="image/png"}(r||(r={})),function(e){e.XResolution="XResolution",e.YResolution="YResolution",e.Orientation="Orientation"}(a||(a={}));var l,s={"top-left":1,"top-right":2,"bottom-right":3,"bottom-left":4,"left-top":5,"right-top":6,"right-bottom":7,"left-bottom":8},f=n(1),p=n.n(f),d=n(59),m=n.n(d),v=a.XResolution,h=a.YResolution;function y(e){return new Promise(function(){var t=u()(o.a.mark((function t(r,a){var i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l){t.next=5;break}return t.next=3,n.e(167).then(n.t.bind(null,3224,7));case 3:i=t.sent,l=i.default||i;case 5:l.parseMetaData(e,(function(e){try{var t=e&&e.exif?e.exif.getAll():{};Object.keys(t).forEach((function(e){var n=t[e];"object"!==m()(n)||e!==v&&e!==h||!("numerator"in n)||(t[e]=n.numerator),"number"===typeof t[e]&&(t[e]="".concat(t[e]))})),r(t)}catch(n){a(n)}}));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}var b,w=n(2380);function g(e){return O.apply(this,arguments)}function O(){return O=u()(o.a.mark((function e(t){var r,a,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b){e.next=5;break}return e.next=3,n.e(178).then(n.t.bind(null,3223,7));case 3:r=e.sent,b=r.default||r;case 5:return e.next=7,Object(w.a)(t);case 7:return a=e.sent,i=b(a),e.next=11,k(i);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)}))),O.apply(this,arguments)}function k(e){return P.apply(this,arguments)}function P(){return(P=u()(o.a.mark((function e(t){var n,r,a,i,c,u,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n="",r={},a=0;case 3:if(!(a<t.length)){e.next=12;break}if("IEND"!==(i=t[a]).name){e.next=7;break}return e.abrupt("break",12);case 7:"iTXt"===i.name&&(n=String.fromCharCode.apply(null,Array.from(i.data))),"pHYs"===i.name&&(c=new DataView(i.data.buffer),1===c.getUint8(8)&&(u=c.getUint32(0),l=c.getUint32(4),r={PixelPerUnitX:u,PixelPerUnitY:l}));case 9:++a,e.next=3;break;case 12:return e.abrupt("return",{iTXt:n,pHYs:r});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e){var t={},n=e.match(/<(tiff|exif):.+>/gi);return n&&n.forEach((function(e){var n=e.match(/<(tiff|exif):([^>]+)>([^<]+)/i);if(n){var r=n[2];t[r]=n[3]}})),t}function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e){return U.apply(this,arguments)}function U(){return(U=u()(o.a.mark((function e(t){var n,a,i,c,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.type,e.prev=1,n!==r.PNG){e.next=12;break}return e.next=5,g(t);case 5:return a=e.sent,i=a.iTXt,c=a.pHYs,u=x(x({},j(i)),c),e.abrupt("return",u);case 12:if(t.type!==r.JPEG){e.next=16;break}return e.next=15,y(t);case 15:return e.abrupt("return",e.sent);case 16:e.next=20;break;case 18:e.prev=18,e.t0=e.catch(1);case 20:return e.abrupt("return",null);case 21:case"end":return e.stop()}}),e,null,[[1,18]])})))).apply(this,arguments)}var S=n(2368),R=a.Orientation,C=a.XResolution;function I(e){return M.apply(this,arguments)}function M(){return(M=u()(o.a.mark((function e(t){var n,r,a,i,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X(t);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return r=n.width,a=n.height,i=n.tags,c=A(t.file,i),e.abrupt("return",{scaleFactor:c,width:r,height:a});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e,t){var n=function(e){try{var t=e.name.trim().match(/@([0-9\.]+)x\.[a-z]{3}$/);if(t)return parseFloat(t[1])}catch(n){}return null}(e);return null!==n?n:t?"number"===typeof t.PixelPerUnitX?Math.round(.0254*t.PixelPerUnitX)/72:B(t,C,72)/72:1}var T=function(e){if(e&&e[R]){var t=e[R];if(t){var n=parseInt(t,10);return isNaN(n)?s[t]:n}}return 1};function D(e){return N.apply(this,arguments)}function N(){return(N=u()(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(t);case 2:return n=e.sent,e.abrupt("return",T(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e,t,n){try{var r=parseFloat("".concat(e[t]));if(!isNaN(r))return r}catch(a){}return n}function X(e){return Y.apply(this,arguments)}function Y(){return(Y=u()(o.a.mark((function e(t){var n,r,a,i,c,u,l,s,f,p,d,m,v;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.file,r=t.src,a=n.type,i=0,c=0,e.next=6,E(n);case 6:if((u=e.sent)&&u.PixelXDimension&&(i=B(u,"PixelXDimension",0)),u&&u.PixelXDimension&&(c=B(u,"PixelYDimension",0)),l=T(u),s=Object(S.b)(l),f={type:a,width:i,height:c,naturalWidth:i,naturalHeight:c,tags:u},!(s||0===i&&0===c)){e.next=27;break}return e.prev=13,e.next=16,Object(w.e)(r);case 16:p=e.sent,d=Object(w.f)(p),m=d.width,v=d.height,f.width=m,f.height=v,f.naturalWidth=p.naturalWidth,f.naturalHeight=p.naturalHeight,e.next=27;break;case 24:return e.prev=24,e.t0=e.catch(13),e.abrupt("return",null);case 27:return e.abrupt("return",f);case 28:case"end":return e.stop()}}),e,null,[[13,24]])})))).apply(this,arguments)}},2470:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r="media"},2567:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(28),a=n.n(r),i=n(1),o=n.n(i),c=n(0),u=n.n(c),l=n(1197),s="mediaCtx",f=n(3117);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=function(e,t){return e.reduce((function(e,n){return d(d({},e),{},o()({},n,Object(f.c)(n,t)))}),{})},v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=Object(c.forwardRef)((function(r,i){var f=r.featureFlags,p=t.filterFeatureFlags,v=Object(c.useMemo)((function(){var t={featureFlags:p&&f?m(p,f):f};return d(d({},e),{},o()({},s,d({},t)))}),[p,f]);return u.a.createElement(l.a,{data:v},u.a.createElement(n,a()({},r,{ref:i})))}));return r.displayName="WithMediaAnalyticsContext(".concat(n.displayName||n.name,")"),r}}},3198:function(e,t,n){"use strict";n.r(t),n.d(t,"BrowserBase",(function(){return E})),n.d(t,"Browser",(function(){return U}));var r=n(9),a=n.n(r),i=n(10),o=n.n(i),c=n(5),u=n.n(c),l=n(15),s=n.n(l),f=n(18),p=n.n(f),d=n(7),m=n.n(d),v=n(1),h=n.n(v),y=n(0),b=n.n(y),w=n(506),g=n(2567),O=n(874),k=n.n(O),P=n(2455),j=n(2386);function F(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var a=m()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var x="browser",E=function(e){s()(n,e);var t=F(n);function n(e){var r;a()(this,n),r=t.call(this,e,x),h()(u()(r),"browserRef",b.a.createRef()),h()(u()(r),"onFilePicked",(function(e){if(e.target){var t=r.props.config.replaceFileId,n=[].slice.call(e.target.files);r.setUploadParams(r.props.config.uploadParams);try{t?r.uploadService.addFile(n[0],t):r.uploadService.addFiles(n)}finally{r.browserRef.current&&(r.browserRef.current.value="")}}})),h()(u()(r),"browse",(function(){var e=r.props.onClose;r.browserRef.current&&(r.browserRef.current.click(),e&&e())}));var i=e.config,o=e.onError,c=i.replaceFileId;return c&&!k()(c)&&(r.createAndFireAnalyticsEvent({eventType:"operational",action:"failed",actionSubject:"mediaUpload",actionSubjectId:"localMedia",attributes:{status:"fail",failReason:"invalid_uuid",uuid:c}}),o&&o({fileId:c,error:{description:"Invalid replaceFileId format",name:"invalid_uuid",fileId:c}})),r}return o()(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.onBrowseFn,n=e.onCancelFn,r=e.isOpen;t&&t(this.browse),n&&n(this.cancel),r&&this.browse()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props.isOpen,n=e.isOpen;n&&n!==t&&this.browse()}},{key:"render",value:function(){var e=this.props,t=e.config,n=e.children,r=t.multiple,a=t.replaceFileId,i=t.fileExtensions&&t.fileExtensions.join(",");return b.a.createElement(b.a.Fragment,null,b.a.createElement("input",{"data-testid":"media-picker-file-input",ref:this.browserRef,type:"file",style:{display:"none"},multiple:!a&&r,accept:i,onChange:this.onFilePicked}),n?n(this.browse):null)}}]),n}(P.a);h()(E,"defaultProps",{config:{uploadParams:{}}});var U=Object(g.a)(Object(j.c)(x),{filterFeatureFlags:j.a})(Object(w.a)()(E))}}]);